{% set name = "mdx2" %}
{% set version = "1.0.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/mdx2-{{ version }}.tar.gz
  sha256: da4e6402b7d43a7660db6e39357fe3556b68f72f07aa1f9c874cccbe172ec1e7

build:
  entry_points:
    - mdx2.version = mdx2.command_line.version:run
    - mdx2.import_data = mdx2.command_line.import_data:run
    - mdx2.import_geometry = mdx2.command_line.import_geometry:run
    - mdx2.find_peaks = mdx2.command_line.find_peaks:run
    - mdx2.mask_peaks = mdx2.command_line.mask_peaks:run
    - mdx2.tree = mdx2.command_line.tree:run
    - mdx2.bin_image_series = mdx2.command_line.bin_image_series:run
    - mdx2.integrate = mdx2.command_line.integrate:run
    - mdx2.correct = mdx2.command_line.correct:run
    - mdx2.merge = mdx2.command_line.merge:run
    - mdx2.map = mdx2.command_line.map:run
    - mdx2.scale = mdx2.command_line.scale:run
    - mdx2.reintegrate = mdx2.command_line.reintegrate:run
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  host:
    - python >=3.10, <3.11
    - setuptools
    - pip
  run:
    - python >=3.10, <3.11
    - numpy
    - pandas
    - scipy
    - dxtbx
    - nexusformat
    - joblib
    - numexpr
    - matplotlib
    - simple-parsing
    - loguru
    - xarray


test:
  imports:
    - mdx2
  commands:
    - pip check
    - mdx2.version --help
    - mdx2.import_data --help
    - mdx2.import_geometry --help
    - mdx2.find_peaks --help
    - mdx2.mask_peaks --help
    - mdx2.tree --help
    - mdx2.bin_image_series --help
    - mdx2.integrate --help
    - mdx2.correct --help
    - mdx2.merge --help
    - mdx2.map --help
    - mdx2.scale --help
    - mdx2.reintegrate --help
  requires:
    - pip

about:
  summary: Macromolecular diffuse scattering data reduction
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - AddYourGitHubIdHere
