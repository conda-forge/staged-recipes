{% set name = "deptry" %}
{% set version = "0.14.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/deptry-{{ version }}.tar.gz
  sha256: 3415c65c0734f6dfafa1321c77c1c9fafb6d6f88d0f8441e5b2cfb5b3b41f71b

build:
  entry_points:
    - deptry = deptry.cli:deptry
  script: 
    - cargo-bundle-licenses --format yaml --output THIRDPARTY.yml
    - {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  build:
    - python                              # [build_platform != target_platform]
    - cross-python_{{ target_platform }}  # [build_platform != target_platform]
    - crossenv                            # [build_platform != target_platform]
    - maturin >=1.2.1,<2                      # [build_platform != target_platform]
    - {{ compiler('rust') }}
    - {{ compiler('c') }}
    - cargo-bundle-licenses
  host:
    - python
    - maturin >=1.5,<2.0
    - pip
  run:
    - python
    - chardet >=4.0.0
    - click >=8.0.0,<9
    - pathspec >=0.9.0
    - colorama >=0.4.6  # [win]
    - tomli >=2.0.1  # [py<311]
    - __osx >={{ MACOSX_DEPLOYMENT_TARGET|default("10.9") }}  # [osx and x86_64]

test:
  imports:
    - deptry
  commands:
    - pip check
    - deptry --help
  requires:
    - pip

about:
  home: https://github.com/fpgmaas/deptry
  summary: A command line utility to check for unused, missing and transitive dependencies in a Python project.
  license: MIT
  license_file:
    - THIRDPARTY.yml
    - LICENSE
  doc_url: https://fpgmaas.github.io/deptry/
  

extra:
  recipe-maintainers:
    - synapticarbors
