context:
  version: "2.2.0"

package:
  name: osm2pgsql
  version: ${{ version }}

source:
  - url: https://github.com/osm2pgsql-dev/osm2pgsql/archive/refs/tags/${{ version }}.tar.gz
    sha256: 567dad078f8a66d6d706ac1876b5251b688109d16974909d89ce2056d6e9f258

build:
  number: 0

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake
    - ninja
    - pkg-config
    - catch2
    - cli11
    - fmt <12
    - nlohmann_json
    - libboost-devel

  host:
    - expat
    - proj
    - bzip2
    - zlib
    - postgresql
    - lua
    - protozero
    - libosmium

  run:
    - expat
    - proj
    - bzip2
    - zlib
    - postgresql
    - lua
    - protozero
    - libosmium

tests:
  - script:
    - osm2pgsql --version
    - osm2pgsql --help

about:
  homepage: https://osm2pgsql.org
  license: GPL-2.0-only
  license_file:
    - COPYING
  summary:  Import OpenStreetMap data into a PostgreSQL/PostGIS database
  description: osm2pgsql is a tool for loading OpenStreetMap data into a PostgreSQL / PostGIS database suitable for applications like rendering into a map, geocoding with Nominatim, or general analysis.
  documentation: https://osm2pgsql.org
  repository: https://github.com/osm2pgsql-dev/osm2pgsql

extra:
  recipe-maintainers:
    - travishathaway
