context:
  version: "1.1.4"

package:
  name: doggo
  version: ${{ version }}

source:
  url: https://github.com/mr-karan/doggo/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 697d21704aba1425d09730d3aa811e51c53ef3e912fef1da1d9f5f8005dea5f8
  target_directory: src

build:
  number: 0
  script:
    - cd src
    - go-licenses save ./cmd/doggo --save_path ../library_licenses
    - if: unix
      then: go build -v -o $PREFIX/bin/doggo -ldflags="-s -w" ./cmd/doggo
      else: go build -v -o %LIBRARY_BIN%\doggo.exe -ldflags="-s" .\cmd\doggo

requirements:
  build:
    - ${{ compiler("go-nocgo") }}
    - go-licenses

tests:
  - script: doggo --help
  - package_contents:
      bin:
        - doggo
      strict: true

about:
  homepage: https://github.com/mr-karan/doggo
  summary: üê∂ Command-line DNS Client for Humans.
  description: |
    doggo is a modern command-line DNS client (like dig) written in Golang. It outputs information in a neat concise manner and supports protocols like DoH, DoT, DoQ, and DNSCrypt as well.
  license: GPL-3.0-or-later
  license_file:
    - src/LICENSE
    - library_licenses/
  documentation: https://pkg.go.dev/github.com/mr-karan/doggo
  repository: https://github.com/mr-karan/doggo

extra:
  recipe-maintainers:
    - pavelzw
