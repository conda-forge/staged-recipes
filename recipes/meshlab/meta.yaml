# Note: there are many handy hints in comments in this example -- remove them when you've finalized your recipe
# If your package is python based, we recommend using Grayskull to generate it instead:
# https://github.com/conda-incubator/grayskull

# Jinja variables help maintain the recipe as you'll update the version only here.
# Using the name variable with the URL in line 14 is convenient
# when copying and pasting from another recipe, but not really needed.
{% set name = "meshlab" %}
{% set version = "2022.02" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  git_url: https://github.com/cnr-isti-vclab/meshlab.git
  git_rev: MeshLab-{{ version }}

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make
    - {{ cdt('mesa-libgl-devel') }}          # [linux]
    - {{ cdt('mesa-dri-drivers') }}          # [linux]
    - {{ cdt('mesa-libegl-devel') }}         # [linux]
    - {{ cdt('libselinux') }}                # [linux]
    - {{ cdt('libxdamage') }}                # [linux]
    - {{ cdt('libxfixes') }}                 # [linux]
    - {{ cdt('libxxf86vm') }}                # [linux]
    - {{ cdt('libxcb') }}                    # [linux]
    - {{ cdt('libxext') }}                   # [linux]
    - {{ cdt('xorg-x11-server-xvfb') }}      # [linux]
    - {{ cdt('libxau') }}                    # [linux]
    - {{ cdt('libxi-devel') }}               # [linux]
  host:
    - qt-main
    - boost-cpp
    - eigen
    - glew
  run:
    - xorg-libxt  # [linux]
    - glew

test:
  commands:
    - meshlab --help

about:
  home: https://www.meshlab.net/#description
  summary: 'The open source system for processing and editing 3D triangular meshes'
  description: |
    The open source system for processing and editing 3D triangular meshes.
    It provides a set of tools for editing, cleaning, healing, inspecting,
    rendering, texturing and converting meshes. It offers features for processing
    raw data produced by 3D digitization tools/devices and for preparing models
    for 3D printing.
  license: GPL-3.0-or-later
  license_file:
    - LICENSE.txt
    - src/external/easyexif/LICENSE
  dev_url: https://github.com/cnr-isti-vclab/meshlab

extra:
  recipe-maintainers:
    - jaimergp
