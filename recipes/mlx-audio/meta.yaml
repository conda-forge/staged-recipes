{% set name = "mlx-audio" %}
{% set version = "0.2.3" %}
{% set python_min = "3.10" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/mlx_audio-{{ version }}.tar.gz
  sha256: 48419a3d4a848cb44e91694ad5218af98b08f749d5d33abed834aec6c3c15dc7

build:
  entry_points:
    - mlx_audio.tts.generate = mlx_audio.tts.generate:main
    - mlx_audio.server = mlx_audio.server:main
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  host:
    - python {{ python_min }}
    - pip
  run:
    - python >={{ python_min }}
    - misaki >=0.8.2
    - loguru >=0.7.3
    - num2words >=0.5.14
    - spacy >=3.8.4
    - phonemizer-fork >=3.3.2
    - espeakng-loader >=0.2.4
    - mlx >=0.25.2
    - mlx-vlm >=0.1.25
    - numpy >=1.26.4
    - transformers >=4.49.0
    - sentencepiece >=0.2.0
    - huggingface_hub >=0.27.0
    - python-sounddevice >=0.5.1
    - pysoundfile >=0.13.1
    - fastapi >=0.95.0
    - uvicorn >=0.22.0
    - einops >=0.8.1
    - tiktoken >=0.9.0
    - tqdm >=4.67.1
    - pyloudnorm >=0.1.1
    - omegaconf ==2.3.0
    - einx ==0.3.0
    - fastrtc
    - webrtcvad >=2.0.10
    - dacite >=1.9.2

test:
  imports:
    - mlx_audio
  commands:
    - pip check
    - mlx_audio.tts.generate --help
    - mlx_audio.server --help
  requires:
    - pip
    - python {{ python_min }}

about:
  home: https://github.com/Blaizzy/mlx-audio
  summary: MLX-Audio is a package for inference of text-to-speech (TTS) and speech-to-speech (STS) models locally on your Mac using MLX
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - xhochy
