{% set name = "sam3d" %}
{% set git_hash_date = "20251211" %}
{% set git_hash = "81a82373a3a7f4cbb00bd5b32aaf6b4d0f659ddd" %}
{% set version = "0.0.1." ~ git_hash_date %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/facebookresearch/sam-3d-objects/archive/{{ git_hash }}.tar.gz
  sha256: 6dda92acee2397369daeb56572ba4db043f7ad62b6eb269de5af1dfd647d7641


build:
  number: 0
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation

requirements:
  host:
    - python {{ python_min }}
    - pip
    - hatchling
    - hatch-requirements-txt
  run:
    - python >={{ python_min }}
    - astor
    - colorama
    - easydict
    - einops
    - fvcore
    - gdown
    - h5py
    - hydra-core >=1.3
    - jsonlines
    - jsonpickle
    - loguru
    - numpy
    - opencv
    - orjson
    - pandas
    - pillow >6.2.0
    - pycocotools
    - pydot
    - pyyaml >=5.1.0
    - rootutils
    - rtree
    - scikit-image
    - sentence-transformers
    - simplejson
    - tensorboard
    - timm
    - tqdm
    - wandb
    - webdataset
    - pytorch >=2.2.0
    - torchvision >=0.17.0
    - pytorch-lightning >=2.3.0

test:
  imports:
    - sam3d_objects
  commands:
    - pip check
    - python -c "from sam3d_objects import __init__; print('Import OK')"
  requires:
    - pip
    - python {{ python_min }}

about:
  home: https://github.com/facebookresearch/sam-3d-objects
  summary: SAM 3D Objects - Foundation model for 3D shape reconstruction from images
  description: |
    SAM 3D Objects is a foundation model that reconstructs full 3D shape geometry, 
    texture, and layout from a single image. It excels in real-world scenarios with 
    occlusion and clutter by using progressive training and a data engine with human feedback.
    
    Note: For full functionality including inference, install additional dependencies:
      pip install pytorch3d flash-attn kaolin gsplat
  license: LicenseRef-SAM
  license_family: OTHER
  license_file: LICENSE
  doc_url: https://github.com/facebookresearch/sam-3d-objects
  dev_url: https://github.com/facebookresearch/sam-3d-objects

extra:
  recipe-maintainers:
    - giswqs
