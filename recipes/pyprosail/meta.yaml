{% set name = "PyProSAIL" %}
{% set version = "1.0.2" %}
{% set file_ext = "tar.gz" %}
{% set hash_value = "d632d7216b2d9b64968f3b5f1dd113ab101dc6e1f6a146e28a7bc2c35e0fc268" %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  fn: '{{ name }}-{{ version }}.{{ file_ext }}'
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: {{ hash_value }}

build:
  number: 0
  script:
    - export LDFLAGS="-undefined dynamic_lookup -bundle"  # [osx]
    - python -m pip install --no-deps --ignore-installed .

requirements:
  build:
    - toolchain
    - mingwpy  # [win and py2k]
    - flang  # [win and py3k]
    - gcc  # [osx]
    - python
    - setuptools
    - libgfortran  # [linux]
    - numpy 1.11.*
  run:
    - python
    - numpy >=1.11

test:
  imports:
    - pyprosail
  commands:
    - conda inspect linkages -p $PREFIX {{ name|lower }}  # [not win]
    - conda inspect objects -p $PREFIX {{ name|lower }}  # [osx]

about:
  home: http://packages.python.org/PyPROSAIL
  license: LGPL-3.0
  license_family: LGPL
  license_file: 'COPYING'
  summary: "PyProSAIL is a Python interface to the ProSAIL combined leaf and canopy optical model"
  description: "PyProSAIL is a Python interface to the ProSAIL combined leaf and canopy optical model. \nFor more information see http://pyprosail.readthedocs.org."
  doc_url: 'http://pyprosail.readthedocs.io/en/latest/'
  dev_url: 'https://github.com/robintw/PyProSAIL'

extra:
  recipe-maintainers:
    - robintw
