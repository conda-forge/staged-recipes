{% set version = "0.0.0.20210320.46.0a92994" %}
{% set gitrev = "0a92994d729ff76a58f692d3028ca1b64b145d91" %}
{% set sha256 = "a91f4770ff9c39f4d72e339c379f566b3bbb359fa66122d85fc0bae3dde7abc7" %}

package:
  name: fp16
  version: {{ version }}

source:
  url: https://github.com/Maratyszcza/FP16/archive/{{ gitrev }}.tar.gz
  sha256: {{ sha256 }}
  patches:
    - shared_libs.patch

build:
  # Already built this
  skip: true
  # You can probably build this for windows
  skip: true  # [win]
  number: 0
  # header only library, no run_export

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make  # [unix]
  host:
    - psimd
  run:
    - psimd

test:
  commands:
    - test -f ${PREFIX}/include/fp16.h              # [unix]
    - test -f ${PREFIX}/include/fp16/bitcasts.h     # [unix]
    - test -f ${PREFIX}/include/fp16/fp16.h         # [unix]
    - test -f ${PREFIX}/include/fp16/psimd.h        # [unix]
    - test -f ${PREFIX}/include/fp16/__init__.py    # [unix]
    - test -f ${PREFIX}/include/fp16/avx.py         # [unix]
    - test -f ${PREFIX}/include/fp16/avx2.py        # [unix]

about:
  home: https://github.com/Maratyszcza/FP16
  summary: Header-only library for conversion to/from half-precision floating point formats
  license: MIT
  license_family: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - hmaarrfk
