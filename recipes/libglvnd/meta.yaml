{% set name = "libglvnd" %}
{% set version = "1.7.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  - url: https://gitlab.freedesktop.org/glvnd/libglvnd/-/archive/v{{ version }}/libglvnd-v{{ version }}.tar.bz2
    sha256: a4bf29598fe6a127188e2675b5600eeb5ca0e77413c7f745eb353a9ddb6b0119
    patches:
      - libglvnd_look_for_egl_icd_in_system_location.patch

build:
  skip: true  # [not linux]
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin='x') }}

requirements:
  build:
    - {{ compiler('c') }}
    - meson
    - pkg-config
    - ninja
  host:
    - xorg-libxext
    - xorg-libx11
    - xorg-xorgproto
    - wayland-protocols

test:
  commands:
    - test -f $PREFIX/lib/pkgconfig/gl.pc
    - test -f $PREFIX/include/GL/gl.h
    - test -f $PREFIX/lib/libGL.so.1


about:
  home: https://gitlab.freedesktop.org/glvnd/libglvnd
  license: LicenseRef-TODO-Sort-Out-Correct-License
  license_file: README.md
  summary: The GL Vendor-Neutral Dispatch library

extra:
  recipe-maintainers:
    - traversaro
