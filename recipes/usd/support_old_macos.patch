From b926805925649e70a9fbb00c1c46b14cf2297b07 Mon Sep 17 00:00:00 2001
From: Silvio Traversaro <silvio@traversaro.it>
Date: Thu, 28 Oct 2021 18:03:15 +0200
Subject: [PATCH] Support macOS SDK in which MAP_ANONYMOUS is not defined

See https://gitlab.gnome.org/GNOME/gtk-vnc/-/issues/4
---
 pxr/base/arch/virtualMemory.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pxr/base/arch/virtualMemory.cpp b/pxr/base/arch/virtualMemory.cpp
index a04ae68b8a..f5ac332678 100644
--- a/pxr/base/arch/virtualMemory.cpp
+++ b/pxr/base/arch/virtualMemory.cpp
@@ -67,7 +67,7 @@ void *
 ArchReserveVirtualMemory(size_t numBytes)
 {
     void *addr = mmap(NULL, numBytes, PROT_NONE,
-                      MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
+                      MAP_PRIVATE | MAP_ANON, -1, 0);
     if (!addr || addr == MAP_FAILED)
         return nullptr;
     return addr;
