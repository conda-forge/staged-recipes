{% set name = "tkimg" %}
{% set version = "1.4.13" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://sourceforge.net/projects/{{ name }}/files/{{ name }}/1.4/{{ name }}%20{{ version }}/Img-{{ version }}-Source.tar.gz
    sha1: b35ddb2aad1b9f513f3a4f1eeaf3b7e1b681fc80

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
    - {{ cdt('libx11-devel') }}          # [linux]
    - {{ cdt('libxcb') }}                # [linux]
    - {{ cdt('libxau') }}                # [linux]
    - make                               # [linux]              
  host:
    - tk
    - tcllib
  run:
    - tk


test:
  commands:
    - echo "if {[catch {package require -exact Img {{ version }}; exit 0}]} {exit 1}" | xvfb-run tclsh  # [linux]
    - echo "if {[catch {package require -exact Img {{ version }}; exit 0}]} {exit 1}" | tclsh  # [osx]
    - echo if {[catch {package require -exact Img {{ version }}; exit 0}]} {exit 1} | tclsh --  # [win]

about:
  home: https://tkimg.sourceforge.net/
  license: BSD-3-Clause
  license_family: BSD
  license_file: ImgSource/license.terms
  summary: 'Img is a Tk extension that provides the handling of several image formats beyond the standard formats in Tk'
  doc_url: https://wiki.tcl-lang.org/page/Img

extra:
  recipe-maintainers:
    - nandandevinagara
    - abloemert
