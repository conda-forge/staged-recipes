{% set name = "healpix-autotools" %}
{% set version = "3.31.3" %}
{% set sha256 = "24709b31c65a33ce84ff7992574e9e76f78f41285de12c156f46a2f598701cb4" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-autotools-{{ version }}.tar.gz
  url: https://github.com/tskisner/{{ name }}/releases/download/v{{ version }}/{{ name|lower }}-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - toolchain
    - cfitsio
    - python
    - setuptools
    - numpy x.x
    - astropy
    - matplotlib
    - six
    - pytest
    - pyparsing
    - cycler
    - pytz
    - python-dateutil
    - functools32 # [py27]
    - subprocess32 # [py27]
  run:
    - cfitsio
    - python
    - numpy x.x
    - astropy
    - matplotlib
    - six
    - pytest
    - pyparsing
    - cycler
    - pytz
    - python-dateutil
    - functools32 # [py27]
    - subprocess32 # [py27]

test:
  command:
    - test -f $PREFIX/lib/libhealpix_cxx.dylib  # [osx]
    - test -f $PREFIX/lib/libhealpix_cxx.so     # [linux]
    - test -f $PREFIX/lib/libchealpix.dylib  # [osx]
    - test -f $PREFIX/lib/libchealpix.so     # [linux]

about:
  home: http://healpix.jpl.nasa.gov/
  license: GPL-2.0
  license_family: GPL
  license_file: LICENSE
  summary: HEALPix with an improved build system
  description: |
    This distribution of HEALPix takes the upstream source releases
    and adds a new cohesive build system using autotools.  The healpy
    package is build to explicitly link against the included C++
    library.  Since healpy has a different release cycle than other
    parts of the code, this packaging updates healpy from upstream
    sources independently of the other language versions.
  doc_url: http://healpix.sourceforge.net/documentation.php
  dev_url: https://github.com/tskisner/healpix-autotools

extra:
  recipe-maintainers:
    - tskisner
