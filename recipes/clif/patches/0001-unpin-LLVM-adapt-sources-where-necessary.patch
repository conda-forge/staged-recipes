From abdf1609ece81b9650cd40b289121a5ceed67c0a Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Sun, 18 Dec 2022 22:41:08 +1100
Subject: [PATCH] unpin LLVM; adapt sources where necessary

---
 clif/backend/ast.cc                | 5 +++--
 clif/cmake/modules/CLIFUtils.cmake | 3 +--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/clif/backend/ast.cc b/clif/backend/ast.cc
index 5e46820..6d62107 100644
--- a/clif/backend/ast.cc
+++ b/clif/backend/ast.cc
@@ -418,8 +418,9 @@ bool TranslationUnitAST::ConstructorIsAccessible(
   auto entity = clang::InitializedEntity::InitializeResult(
       SourceLocation(),
       ast_->getASTContext().getQualifiedType(
-          ctor->getParent()->getTypeForDecl(), clang::Qualifiers()),
-      false);  // NRVO is irrelevant.
+          ctor->getParent()->getTypeForDecl(), clang::Qualifiers()
+      )
+  );
   Sema& sema = ast_->getSema();
   auto access = sema.CheckConstructorAccess(
       SourceLocation(), ctor,
diff --git a/clif/cmake/modules/CLIFUtils.cmake b/clif/cmake/modules/CLIFUtils.cmake
index aa95d37..21d03e5 100644
--- a/clif/cmake/modules/CLIFUtils.cmake
+++ b/clif/cmake/modules/CLIFUtils.cmake
@@ -33,8 +33,7 @@ pkg_check_modules(GOOGLE_PROTOBUF REQUIRED protobuf)
 pkg_check_modules(GOOGLE_GLOG REQUIRED libglog)
 
 find_package(absl REQUIRED)
-find_package(Clang REQUIRED)
-find_package(LLVM 11.1.0 REQUIRED)
+find_package(LLVM REQUIRED)
 find_package(GTest REQUIRED)
 
 function(add_protobuf_include_directories)
-- 
2.38.1.windows.1

