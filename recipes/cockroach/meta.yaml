{% set name = "cockroach" %}
{% set version = "1.1.5" %}
{% set sha256 = "4da8746971329840531bc9512e9a5ad44a5587d7ee2ad8d2f321124180795444" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-v{{ version }}.src.tar.gz
  url: https://binaries.cockroachdb.com/{{ name }}-v{{ version }}.src.tgz
  sha256: {{ sha256 }}

build:
  number: 0
  script:
    - prefix=$PREFIX make -e buildoss
    - prefix=$PREFIX make -e install

requirements:
  build:
    - toolchain
    - cmake 3.8.*
    - go 1.8.*
    - jemalloc 4.5.*
    - xz 5.2.*
  run:
    - jemalloc 4.5.*

test:
  commands:
    - true

about:
  home: http://cockroachlabs.com
  license: APL2
  license_file: LICENSE.txt
  summary: 'CockroachDB is a cloud-native SQL database for building global, scalable cloud services that survive disasters.'

  description: |
    CockroachDB is a distributed SQL database built on a transactional and
    strongly-consistent key-value store. It scales horizontally; survives disk,
    machine, rack, and even datacenter failures with minimal latency disruption and
    no manual intervention; supports strongly-consistent ACID transactions; and
    provides a familiar SQL API for structuring, manipulating, and querying data.
  doc_url: https://www.cockroachlabs.com/docs
  dev_url: https://github.com/cockroachdb/cockroach

extra:
  recipe-maintainers:
    - sodre
