#!/bin/sh
for file in \
	bin/grass \
	opt/grass/etc/python/grass/app/resource_paths.py \
	opt/grass/etc/fontcap \
	opt/grass/demolocation/.grassrc85 \
	; do
	if [ -f "$PREFIX/$file" ]; then
		sed -Ei \
			-e "s#@compile_prefix@#$PREFIX#g" \
			-e "s#lib64/grass85#opt/grass#g" \
			$PREFIX/$file
	fi
done

# Handle Python lib files with wildcard expansion
if [ -d "$PREFIX/opt/grass/etc/python/grass/lib" ]; then
	for pyfile in "$PREFIX/opt/grass/etc/python/grass/lib"/*.py; do
		if [ -f "$pyfile" ]; then
			sed -Ei \
				-e "s#@compile_prefix@#$PREFIX#g" \
				-e "s#lib64/grass85#opt/grass#g" \
				"$pyfile"
		fi
	done
fi

# Handle HTML files with wildcard expansion
if [ -d "$PREFIX/opt/grass/docs/html" ]; then
	for htmlfile in "$PREFIX/opt/grass/docs/html"/*.html; do
		if [ -f "$htmlfile" ]; then
			sed -Ei \
				-e "s#@compile_prefix@#$PREFIX#g" \
				-e "s#lib64/grass85#opt/grass#g" \
				"$htmlfile"
		fi
	done
fi
