{% set version = "7.4.2" %}

package:
  name: grass
  version: {{ version }}

source:
  url: https://grass.osgeo.org/grass74/source/grass-{{ version }}.tar.gz
  sha256: 18eb19bc0aa4cd7be3f30f79ac83f9d0a29c63657f4c1b05bf4c5d5d57a8f46d
  patches:
    - platform.make.in.patch  # [osx]
    - platform.make.in-linux.patch  # [linux]
    - loader.py.patch
    - rules.make.patch  # [osx]
    - rules.make-linux.patch  # [linux]
    - aclocal.m4.patch
    - configure.patch
    - install.make.patch
    - module.make.patch  # [osx]
    - shlib.make.patch  # [osx]

build:
  number: 0
  skip: True  # [not osx]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - pkg-config
    - m4  # [linux]
    - bison  # [linux]
    - flex  # [linux]
  host:
    - python <3
    - numpy
    - gdal 2.0.*
    - freetype
    - cairo
    - pandoc
    - wxpython
    - sqlite
    - jpeg
    - libpng
    - libtiff
    - libiconv
    - fftw
    - blas
    - giflib
    - python.app  # [osx]
    - proj4
    - geos
    - krb5
    - pillow
  run:
    - python <3
    - numpy
    - gdal 2.0.*
    - freetype
    - cairo
    - matplotlib
    - pandoc
    - wxpython
    - sqlite
    - jpeg
    - libpng
    - libtiff
    - libiconv
    - fftw
    - blas
    - giflib
    - python.app  # [osx]
    - proj4
    - geos
    - krb5
    - pillow

test:
  commands:
  - grass74 --help
  - grass74 --version
  - grass74 --config

about:
  home: https://grasswiki.osgeo.org/
  license: GPL-2.0
  license_family: GPL
  license_file: lib/init/license.txt
  summary: Geographic Resources Analysis Support System
  description: |
    GRASS GIS, commonly referred to as GRASS (Geographic Resources
    Analysis Support System), is a free and open source Geographic
    Information System (GIS) software suite used for geospatial data
    management and analysis, image processing, graphics and maps
    production, spatial modeling, and visualization.
  dev_url: https://grass.osgeo.org/development/
  doc_url: https://grasswiki.osgeo.org/

extra:
  recipe-maintainers:
    - mcflugen
