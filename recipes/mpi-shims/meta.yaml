{% set build = 0 %}

package:
  name: mpi-shims

build:
  skip: True  # [win]
  number: {{ build }}

outputs:
  - name: mpich
    version: "{{ mpich_version }}"
    string: "external_{{ build }}"
    track_features:
      - mpich_external
    requirements:
      run:
        - mpi 1.0 mpich
    test:
      commands:
        - echo "It works!"

  - name: openmpi
    version: "{{ openmpi_version }}"
    string: "external_{{ build }}"
    track_features:
      - openmpi_external
    requirements:
      run:
        - mpi 1.0 openmpi
    test:
      commands:
        - echo "It works!"

about:
  home: https://github.com/conda-forge/mpi-shims-feedstock
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: "MPI shim packages for using external MPI libraries with conda."
  description: |
    This package is meant to be used when you'd like to use conda-forge
    with external builds of MPI. Instead of installing MPI binaries from
    conda-forge, you instead install this empty build (e.g., for mpich,
    `conda install mpich=*=external_*`). This shim allows the conda solver
    to compute the environment properly without installing its own shared
    libraries in the environment. At run-time the packages in the environment
    should link properly to the external MPI libraries assuming they are in
    spot that is visible to the linker. You need to make sure you match the
    distribution/version of the shim installed with your local MPI
    distribution/version to maximally ensure binary compatibility.

extra:
  recipe-maintainers:
    - beckermr
