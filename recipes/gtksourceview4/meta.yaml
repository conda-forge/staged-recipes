# Prior to conda-forge, Copyright 2014-2019 Peter Williams and collaborators.
# This file is licensed under a 3-clause BSD license; see LICENSE.txt.

{% set name = "gtksourceview" %}
{% set version = "4.6.0" %}
{% set version_majmin = '.'.join(version.split('.', 2)[:2]) %}

package:
  name: gtksourceview4  # note customization
  version: {{ version }}

source:
  url: http://ftp.gnome.org/pub/gnome/sources/{{ name }}/{{ version_majmin }}/{{ name }}-{{ version }}.tar.xz
  url: https://download.gnome.org/sources/{{ name }}/{{ version_majmin }}/{{ name }}-{{ version }}.tar.xz
  sha256: 4c13e30ab2e602abdc56f55d35f43c1142a79b1cd77aa8839d2fc85e966d9a85
  # patches:
  #   - m_pi.patch
  #   - no-module-warning.patch

build:
  number: 0
  skip: True  # [win and vc<14]
  # workaround for bug in LIEF (https://github.com/lief-project/LIEF/issues/239)
  # that resulted in missing symbols
  # rpaths_patcher: patchelf  # [linux]
  # run_exports:
  #   - {{ pin_subpackage('gtk3', max_pin='x') }}
  #   # gtk apps need at least a default icon set for fallback
  #   - adwaita-icon-theme
  # missing_dso_whitelist:
  #   - '*/libX11.so*'  # [linux]
  #   - '*/libXext.so*'  # [linux]
  #   - '/usr/lib/libcups.2.dylib'  # [osx]

requirements:
  build:
    - meson  # [not win]
    # see https://github.com/conda-forge/meson-feedstock/issues/30
    - meson 0.53.2  # [win]
    - ninja
    - gtk3
    - gobject-introspection
    - libxml2
  # host:
  #   - gtk3
  # run:
  #   - gtk3
  #   - gobject-introspection
  #   - libxml2
# test:
#   requires:
#     - pkg-config
  # commands:


about:
  home: https://wiki.gnome.org/Projects/GtkSourceView/
  license: LGPL-2.1-or-later
  license_family: LGPL
  license_file: COPYING
  summary: 'Version 4 of GtkSourceView'
  description: |
    GtkSourceView is a GNOME library that extends GtkTextView, the standard
    GTK+ widget for multiline text editing. GtkSourceView adds support for
    syntax highlighting, undo/redo, file loading and saving, search and
    replace, a completion system, printing, displaying line numbers, and other
    features typical of a source code editor.
  doc_url: https://developer.gnome.org/gtksourceview
  dev_url: https://gitlab.gnome.org/GNOME/gtksourceview

extra:
  recipe-maintainers:
    - kayarre