# inspired by https://github.com/scheib/chromium-latest-linux/blob/master/update.sh
# and https://github.com/conda-forge/staged-recipes/pull/5256

{% set name = "chromium" %}
{% set version = "70.0.3538.110" %}
# use https://omahaproxy.appspot.com/ to go from version to branch_position
{% set branch_position = "587811" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Linux_x64%2F{{ branch_position }}%2Fchrome-linux.zip?alt=media  # [linux64]
  sha256: d58439c548433adcda98e695be53e526ba940a4b9c44fb9a05d92cd495cdd47f  # [linux64]
  url: https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Mac%2F{{ branch_position }}%2Fchrome-mac.zip?alt=media  # [osx]
  sha256: 8280fd49facefcb264ccea6248fdaade056c12cc8d78830b82d64c9edddb6e93  # [osx]

build:
  number: 0
  skip: True  # [win]

requirements:
  run:
    - nss
    - alsa-lib

test:
  commands:
    - chrome --version --headless

about:
  home: https://www.chromium.org/
  license: BSD-Google
  license_family: BSD
  summary: 'An open-source browser'
  description: |
    Chromium is an open-source browser project that aims to build a safer, faster, and more stable way for all users to experience the web. 
  dev_url: https://www.chromium.org/

extra:
  recipe-maintainers:
    - maartenbreddels
