# inspired by https://github.com/scheib/chromium-latest-linux/blob/master/update.sh
# and https://github.com/conda-forge/staged-recipes/pull/5256

{% set name = "chromium" %}
{% set version = "70.0.3538.110" %}
# use https://omahaproxy.appspot.com/ to go from version to branch_position
{% set branch_position = "587811" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: chromium.zip
  url: https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Linux_x64%2F{{ branch_position }}%2Fchrome-linux.zip?alt=media  # [linux64]
  sha256: a83baae72d70d4c337c7af6fb190ec3fbb082b94af1e16c5f28390dfd7771612  # [linux64]
  url: https://www.googleapis.com/download/storage/v1/b/chromium-browser-snapshots/o/Mac%2F{{ branch_position }}%2Fchrome-mac.zip?alt=media  # [osx]
  sha256: 61537436de702bfd174695e21afc7c36783b73fdab8823efa945432bd5e49bac  # [osx]

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - unzip
  run:
    - nss  # [linux]
    - alsa-lib  # [linux]

test:
  commands:
    - chrome --version --headless

about:
  home: https://www.chromium.org/
  # license name according to Google: https://www.chromium.org/chromium-os/licensing/licensing-for-chromiumos-package-owners
  license: BSD-Google
  license_family: BSD
  summary: 'An open-source browser'
  description: |
    Chromium is an open-source browser project that aims to build a safer, faster, and more stable way for all users to experience the web. 
  dev_url: https://www.chromium.org/

extra:
  recipe-maintainers:
    - maartenbreddels
