{% set version = "13.0.1" %}
{% set major_version = version.split(".")[0] %}

package:
  name: mlir-tblgen
  version: {{ version }}

source:
  - url: https://github.com/llvm/llvm-project/releases/download/llvmorg-{{ version.replace(".rc", "-rc") }}/llvm-project-{{ version.replace(".rc", "rc") }}.src.tar.xz
    sha256: 326335a830f2e32d06d0a36393b5455d17dc73e0bd1211065227ee014f92cbf8

build:
  number: 0
  # These dependencies are needed for cmake to pass but aren't linked in the final binaries.
  ignore_run_exports_from.:
    - zlib

requirements:
  build:
    - cmake
    - ninja
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
    - llvmdev {{ version }}
    - zlib

test:
  commands:
    - mlir-tblgen --help

about:
  home: http://llvm.org/
  license: Apache-2.0 WITH LLVM-exception
  license_file: mlir/LICENSE.TXT
  license_family: Apache
  summary: Multi-Level IR Compiler Framework (tblgen binary)

extra:
  recipe-maintainers:
    - conda-forge/mlir
