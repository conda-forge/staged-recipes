{% set name = "horovod" %}
{% set version = "0.22.0" %}


package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: ed7526eeb5a9aca8a8a49a04a41a4648cb7b0a265857875fc5d6a04a739fdb37

build:
  number: 0
  skip: true   # [py2k]
  entry_points:
    - horovodrun = horovod.runner.launch:run_commandline
  script: {{ PYTHON }} -m pip install . -vv

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
  host:
    - cffi >=1.4.0
    - cloudpickle
    - dataclasses  # [py<37]
    - pip
    - psutil
    - python
    - pyyaml
  run:
    - cffi >=1.4.0
    - cloudpickle
    - dataclasses  # [py<37]
    - psutil
    - python
    - pyyaml

test:
  imports:
    - horovod
    - horovod._keras
  commands:
    - pip check
    - horovodrun --help
  requires:
    - pip

about:
  home: https://github.com/horovod/horovod
  summary: Distributed training framework for TensorFlow, Keras, PyTorch, and Apache MXNet.
  license: Apache-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - sarthakpati
