context:
  version: 2.1.0

package:
  name: adaptive-particles-libapr
  version: ${{ version }}

source:
  url: https://github.com/AdaptiveParticles/LibAPR/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 795675ba8a9ca2120bb76802c476eb0f9ded769b8865e6d2c77b71fc86b71cb8

build:
  number: 0

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - ${{ compiler('cxx') }}
    - cmake
    - ninja
    - if: osx
      then: llvm-openmp
    - if: linux
      then: libgomp
    - gtest
  host:
    - glm
    - hdf5
    - zlib
    - eigen
    - blosc
    - libtiff

tests:
  - script:
      - if: unix
        then: test -f ${CONDA_PREFIX}/lib/libAPR${SHLIB_EXT}
        else:
          - if not exist %CONDA_PREFIX%\Library\bin\libAPR.dll
          - if not exist %CONDA_PREFIX%\Library\lib\libAPR.lib

about:
  license: Apache-2.0
  license_file: LICENSE
  summary: Library for producing and processing on the Adaptive Particle Representation (APR).
  homepage: https://github.com/AdaptiveParticles/libapr

extra:
  recipe-maintainers:
    - cheesema
    - goanpeca
    - jaimergp
