{% set version = '1.2.1' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-pqlseq
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/PQLseq_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/PQLseq/PQLseq_{{ version }}.tar.gz
  sha256: c03c43144309913ebbceb47609456538df6e571040149edd7f31d8b3f7b7de53

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ stdlib('c') }}                # [not win]
    - {{ stdlib('m2w64_c') }}          # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
    - r-matrix                     # [build_platform != target_platform]
    - r-rcpp >=0.12.14             # [build_platform != target_platform]
    - r-rcpparmadillo              # [build_platform != target_platform]
    - r-doparallel                 # [build_platform != target_platform]
    - r-foreach                    # [build_platform != target_platform]
  host:
    - libblas
    - liblapack
    - libgomp                      # [not osx]
    - llvm-openmp                  # [osx]
    - r-base
    - r-matrix
    - r-rcpp >=0.12.14
    - r-rcpparmadillo
    - r-doparallel
    - r-foreach
  run:
    - libgomp                      # [win]
    - r-base
    - r-matrix
    - r-rcpp >=0.12.14
    - r-rcpparmadillo
    - r-doparallel
    - r-foreach

test:
  commands:
    - $R -e "library('PQLseq')"           # [not win]
    - "\"%R%\" -e \"library('PQLseq')\""  # [win]

about:
  home: https://CRAN.R-project.org/package=PQLseq
  license: GPL-2.0-only
  summary: An efficient tool designed for differential analysis of large-scale RNA sequencing
    (RNAseq) data and Bisulfite sequencing (BSseq) data in the presence of individual
    relatedness and population structure. 'PQLseq' first fits a Generalized Linear Mixed
    Model (GLMM) with adjusted covariates, predictor of interest and random effects
    to account for population structure and individual relatedness, and then performs
    Wald tests for each gene in RNAseq or site in BSseq.
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'

extra:
  recipe-maintainers:
    - conda-forge/r

# Package: PQLseq
# Type: Package
# Title: Efficient Mixed Model Analysis of Count Data in Large-Scale Genomic Sequencing Studies
# Version: 1.2.1
# Date: 2021-06-06
# Author: Shiquan Sun, Jiaqiang Zhu, Xiang Zhou
# Maintainer: Jiaqiang Zhu <jiaqiang@umich.edu>
# Description: An efficient tool designed for differential analysis of large-scale RNA sequencing (RNAseq) data and Bisulfite sequencing (BSseq) data in the presence of individual relatedness and population structure. 'PQLseq' first fits a Generalized Linear Mixed Model (GLMM) with adjusted covariates, predictor of interest and random effects to account for population structure and individual relatedness, and then performs Wald tests for each gene in RNAseq or site in BSseq.
# License: GPL (>= 2)
# Imports: Rcpp (>= 0.12.14),foreach,doParallel,parallel,Matrix,methods
# LinkingTo: Rcpp,RcppArmadillo
# NeedsCompilation: yes
# Packaged: 2021-06-06 13:10:04 UTC; jiaqiang
# Depends: R (>= 2.10)
# Repository: CRAN
# Date/Publication: 2021-06-06 13:30:02 UTC
