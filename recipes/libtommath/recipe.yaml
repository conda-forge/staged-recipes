context:
  version: "1.3.0"

package:
  name: libtommath
  version: ${{ version }}

source:
  url: https://github.com/libtom/libtommath/archive/v${{ version }}.tar.gz
  sha256: 6d099e93ff00fa9b18346f4bcd97dcc48c3e91286f7e16c4ac5515a7171c3149

build:
  number: 0
  script:
    - mkdir build
    - cd build
    - if: unix
      then:
        - cmake -G Ninja -DCMAKE_INSTALL_PREFIX=$PREFIX -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON ..
    - if: win
      then:
        - cmake -G Ninja -DCMAKE_INSTALL_PREFIX=%LIBRARY_PREFIX% -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON ..
    - ninja
    - ninja install

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - cmake
    - ninja

tests:
  - package_contents:
      strict: true
      lib:
        - tommath
      include:
        - tommath.h
      files:
        - lib/cmake/libtommath/libtommath-*.cmake
        - lib/pkgconfig/libtommath.pc

about:
  homepage: https://www.libtom.net/LibTomMath/
  repository: https://github.com/libtom/libtommath
  documentation: https://github.com/libtom/libtommath/releases/download/v1.3.0/bn-1.3.0.pdf
  license: Unlicense
  license_file: LICENSE
  summary: A free open source portable number theoretic multiple-precision integer library
  description: |
    LibTomMath is a free open source portable number theoretic multiple-precision
    integer library written entirely in C. It's designed to provide a simple to work
    with API that provides fairly efficient routines that build out of the box without
    configuration. The library builds with GCC 2.95 and up as well as Visual C++ v6.00
    and supports both static and dynamic linking.

extra:
  recipe-maintainers:
    - zelosleone
