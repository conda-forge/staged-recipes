{% set version = "3.4.0" %}

package:
  name: yac
  version: {{ version }}

source:
  url: https://gitlab.dkrz.de/dkrz-sw/yac/-/archive/v{{ version }}/yac-v{{ version }}.tar.gz
  sha256: 03d753bae4bc2a082ca6347d06d1851b47d805374eced8de56ee224adbafec95

build:
  script: build.sh  # [unix]
  skip: true  # [win]
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ compiler('fortan') }}
    - {{ stdlib('c') }}
  host:
    - python
    - pip
    - setuptools
  run:
    - python

test:
  # Some packages might need a `test/commands` key to check CLI.
  # List all the packages/modules that `run_test.py` imports.
  imports:
    - simplejson
    - simplejson.tests
  # For python packages, it is useful to run pip check. However, sometimes the
  # metadata used by pip is out of date. Thus this section is optional if it is
  # failing.
  requires:
    - pip
  commands:
    - pip check

about:
  home: https://gitlab.dkrz.de/dkrz-sw/yac
  summary: YetAnotherCoupler (YAC) library for coupling of Earth system model components.
  description: |
    YetAnotherCoupler (YAC) is a lightweight software library for coupling of Earth system model components which
    provides parallelized two-dimensional neighbourhood search, interpolation, and communication for the coupling
    between any two model components. The software offers flexible coupling of physical fields defined on regular and
    irregular grids on the sphere without a priori assumptions about grid structure or grid element types. All
    supported grids can be combined with any of the supported interpolations.
  license: BSD-3-Clause
  license_family: BSD
  # It is required to include a license file in the package,
  # (even if the license doesn't require it) using the license_file entry.
  # Please also note that some projects have multiple license files which all need to be added using a valid yaml list.
  # See https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#license-file
  license_file: LICENSES/BSD-3-Clause.txt
  doc_url: https://dkrz-sw.gitlab-pages.dkrz.de/yac/index.html
  dev_url: https://gitlab.dkrz.de/dkrz-sw/yac

extra:
  recipe-maintainers:
    - jhkennedy
    - ckhroulev
    - aaschwanden
