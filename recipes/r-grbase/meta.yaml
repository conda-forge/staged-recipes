{% set version = '1.8-3' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-grbase
  version: {{ version|replace("-", "_") }}

source:
  fn: gRbase_{{ version }}.tar.gz
  url:
    - https://cran.r-project.org/src/contrib/gRbase_{{ version }}.tar.gz
    - https://cran.r-project.org/src/contrib/Archive/gRbase/gRbase_{{ version }}.tar.gz

  sha256: ed4448316bf0bba1fa343ce536b54c5d0f64ff4444113270e3fa7a5e8bde7890

build:
  number: 0
  skip: true  # [win32]

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - r-base
    - r-matrix
    - r-rbgl
    - r-rcpp >=0.11.1
    - r-rcpparmadillo
    - r-rcppeigen
    - r-graph
    - r-igraph
    - r-magrittr
    - posix                # [win]
    - {{native}}toolchain  # [win]
    - gcc                  # [not win]

  run:
    - r-base
    - r-matrix
    - r-rbgl
    - r-rcpp >=0.11.1
    - r-rcpparmadillo
    - r-rcppeigen
    - r-graph
    - r-igraph
    - r-magrittr{indent}libgcc  # [not win]

test:
  commands:
    - $R -e "library('gRbase')"  # [not win]
    - "\"%R%\" -e \"library('gRbase')\""  # [win]

about:
  home: http://people.math.aau.dk/~sorenh/software/gR/
  license: GPL (>= 2)
  summary: 'The ''gRbase'' package provides general features which are used by other graphical
    modelling packages, in particular by the packages ''gRain'', ''gRim'' and ''gRc''.
    ''gRbase'' contains several data sets relevant for use in connection with graphical
    models. Almost all data sets used in the book Graphical Models with R (2012) are
    contained in ''gRbase''. ''gRbase'' implements several graph algorithms (based mainly
    on representing graphs as adjacency matrices - either in the form of a standard
    matrix or a sparse matrix). Some graph algorithms are: (i) maximum cardinality search
    (for marked and unmarked graphs). (ii) moralize. (iii) triangulate. (iv) junction
    tree. ''gRbase'' facilitates array operations, ''gRbase'' implements functions for
    testing for conditional independence. ''gRbase'' illustrates how hierarchical log-linear
    models may be implemented and describes concept of graphical meta data. These features,
    however, are not maintained anymore and remains in ''gRbase'' only because there
    exists a paper describing these facilities: A Common Platform for Graphical Models
    in R: The ''gRbase'' Package, Journal of Statistical Software, Vol 14, No 17, 2005.
    NOTICE Proper functionality of ''gRbase'' requires that the packages graph, ''Rgraphviz''
    and ''RBGL'' are installed from ''bioconductor''; for installation instructions
    please refer to the web page given below.'

  license_family: GPL3
  license_file: '{{ environ["PREFIX"] }}\/lib\/R\/share\/licenses\/GPL-3'  # [unix]
  license_file: '{{ environ["PREFIX"] }}\R\share\licenses\GPL-3'  # [win]

extra:
  recipe-maintainers:
    - MathiasHaudgaard
    - FrodePedersen
    - ArneKr
    - johanneskoester
    - bgruening
    - daler
    - jdblischak