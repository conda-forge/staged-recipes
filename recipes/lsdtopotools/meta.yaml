{% set name = "lsdtopotools" %}
{% set version = "0.02" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/LSDtopotools/LSDTopoTools2/archive/v{{ version }}.tar.gz
  sha256: 54b54a2023768bd6a6d64c45cbe921313d6adddc0e4cf206b9bd63a9c56ad96a
  patches:
    - fix-address-of-temp-var.patch

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake
  host:
    - python
    - fftw
  run:
    - python
    - fftw
    - gdal

tests:
  commands:
    - lsdtt-basic-metrics || echo "No input files to process"
    - lsdtt-channel-extraction || echo "No input files to process"
    - lsdtt-chi-mapping || echo "No input files to process"

about:
  home: https://github.com/LSDtopotools/LSDTopoTools2
  license: GPL-3.0-only
  license_family: GPL
  license_file: LICENSE
  summary: "LSDTopoTools is a software package for analysing topography"
  description: |
    LSDTopoTools is a software package for analysing topography. Applications
    of these analyses span hydrology, geomorphology, soil science, ecology,
    and cognate fields. The software began within the Land Surface Dynamics
    group at the University of Edinburgh, and now has developers and users
    around the world.
  doc_url: https://lsdtopotools.github.io/LSDTT_documentation/
  dev_url: https://github.com/LSDtopotools/LSDTopoTools2

extra:
  recipe-maintainers:
    - mcflugen
