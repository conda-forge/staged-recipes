{% set version = "0.6.0" %}

package:
    name: qtmolecularnetwork
    version: {{ version }}

source:
    url: https://github.com/metgem/QtMolecularNetwork/archive/v{{ version }}.tar.gz
    sha256: 0592679cab27e1d264f559ce58f8c4cd74d9d8ce1d1c6860293bae5f550ac1ee

build:
    number: 0

outputs:
  - name: qtmolecularnetwork
    version: {{ version }}
    script: install_qtmolecularnetwork.bat  # [win]
    script: install_qtmolecularnetwork.sh   # [unix]
    requirements:
      build:
        - python {{ python }}
        - cmake>=3.13
        - {{ compiler('cxx') }}
        - clangdev
        - make                               # [not win]
        - ninja                              # [win]
        - gxx                                # [linux]
        - rdkit-dev
        - eigen
        - mesalib  # [unix]
      host:
        - qt
        - libclang
      run:
        - rdkit
    test:
      commands:
        - if not exist %LIBRARY_BIN%\\qtmolecularnetwork.dll exit 1  # [win]
        - test -f $PREFIX/lib/libqtmolecularnetwork${SHLIB_EXT}      # [unix]

  - name: pyside2mn
    build:
      script: python -m pip install . -vv
    version: {{ version }}
    requirements:
      build:
        - {{ compiler('c') }}
        - {{ compiler('cxx') }}
        - clangdev
        - cmake
      host:
        - qtmolecularnetwork
        - python {{ python }}
        - rdkit-dev
        - pyside2
        - eigen
        - mesalib  # [unix]
        - libclang
        - pip
      run:
        - {{ pin_compatible('python') }}
        - qtmolecularnetwork
        - pywin32  # [win]
        - pyside2
        - rdkit
        - tinycss2
    test:
      imports:
        - PySide2MolecularNetwork
        - PySide2MolecularNetwork.qmn

about:
    home: https://github.com/metgem/QtMolecularNetwork
    license: GPL-3.0
    license_family: GPL
    license_file: 'LICENSE'
    summary: 'Widgets used for visualisation of graph in MetGem'
    description: 'Widgets used for visualisation of graph in `MetGem`'
    doc_url: ''
    dev_url: 'https://github.com/metgem/QtMolecularNetwork'

extra:
    recipe-maintainers:
      - n-elie
