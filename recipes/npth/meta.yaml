{% set name = "npth" %}
{% set version = "1.5" %}
{% set sha256 = "294a690c1f537b92ed829d867bee537e46be93fbd60b16c04630fbbfcd9db3c2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://www.gnupg.org/ftp/gcrypt/{{ name }}/{{ name }}-{{ version }}.tar.bz2
  sha256: {{ sha256 }}

build:
  number: 0
  script:
    - ./configure --prefix=$PREFIX
    - make
    - make install
  skip: true  # [win]
  run_exports:
    - {{ pin_subpackage('npth') }}

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
    - libgpg-error

test:
  commands:
    - conda inspect linkages {{ name }}  # [unix]
    - conda inspect objects {{ name }}   # [osx]

about:
  home: https://www.gnupg.org/software/ntbtls/index.html
  summary: The New GNU Portable Threads Library
  license: LGPL-2
  license_family: GPL
  license_file: COPYING.LIB
  description: |
    nPth is a library to provide the GNU Pth API and thus a non-preemptive
    threads implementation.

    In contrast to GNU Pth is is based on the system's standard threads implementation.
    This allows the use of libraries which are not compatible to GNU Pth. Experience
    with a Windows Pth emulation showed that this is a solid way to provide a co-routine
    based framework.
extra:
  recipe-maintainers:
    - mariusvniekerk
