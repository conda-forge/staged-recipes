{% set version = "2106" %}

package:
  name: openfoam
  version: {{ version }}

source:
  - folder: src
    url: https://dl.openfoam.com/source/v{{ version }}/OpenFOAM-v{{ version }}.tgz
    sha256: 11e41e5b9a253ef592a8f6b79f6aded623b28308192d02cec1327078523b5a37
    ur: https://dl.openfoam.com/source/v{{ version }}/ThirdParty-v{{ version }}.tgz
    sha256: 167f44c6746d996de884a932b120d816aa894678ca3d31c18ac488b7c1ff529d

build:
  number: 0
  skip: true  # [not linux]
  # The binary is made runtime relocatable using the included patch
  detect_binary_files_with_prefix: false

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ compiler('gxx') }}
    - libz-dev
    - sysroot_linux-64 2.17  # [linux64]
    - make
    - cmake
    - pkg-config
    - lam4-dev
    - sed
  host:
    - libuuid  # [linux]

  run:
    # CNI version from singularity/Gopkg.lock

test:
  commands:
    - foam 
    
about:
  home: https://develop.openfoam.com/Development/ThirdParty-common/blob/develop/BUILD.md
  license: BSD-3-Clause
  summary: 'Open FOAM'

  description: |
    OpenFOAMS 

  dev_url: https://develop.openfoam.com/Development/ThirdParty-common/blob/develop/BUILD.md
  doc_url: https://develop.openfoam.com/Development/ThirdParty-common/blob/develop/BUILD.md

extra:
  recipe-maintainers:
    - ngam
