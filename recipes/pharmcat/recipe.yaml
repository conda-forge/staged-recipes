context:
  name: pharmcat
  version: "3.1.1"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/PharmGKB/PharmCAT/releases/download/v${{ version }}/pharmcat-pipeline-${{ version }}.tar.gz
  sha256: a43d3c026f3a864181f42c078cbaa214f114db01997f1952ea4cfe47f28c5fcd

build:
  # Use platform-specific build scripts (build.sh present)
  # If Windows support is later added upstream, remove the skip.
  skip:
    - win
  number: 0
  # Explicit script call for rattler-build/conda-build to use build.sh
  script: bash build.sh

requirements:
  host:
    - python
  run:
    - openjdk >=17
    - python >=3.10
    - pandas
    - colorama
    - packaging
    - bcftools >=1.18
    - htslib >=1.18

# Prefer tests in the new `tests` section
# CLI checks ensure wrappers are on PATH and Java/bcftools resolve
tests:
  - commands:
      - pharmcat -version
      - pharmcat_pipeline -V
      - pharmcat_vcf_preprocessor -V

about:
  homepage: https://github.com/PharmGKB/PharmCAT
  summary: Pharmacogenomics Clinical Annotation Tool (PharmCAT) CLI, pipeline, and preprocessor.
  license: MPL-2.0
  # If the tarball lacks a LICENSE, remove or point to the correct file path.
  license_file: LICENSE

extra:
  recipe-maintainers:
    - rkmishra3893
