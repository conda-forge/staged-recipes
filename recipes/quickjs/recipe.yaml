context:
  version: "2025.09.13"
  commit: f1139494d18a2053630c5ed3384a42bb70db3c53

package:
  name: quickjs
  version: ${{ version }}

source:
  url: https://github.com/bellard/quickjs/archive/${{ commit }}.tar.gz
  sha256: 0364fd5136857117c8204c2f0c203b71b25b9f025dc1a0605ea51f0fd7f92511

build:
  number: 0
  skip:
    - win
  script:
    - make -j${CPU_COUNT} PREFIX="${PREFIX}"
    - make install PREFIX="${PREFIX}"

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - make

tests:
  - script:
      - qjs -e "console.log('hello')"
      - test -f ${PREFIX}/bin/qjsc
  - package_contents:
      include:
        - quickjs/quickjs.h
        - quickjs/quickjs-libc.h
      files:
        - lib/quickjs/libquickjs.a

about:
  homepage: https://bellard.org/quickjs/
  summary: A small and embeddable JavaScript engine
  description: |
    QuickJS is a small and embeddable JavaScript engine. It supports the
    ES2023 specification including modules, asynchronous generators,
    proxies and BigInt. It optionally supports mathematical extensions
    such as big decimal floating point numbers (BigDecimal), big binary
    floating point numbers (BigFloat) and operator overloading.
  license: MIT
  license_file: LICENSE
  repository: https://github.com/bellard/quickjs

extra:
  recipe-maintainers:
    - chrisburr
