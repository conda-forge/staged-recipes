{% set name = "Macaulay2" %}
{% set version = "1.20" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/Macaulay2/M2/archive/refs/tags/release-{{ version }}.tar.gz
  sha256: 38c36a8a91759b71eff2aad4a5075fff0edf439b54a0d97cc34bd5b92d2a34b0

build:
  number: 0

requirements:
  build:
    - libtool    # [unix]
    - automake   # [unix]
    - make       # [unix]
    - gnuconfig  # [unix]
    - autotools_clang_conda  # [win]
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - pkg-config
  host:
    - gmp  # [unix]
    - mpir  # [win]
    - mpfr
    - glpk
    - givaro
    - cddlib
    - libflint
    - 4ti2
    - cohomcalg
    - gfan
    - lrs
    - csdp
    - normaliz
    - nauty
    - topcom
    - eigen3
    - ntl
    - frobby
    - readline
    - memtailor
    - mathic
    - mathicgb
    - gtest
    - python
    - boost-cpp
    - fflas-ffpack
    # Cannot link against system linbox yet, --enable-linbox will build linbox
    # - linbox
    # Cannot link against system fpll yet, --enable-fplll will build fplll
    # - fplll
    - factory
    - libz
    - libxml2
  run:
    - python

test:
  commands:
    - M2 --check 1 < /dev/null
    - M2 --check 2 < /dev/null
    - M2 --check 3 < /dev/null

about:
  home: https://faculty.math.illinois.edu/Macaulay2/
  # Much of the source code of Macaulay2 is explicitly licensed under GPL-2 or
  # 3 (not GPL-2 or later.) However, when linking with GPL3 libraries, the
  # whole distribution becomes GPL-3 only.
  license: GPL-3.0-only
  license_family: GPL
  license_file: M2/Macaulay/COPYING-GPL-3
  summary: A software system devoted to supporting research in algebraic geometry and commutative algebra
  description: |
     Macaulay2 includes core algorithms for computing GrÃ¶bner bases and graded
     or multi-graded free resolutions of modules over quotient rings of graded
     or multi-graded polynomial rings with a monomial ordering. The core
     algorithms are accessible through a versatile high level interpreted user
     language with a powerful debugger supporting the creation of new classes
     of mathematical objects and the installation of methods for computing
     specifically with them. Macaulay2 can compute Betti numbers, Ext,
     cohomology of coherent sheaves on projective varieties, primary
     decomposition of ideals, integral closure of rings, and more.
  dev_url: https://github.com/Macaulay2/M2

extra:
  recipe-maintainers:
    - saraedum
