package:
  name: xrayphysics
  version: 1.2.1

source:
  url: https://github.com/kylechampley/XrayPhysics/archive/refs/tags/v1.2.1.zip
  sha256: D03AC5512413099694F7C0E4D47C516EFBBCF570C23490871142B9388EDDE4D6
  patches: patch-dll-location.patch
  
build:
  number: 0
  python:
    version_independent: true
  script:
    - if: win
      then:
        - mkdir build
        - cd build
        - set CXXFLAGS="-DPROJECTOR_EXPORTS"
        - cmake %SRC_DIR% -GNinja %CMAKE_ARGS%
        - ninja install
        - copy "%SRC_DIR%\src\xrayphysics.py" "%SP_DIR%\"
      else:
        - mkdir build
        - cd build
        - cmake $SRC_DIR -GNinja $CMAKE_ARGS
        - ninja install
        - cp "$SRC_DIR/src/xrayphysics.py" "$SP_DIR/"

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib("c") }}
    - cmake >=3.9,<4.0
    - ninja
  host:
    - python
  run:
    - python
    - numpy

tests:
  - script: python -c "from xrayphysics import xrayPhysics; p = xrayPhysics(); p.about()"

about:
  homepage: https://github.com/kylechampley/XrayPhysics
  summary: X-ray cross sections and x-ray source spectra modeling for Python
  description: C/C++ library and Python bindings for x-ray cross sections, x-ray source spectra modeling, multi-material beam hardening correction, and dual energy decomposition algorithms.
  license: MIT
  license_file: LICENSE
  documentation: https://xrayphysics.readthedocs.io/en/latest/
  repository: https://github.com/kylechampley/XrayPhysics

extra:
  recipe-maintainers:
    - alashworth
