diff --git a/lib/jxl.cmake b/lib/jxl.cmake
index 86fa3715..a522e6fc 100644
--- a/lib/jxl.cmake
+++ b/lib/jxl.cmake
@@ -149,9 +149,11 @@ add_library(jxl_dec-internal STATIC
 )
 target_link_libraries(jxl_dec-internal PUBLIC
   ${JPEGXL_COVERAGE_FLAGS}
-  ${JPEGXL_DEC_INTERNAL_LIBS}
   jxl_base
 )
+target_link_libraries(jxl_dec-internal PRIVATE
+  ${JPEGXL_DEC_INTERNAL_LIBS}
+)
 
 # The list of objects in the static and shared libraries.
 set(JPEGXL_INTERNAL_OBJECTS
@@ -168,10 +170,12 @@ add_library(jxl-internal STATIC
 )
 target_link_libraries(jxl-internal PUBLIC
   ${JPEGXL_COVERAGE_FLAGS}
-  ${JPEGXL_INTERNAL_LIBS}
   jxl_cms
   jxl_base
 )
+target_link_libraries(jxl-internal PRIVATE
+  ${JPEGXL_INTERNAL_LIBS}
+)
 target_include_directories(jxl-internal PUBLIC
   "$<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}>")
 
@@ -197,7 +201,7 @@ if(JPEGXL_ENABLE_TCMALLOC)
         "bug for details:\n"
         "   https://github.com/gperftools/gperftools/issues/1204\n")
   endif()
-  target_link_libraries(jxl-internal PUBLIC PkgConfig::TCMallocMinimal)
+  target_link_libraries(jxl-internal PRIVATE PkgConfig::TCMallocMinimal)
 endif()  # JPEGXL_ENABLE_TCMALLOC
 
 # Public library.
@@ -219,13 +223,6 @@ set_target_properties(jxl_dec PROPERTIES
   VERSION ${JPEGXL_LIBRARY_VERSION}
   SOVERSION ${JPEGXL_LIBRARY_SOVERSION})
 
-# Check whether the linker support excluding libs
-set(LINKER_EXCLUDE_LIBS_FLAG "-Wl,--exclude-libs=ALL")
-include(CheckCSourceCompiles)
-list(APPEND CMAKE_EXE_LINKER_FLAGS ${LINKER_EXCLUDE_LIBS_FLAG})
-check_c_source_compiles("int main(){return 0;}" LINKER_SUPPORT_EXCLUDE_LIBS)
-list(REMOVE_ITEM CMAKE_EXE_LINKER_FLAGS ${LINKER_EXCLUDE_LIBS_FLAG})
-
 if(NOT BUILD_SHARED_LIBS)
   target_compile_definitions(jxl PUBLIC -DJXL_STATIC_DEFINE)
   target_compile_definitions(jxl_dec PUBLIC -DJXL_STATIC_DEFINE)
@@ -246,13 +243,6 @@ foreach(target IN ITEMS jxl jxl_dec)
   set_property(TARGET ${target} APPEND_STRING PROPERTY
       LINK_FLAGS " -Wl,--version-script=${CMAKE_CURRENT_SOURCE_DIR}/jxl/jxl.version")
   endif()  # APPLE
-  # This hides the default visibility symbols from static libraries bundled into
-  # the shared library. In particular this prevents exposing symbols from hwy
-  # and skcms in the shared library.
-  if(LINKER_SUPPORT_EXCLUDE_LIBS)
-    set_property(TARGET ${target} APPEND_STRING PROPERTY
-        LINK_FLAGS " ${LINKER_EXCLUDE_LIBS_FLAG}")
-  endif()
 endforeach()
 
 # Only install libjxl public library. The libjxl_dec is not installed since it
diff --git a/lib/jxl_cms.cmake b/lib/jxl_cms.cmake
index 04980066..024be64b 100644
--- a/lib/jxl_cms.cmake
+++ b/lib/jxl_cms.cmake
@@ -43,18 +43,6 @@ set_target_properties(jxl_cms PROPERTIES
         VERSION ${JPEGXL_LIBRARY_VERSION}
         SOVERSION ${JPEGXL_LIBRARY_SOVERSION})
 
-# Check whether the linker support excluding libs
-set(LINKER_EXCLUDE_LIBS_FLAG "-Wl,--exclude-libs=ALL")
-include(CheckCSourceCompiles)
-list(APPEND CMAKE_EXE_LINKER_FLAGS ${LINKER_EXCLUDE_LIBS_FLAG})
-check_c_source_compiles("int main(){return 0;}" LINKER_SUPPORT_EXCLUDE_LIBS)
-list(REMOVE_ITEM CMAKE_EXE_LINKER_FLAGS ${LINKER_EXCLUDE_LIBS_FLAG})
-
-if(LINKER_SUPPORT_EXCLUDE_LIBS)
-  set_property(TARGET jxl_cms APPEND_STRING PROPERTY
-      LINK_FLAGS " ${LINKER_EXCLUDE_LIBS_FLAG}")
-endif()
-
 install(TARGETS jxl_cms
         RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
         LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
