package:
  name: cupyifcudaavailable
  version: "1.0.0"
build:
  # Tell the solver to strongly prefer the cuda installation
  number: 0            # [not with_cuda]
  number: 300          # [    with_cuda]
  noarch: generic
  string: cuda_{{ PKG_BUILDNUM }}  # [with_cuda]
  string: cpu_{{ PKG_BUILDNUM }}   # [not with_cuda]

requirements:    # [with_cuda]
  run:           # [with_cuda]
    - __cuda     # [with_cuda]
    - cupy       # [wtih_cuda]

# CIs don't really have cuda, and thus  would fail at resolving __cuda
test:                                      # [not with_cuda]
  commands:                                # [not with_cuda]
    - echo "no tests for this package"     # [not with_cuda]

about:
  home: https://github.com/conda-forge/cupyifcudaavailable-feedstock
  license: BSD-3-Clause
  license_file: LICENSE
  summary: 'Allows noarch packages to depend on cupy without large downloads'

extra:
  recipe-maintainers:
    - hmaarrfk
