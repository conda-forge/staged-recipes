{% set version = "1.0" %}

package:
  name: cupyifcudaavailable
  version: {{ version }}

build:
  # Tell the solver to prefer the cuda installation
  number: 0      # [not with_cuda]
  number: 100    # [with_cuda]
  noarch: generic
  string: cuda_{{ PKG_BUILDNUM }}  # [with_cuda]
  string: cpu_{{ PKG_BUILDNUM }}   # [not with_cuda]

requirements:    # [with_cuda]
  run:           # [with_cuda]
    - __cuda     # [with_cuda]
    - cupy       # [wtih_cuda]

# CIs don't really have cuda, and thus  would fail at resolving __cuda
test:                                      # [not wtih_cuda]
  commands:                                # [not wtih_cuda]
    - echo "no tests for this package"     # [not wtih_cuda]

about:
  home: https://github.com/conda-forge/cupyifcudaavailable-feedstock
  license: BSD-3-Clause
  license_file: LICENSE
  summary: 'Allows noarch packages to depend on cupy without large downloads'

extra:
  recipe-maintainers:
    - hmaarrfk
