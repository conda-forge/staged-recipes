{% set version = "0.2.2" %}

package:
  name: libsamplerate
  version: {{ version }}

source:
  url: https://github.com/libsndfile/libsamplerate/releases/download/{{ version }}/libsamplerate-{{ version }}.tar.xz
  sha256: 3258da280511d24b49d6b08615bbe824d0cacc9842b0e4caf11c52cf2b043893

build:
  number: 0
  script:
    - cmake -S $SRC_DIR -B $SRC_DIR/build -DCMAKE_INSTALL_PREFIX=$PREFIX -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=ON -DLIBSAMPLERATE_EXAMPLES=OFF -DBUILD_TESTING=OFF
    - cmake --build $SRC_DIR/build
    - cmake --install $SRC_DIR/build

requirements:
  build:
    - {{ compiler('c') }}
    - cmake
    - fftw
  run:
    - fftw

about:
  home: http://libsndfile.github.io/libsamplerate/
  license: BSD-2-Clause
  license_family: BSD
  license_file: COPYING
  summary: 'An audio Sample Rate Conversion library'
  description: |
    libsamplerate (also known as Secret Rabbit Code) is a library for performing sample rate conversion of audio data.
  dev_url: https://github.com/libsndfile/libsamplerate
  doc_url: http://libsndfile.github.io/libsamplerate/
  doc_source_url: https://github.com/libsndfile/libsamplerate/blob/master/README.md
