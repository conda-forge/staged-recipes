context:
  name: lazka-sassc
  version: 3.5.0

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  git: "https://github.com/lazka/sassc.git"
  branch: "meson"

build:
  number: 0
  script:
    - if: win
      then: |
        meson setup %MESON_ARGS% ^
          --prefix=%LIBRARY_PREFIX% ^
          --default-library=shared ^
          --wrap-mode=nofallback ^
          builddir
        ninja -v -C builddir -j %CPU_COUNT%
        ninja -C builddir install -j %CPU_COUNT%
    - if: unix
      then: |
        meson setup ${MESON_ARGS} \
            --prefix=$PREFIX \
            --default-library=shared \
            --wrap-mode=nofallback \
            builddir
        ninja -v -C builddir -j ${CPU_COUNT}
        ninja -C builddir install -j ${CPU_COUNT}

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - meson
    - ninja
    - pkg-config
  host:
    - lazka-libsass

tests: 
  - package_contents:
      bin:
      - sassc
  - script: 
    - "sassc --version"

about:
  homepage: https://github.com/lazka/sassc
  summary: libsass command line driver 
  description: |
    SassC is a wrapper around libsass (http://github.com/sass/libsass) used to 
    generate a useful command-line application that can be installed and packaged 
    for several operating systems.
  license: MIT
  license_file: LICENSE
  documentation: https://gnome.pages.gitlab.gnome.org/libadwaita/doc/
  repository: https://github.com/lazka/sassc

extra:
  recipe-maintainers:
    - haecker-felix
    - Hofer-Julian
