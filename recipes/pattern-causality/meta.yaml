{% set name = "pattern-causality" %}
{% set version = "1.0.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/skstavroglou/pattern_causality_py/releases/download/v{{ version }}/pattern_causality-{{ version }}.tar.gz
    sha256: 99d42253d559992eb0137356ad52036789f00dd87ee7f5b1e4e6ebbad5e55141
  - url: https://raw.githubusercontent.com/skstavroglou/pattern_causality_py/refs/heads/main/LICENSE
    sha256: a22a34e6e0a1fd2ff312f8599c6f4c621c775845e0bc54d30ab21fa15e64bdc3

build:
  number: 0
  skip: true  # [win32]
  script: {{ PYTHON }} -m pip install . -vv
  ignore_run_exports:
    - vs2017_win-64  # [win]
    - vs2019_win-64  # [win]

requirements:
  build:
    - {{ compiler('cxx') }}  # [not win]
    - vs2019_win-64  # [win]
    - {{ stdlib('c') }}
    - python
    - pip
    - numpy >=1.19.0
    - setuptools >=45
    - wheel
    - cmake  # [win]
    - ninja  # [win]
    - make  # [unix]
    - llvm-openmp  # [osx]
    - libcxx >=14  # [osx]
    - libcxxabi >=14  # [osx]
    - clang >=14  # [osx]
    - clangxx >=14  # [osx]
    - compiler-rt >=14  # [osx]
    - libomp  # [osx]
  host:
    - python
    - pip
    - numpy >=1.19.0
    - pandas >=1.0.0
    - setuptools >=45
    - wheel
    - llvm-openmp  # [osx]
    - libcxx >=14  # [osx]
    - libcxx-devel >=14  # [osx]
    - libcxxabi >=14  # [osx]
    - compiler-rt >=14  # [osx]
    - libomp  # [osx]
  run:
    - python
    - {{ pin_compatible('numpy', min_pin='x.x', max_pin='x.x') }}
    - pandas >=1.0.0
    - llvm-openmp  # [osx]
    - libcxx >=14  # [osx]
    - libomp  # [osx]

test:
  requires:
    - pip
    - pytest >=6.0
    - pytest-cov >=2.0
  source_files:
    - tests
    - setup.py
    - pyproject.toml
  imports:
    - pattern_causality
  commands:
    - python -m pip check
    - python -m pytest tests -v --import-mode=append

about:
  home: https://github.com/skstavroglou/pattern_causality_py
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: Pattern Causality Algorithm in Python
  description: |
    A comprehensive Python library that implements the Pattern Causality algorithm 
    for analyzing causal relationships in time series data. This package provides 
    efficient tools for detecting and quantifying causality patterns between 
    multiple time series, with a particular focus on nonlinear complex systems.
  doc_url: https://github.com/skstavroglou/pattern_causality_py#readme
  dev_url: https://github.com/skstavroglou/pattern_causality_py

extra:
  recipe-maintainers:
    - wanghui5801
