{% set version = '0.0.2' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-flow
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/flow_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/flow/flow_{{ version }}.tar.gz
  sha256: 2514205a7ed187d1b3bffc7d6c3b2a3d70f2f4723efeeaac6635a518a6b34229

build:
  merge_build_host: True  # [win]
  # If this is a new build for the same version, increment the build number.
  number: 0
  # no skip
  noarch: generic

  # This is required to make R link correctly on Linux.
  rpaths:
    - lib/R/lib/
    - lib/

# Suggests: testthat (>= 2.1.0), covr, knitr, rmarkdown
requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]

  host:
    - r-base
    - r-htmlwidgets
    - r-nomnoml
    - r-rstudioapi
    - r-styler
    - r-webshot

  run:
    - r-base
    - r-htmlwidgets
    - r-nomnoml
    - r-rstudioapi
    - r-styler
    - r-webshot

test:
  commands:
    # You can put additional test commands to be run here.
    - $R -e "library('flow')"           # [not win]
    - "\"%R%\" -e \"library('flow')\""  # [win]

  # You can also put a file called run_test.py, run_test.sh, or run_test.bat
  # in the recipe that will be run at test time.

  # requires:
    # Put any additional test requirements here.

about:
  home: https://CRAN.R-project.org/package=flow
  license: GPL-3.0-or-later
  summary: Visualize as flow diagrams the logic of functions, expressions or scripts in a static
    way or when running a call, and ease debugging. Advanced features include analogs
    to 'debug' and 'debugonce' to target specific functions to draw, an utility to draw
    the calls used in the tests of the package in a markdown report, and an utility
    to draw all the functions of one package in a markdown report.

  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
    - cwurman

# The original CRAN metadata for this package was:

# Package: flow
# Title: View and Browse Code Using Flow Diagrams
# Version: 0.0.2
# Authors@R: person(given = "Antoine", family = "Fabri", role = c("aut", "cre"), email = "antoine.fabri@gmail.com")
# Description: Visualize as flow diagrams the logic of functions, expressions or scripts in a static way or when running a call, and ease debugging. Advanced features include analogs to 'debug' and 'debugonce' to target specific functions to draw, an utility to draw the calls used in the tests of the package in a markdown report, and an utility to draw all the functions of one package in a markdown report.
# License: GPL-3
# Encoding: UTF-8
# Suggests: testthat (>= 2.1.0), covr, knitr, rmarkdown
# Imports: nomnoml, utils, htmlwidgets, rstudioapi, webshot, styler
# RoxygenNote: 7.1.1.9001
# VignetteBuilder: knitr
# Config/testthat/edition: 3
# NeedsCompilation: no
# Packaged: 2021-08-11 22:01:08 UTC; Antoine
# Author: Antoine Fabri [aut, cre]
# Maintainer: Antoine Fabri <antoine.fabri@gmail.com>
# Repository: CRAN
# Date/Publication: 2021-08-13 09:00:04 UTC

# See
# https://docs.conda.io/projects/conda-build for
# more information about meta.yaml
