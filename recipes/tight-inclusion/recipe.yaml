context:
  version: 1.0.6

package:
  name: tight-inclusion
  version: ${{ version }}

source:
  url: https://github.com/Continuous-Collision-Detection/Tight-Inclusion/archive/refs/tags/v${{ version }}.tar.gz
  sha256: ed44caa4b253371637beeadefb064333174bb79ef7a0fb7ae09a40206e2e8b5f

  patches:
    - patches/0001-Export-target-install-header-in-right-dir-still-need.patch
    - patches/0002-Export-symbols-on-windows.patch
    - patches/0003-patch-for-conda-forge-package.patch
    - patches/0004-add-cmake-config-file-homogenize-project-name.patch
    - patches/0005-fix-installation-of-configured-config.hpp-file.patch

build:
  number: 0

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake
    - ninja
  host:
    - eigen
    - spdlog
  run:
    - eigen
    - spdlog
  run_exports:
    - ${{ pin_subpackage("tight-inclusion", upper_bound='x.x.x') }}

tests:
  - package_contents:
      lib:
        - tight_inclusion
      include:
        - tight_inclusion/config.hpp
        - tight_inclusion/ccd.hpp
  - script:
    - cmake-package-check tight_inclusion
    requirements:
      run:
        - cmake-package-check
        - ${{ compiler('c') }}
        - ${{ compiler('cxx') }}
about:
  homepage: https://continuous-collision-detection.github.io/tight_inclusion/
  summary: A conservative continuous collision detection (CCD) method with support for minimum separation.
  license: MIT
  license_file: LICENSE
  repository: https://github.com/Continuous-Collision-Detection/Tight-Inclusion

extra:
  recipe-maintainers:
    - olivier-roussel
    - bakpaul
