{% set org = "shakeflow" %}
{% set name = "noiseflow" %}
{% set version = "0.0.8" %}

package:
  name: {{ name|lower }}-split
  version: {{ version }}

source:
  url: https://github.com/{{ org }}/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: ae0f060010667a924f7281976762d85cf5ba2402ccb404a0bab7a5fc893188fe

build:
  number: 0
  skip: True  # [python_impl == 'pypy']
  script: build_osx.sh  # [osx]
  script: build_linux.sh  # [linux]
  script: build_win.bat  # [win]

requirements:
  build:
    - "{{ compiler('cxx') }}"
    - python                              
    - poetry-core
    - setuptools                          
    - cmake
    - numpy
    - pip  
    - make  # [unix]
    - ninja  

  host:
    - pip
    - python
    - numpy >=1.25.0
    - fftw  # [unix]
    - pybind11  # [unix]
    - xtensor  # [unix]
    - xtensor-python  # [unix]
    - xsimd =8.0.5  # [unix]
    - xtl  # [unix]
    - xtensor-blas  # [unix]
    - llvm-openmp  # [unix]
    - openblas  # [unix]
    - libopenblas  # [unix]

  run:
    - python
    - numpy >=1.25.0
    - scipy >1.10.1
    - matplotlib-base
    - h5py >=3.7.0
    - joblib >=1.3.0
    - tqdm >=4.65.0
    - obspy >=1.4.0
    - faker >=18.13.0

test:
  imports:
    - noiseflow
  commands:
    - pip check
    - python -c "import noiseflow; ver = noiseflow.__version__; assert ver != '0.0.0'"
  requires:
    - pip

about:
  home: https://github.com/{{ org }}/{{ name }}
  summary: An ambient noise package.
  license: Apache-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - OUCyf
