{% set name = "ruckig" %}
{% set version = "0.2.6" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/pantor/ruckig/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 19876f4cabda5b4fab9156641da281c1bd24f6e91c43bf423cf406a06d58ee14

build:
  number: 0

outputs:
  - name: ruckig
    script: build_cpp.sh    # [unix]
    script: bld_cpp.bat     # [win]

    requirements:
      build:
        - cmake
        - make  # [unix]
        - {{ compiler('c') }}
        - {{ compiler('cxx') }}

    test:
      commands:
        - test -f ${PREFIX}/include/bullet/BulletSoftBody/btSoftBody.h  # [unix]
        - test -f ${PREFIX}/lib/cmake/bullet/BulletConfig.cmake  # [unix]
        - if not exist %LIBRARY_PREFIX%\include\bullet\BulletSoftBody\btSoftBody.h (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\cmake\bullet\BulletConfig.cmake (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\BussIK.lib (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\BulletCollision.lib (exit 1)  # [win]

  - name: ruckig-python
    script: build_py.sh    # [unix]
    script: bld_py.bat     # [win]
    requirements:
      build:
        - cmake
        - ninja
        - {{ compiler('c') }}
        - {{ compiler('cxx') }}
      host:
        - python
        - pip
      run: 
        - python
    test:
      imports:
        - ruckig

about:
  home: https://pantor.github.io/ruckig/
  license: MIT
  license_file: LICENSE
  summary: |
    Online Trajectory Generation for Robotic Manipulators. Real-time. Time-optimal. Jerk-constrained.

extra:
  recipe-maintainers:
    - traversaro
