{% set name = "ruckig" %}
{% set version = "0.2.6" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://github.com/pantor/ruckig/archive/refs/tags/v{{ version }}.tar.gz
  sha256: f2feef9322329c0571d9066fede2db0ede92b19f7f7fdf54def3b4651f02af03

build:
  number: 0

outputs:
  - name: ruckig
    script: build_cpp.sh    # [unix]
    script: bld_cpp.bat     # [win]

    requirements:
      build:
        - cmake
        - make  # [unix]
        - '{{ compiler("c") }}'
        - '{{ compiler("cxx") }}'

    test:
      commands:
        - test -f ${PREFIX}/include/bullet/BulletSoftBody/btSoftBody.h  # [unix]
        - test -f ${PREFIX}/lib/cmake/bullet/BulletConfig.cmake  # [unix]
        - if not exist %LIBRARY_PREFIX%\include\bullet\BulletSoftBody\btSoftBody.h (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\cmake\bullet\BulletConfig.cmake (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\BussIK.lib (exit 1)  # [win]
        - if not exist %LIBRARY_PREFIX%\lib\BulletCollision.lib (exit 1)  # [win]

  - name: ruckig-python
    script: {{ PYTHON }} -m pip install . --no-deps -vv
    requirements:
      build:
        - cmake
        - ninja
        - '{{ compiler("c") }}'
        - '{{ compiler("cxx") }}'
      host:
        - python
        - pip
      run: 
        - python
    test:
      imports:
        - ruckig


about:
  home: https://pantor.github.io/ruckig/
  license: MIT
  license_file: LICENSE
  summary: |
    Online Trajectory Generation for Robotic Manipulators. Real-time. Time-optimal. Jerk-constrained.

extra:
  recipe-maintainers:
    - traversaro
