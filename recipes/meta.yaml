{% set name = "compyle" %}
{% set version = "0.5" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  git_url: "https://github.com/pypr/compyle.git"
  git_tag: "master"

build:
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"
  
requirements:
  build:
    - {{ compiler('cxx') }}
  host:
    - cython
    - mako
    - mock >=1.0
    - numpy 1.11.*
    - python
    - setuptools
    - pytools
    - pip
  run:
    - cython
    - mako
    - {{ pin_compatible('numpy') }}
    - python
    - pytools

test:
  imports:
    - compyle
    - compyle.tests
  requires:
    - pytest
    - mock >=1.0
  source_files:
    - compyle/tests/*
  commands:
    - pytest --pyargs compyle

about:
  home: "https://github.com/pypr/compyle"
  license: "BSD 3-Clause"
  license_family: "BSD"
  license_file: "LICENSE.txt"
  summary: "Execute a subset of Python on HPC platforms"
  doc_url: "https://compyle.readthedocs.io/"

extra:
  recipe-maintainers:
    - rishi9699
