{% set version = "1.12.1" %}

package:
  name: msdfgen
  version: {{ version }}

source:
  url: https://github.com/Chlumsky/msdfgen/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 24541c9fbb459e8c62adeb3eb22cb21fa07a4b5091e2ae1f041d144a4baf08cd

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('msdfgen', max_pin='x.x') }}

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
    - cmake
    - ninja
  host:
    - freetype
    - tinyxml2
    - libpng
    - zlib
    # - skia

test:
  commands:
    - msdfgen --help
    - test -f ${PREFIX}/include/msdfgen/msdfgen.h                     # [unix]
    - test -f ${PREFIX}/lib/libmsdfgen-core${SHLIB_EXT}               # [unix]
    - test -f ${PREFIX}/lib/libmsdfgen-ext${SHLIB_EXT}                # [unix]
    - if not exist %PREFIX%\Library\bin\msdfgen-core.dll exit 1       # [win]
    - if not exist %PREFIX%\Library\lib\msdfgen-core.lib exit 1       # [win]
    - if not exist %PREFIX%\Library\lib\msdfgen-ext.lib exit 1        # [win]
    - if not exist %PREFIX%\Library\bin\msdfgen-ext.dll exit 1        # [win]
    - if not exist %PREFIX%\Library\include\msdfgen\msdfgen.h exit 1  # [win]

about:
  home: https://github.com/Chlumsky/msdfgen
  summary: Multi-channel signed distance field generator
  description: |
    This is a utility for generating signed distance fields from vector shapes
    and font glyphs, which serve as a texture representation that can be used
    in real-time graphics to efficiently reproduce said shapes. Although it can
    also be used to generate conventional signed distance fields best known
    from this Valve paper and perpendicular distance fields, its primary
    purpose is to generate multi-channel distance fields, using a method I have
    developed. Unlike monochrome distance fields, they have the ability to
    reproduce sharp corners almost perfectly by utilizing all three color
    channels.

  license: MIT
  license_family: MIT
  license_file: LICENSE.txt

extra:
  recipe-maintainers:
    - hmaarrfk
