schema_version: 1

context:
  name: fvdb-reality-capture
  version: 0.3.0

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/fvdb_reality_capture-${{ version }}.tar.gz
  sha256: 6a73d9ba3e8901f0bc11c445243a74bfa145ac83c9fae10fe7a767f3a10774a0

build:
  number: 0
  skip:
    - win
    - osx
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - frgs = fvdb_reality_capture.cli.frgs:frgs
      - frdev = fvdb_reality_capture.cli.frdev:frdev

requirements:
  host:
    - python
    - setuptools >=61.0
    - pip
  run:
    - python
    - fvdb-core >=0.3.0
    - boto3
    - dlnr_lite
    - nanovdb-editor <0.2.0
    - numpy >=2.0.0
    - opencv
    - point-cloud-utils
    - pye57
    - pyproj
    - requests
    - sam2 ==1.1.0
    - scikit-image
    - scipy
    - tensorboard
    - pytorch >=2.8.0
    - torchvision
    - tqdm
    - tyro
    - usd-core
    - msgpack-python
    - types-usd

tests:
  - python:
      imports:
        - fvdb_reality_capture
      pip_check: true
  - requirements:
      run:
        - pip
    script:
      - frgs --help
      - frdev --help

about:
  summary: fVDB Reality Capture Toolbox
  license: Apache-2.0
  license_file: LICENSE
  homepage: https://www.openvdb.org/
  repository: https://github.com/openvdb/fvdb-core
  documentation: https://fvdb.ai/

extra:
  recipe-maintainers:
    - swahtz
