context:
  name: codeflash
  version: "0.19.1"
  python_min: "3.9"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/${{ name }}-${{ version }}.tar.gz
  sha256: a92444477e80aa27dd2ec508b7e422eb43ed96e411ae302a9fe9b9057440fd5b

build:
  noarch: python
  script: python -m pip install . -vv
  python:
    entry_points:
      - codeflash = codeflash.main:main
  number: 0

requirements:
  host:
    - python ==${{ python_min }}
    - pip
    - hatchling
    - uv-dynamic-versioning
  run:
    - python >=${{ python_min }}
    - unidiff >=0.7.4
    - pytest >=7.0.0
    - gitpython >=3.1.31
    - libcst >=1.0.1
    - jedi >=0.19.1
    - pytest-timeout >=2.1.0
    - tomlkit >=0.11.7
    - junitparser >=3.1.0
    - pydantic >=1.10.1
    - humanize >=4.0.0
    - posthog >=3.0.0
    - click >=8.1.0
    - inquirer >=3.0.0
    - sentry-sdk >=1.40.6,<3.0.0
    - parameterized >=0.9.0
    - isort >=5.11.0
    - dill >=0.3.8
    - rich >=13.8.1
    - lxml >=5.3.0
    - crosshair-tool >=0.0.78
    - coverage >=7.6.4
    - line-profiler >=4.2.0
    - platformdirs >=4.3.7
    - pygls >=2.0.0,<3.0.0
    - codeflash-benchmark
    - filelock
    - pytest-asyncio >=1.2.0

tests:
  - python:
      imports:
        - codeflash
      pip_check: true
      python_version: ${{ python_min }}.*

about:
  homepage: https://www.codeflash.ai/
  summary: Client for codeflash.ai - automatic code performance optimization, powered by AI
  license: BUSL-1.1
  license_file: codeflash/LICENSE
  documentation: https://docs.codeflash.ai/
  repository: https://github.com/codeflash-ai/codeflash

extra:
  recipe-maintainers:
    - kratsg
