From 7fdb5ec1e22310df4c978e5b60365391b61ff268 Mon Sep 17 00:00:00 2001
From: Akihiro Suda <akihiro.suda.cz@hco.ntt.co.jp>
Date: Thu, 16 Dec 2021 18:17:36 +0900
Subject: [PATCH 62/62] Add CI (GitHub Actions)

Signed-off-by: Akihiro Suda <akihiro.suda.cz@hco.ntt.co.jp>
---
 .github/workflows/ci.yml | 35 +++++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)
 create mode 100644 .github/workflows/ci.yml

diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
new file mode 100644
index 000000000..0ce4dbec9
--- /dev/null
+++ b/.github/workflows/ci.yml
@@ -0,0 +1,35 @@
+name: "CI"
+on:
+  push:
+  pull_request:
+  workflow_dispatch:
+jobs:
+  smoke:
+    name: "Smoke test"
+    strategy:
+      matrix:
+        os: [ubuntu-20.04, macos-11]
+    runs-on: ${{ matrix.os }}
+    timeout-minutes: 30
+    steps:
+      - name: "Check out"
+        uses: actions/checkout@v2
+        with:
+          fetch-depth: 1
+      - name: "Install dependencies (Linux)"
+        if: runner.os == 'Linux'
+        run: |
+          sudo apt-get update
+          sudo apt-get install -y autoconf automake
+      - name: "Install dependencies (macOS)"
+        if: runner.os == 'macOS'
+        run: brew install autoconf automake
+      - name: "Build"
+        run: |
+          autoreconf -fis
+          ./configure --prefix=/opt/vde
+          make
+          sudo make install
+      - name: "Smoke test"
+        run: |
+          /opt/vde/bin/vde_switch --version
-- 
2.35.0

