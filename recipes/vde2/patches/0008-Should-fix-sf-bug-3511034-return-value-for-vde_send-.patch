From 405b759c2a8f6dc49f322d67fb06e722a92a8687 Mon Sep 17 00:00:00 2001
From: Daniele Lacamera <danielinux@users.noreply.github.com>
Date: Sun, 25 Mar 2012 20:13:48 +0000
Subject: [PATCH 08/62] Should fix sf bug #3511034 (return value for
 vde_send/recv)

---
 include/libvdeplug_dyn.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/include/libvdeplug_dyn.h b/include/libvdeplug_dyn.h
index 23c029235..2ba2d1949 100644
--- a/include/libvdeplug_dyn.h
+++ b/include/libvdeplug_dyn.h
@@ -86,8 +86,8 @@ struct vde_open_args {
 struct vdepluglib {
 	void *dl_handle;
 	VDECONN * (*vde_open_real)(const char *vde_switch,char *descr,int interface_version, struct vde_open_args *open_args);
-	size_t (* vde_recv)(VDECONN *conn,void *buf,size_t len,int flags);
-	size_t (* vde_send)(VDECONN *conn,const void *buf,size_t len,int flags);
+	ssize_t (* vde_recv)(VDECONN *conn,void *buf,size_t len,int flags);
+	ssize_t (* vde_send)(VDECONN *conn,const void *buf,size_t len,int flags);
 	int (* vde_datafd)(VDECONN *conn);
 	int (* vde_ctlfd)(VDECONN *conn);
 	int (* vde_close)(VDECONN *conn);
@@ -101,8 +101,8 @@ struct vdepluglib {
 };
 
 typedef VDECONN * (* VDE_OPEN_REAL_T)(const char *vde_switch,char *descr,int interface_version, struct vde_open_args *open_args);
-typedef size_t (* VDE_RECV_T)(VDECONN *conn,void *buf,size_t len,int flags);
-typedef size_t (* VDE_SEND_T)(VDECONN *conn,const void *buf,size_t len,int flags);
+typedef ssize_t (* VDE_RECV_T)(VDECONN *conn,void *buf,size_t len,int flags);
+typedef ssize_t (* VDE_SEND_T)(VDECONN *conn,const void *buf,size_t len,int flags);
 typedef int (* VDE_INT_FUN)(VDECONN *conn);
 typedef VDESTREAM * (* VDESTREAM_OPEN_T)(void *opaque, int fdout,
 			ssize_t (* frecv)(void *opaque, void *buf, size_t count),
-- 
2.35.0

