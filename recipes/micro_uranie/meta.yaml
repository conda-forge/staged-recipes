{% set name = "URANIE" %}
{% set version = "4.6.0" %}
{% set root_version = "6.24" %}

package:
  name: "micro_{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://sourceforge.net/projects/{{ name|lower }}/files/{{ name }}-{{ version }}-Source.tar.gz"
  sha256: 66eeac200c28b8f6f0cb12f984a7cc2144fac1007f07e812f711df1db9fb65e4
  folder: uranie-source

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ compiler('fortran') }}
    - cmake
    - pkg-config
    - sed
    - make
    - bash
    - root ={{ root_version }}
    - libxml2
    - jsoncpp
    - cppunit =1.15.1
  host:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - root ={{ root_version }}
    - libxml2
    - jsoncpp
    - cppunit =1.15.1
  run:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - root ={{ root_version }}

test:
  commands:
  - root -b -l -q -x -e 'gSystem->LoadAllLibraries(); 0'
  - python -c "import ROOT; print(ROOT.gSystem.LoadAllLibraries())"

about:
  home: https://sourceforge.net/projects/uranie/
  license: LGPL-3.0-only
  license_file: lgpl-3.0.md
  summary: "Uranie is CEA's uncertainty analysis platform, based on ROOT "
  dev_url: https://codev-tuleap.cea.fr/projects/URANIE

extra:
  recipe-maintainers:
    - salomon-chung
