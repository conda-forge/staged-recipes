{% set version = "1.4.2" %}

package:
  name: go
  version: {{ version }}

source:
  fn: go-{{ version }}.tar.gz
  url: https://storage.googleapis.com/golang/go{{ version }}.src.tar.gz
  sha1: 460caac03379f746c473814a65223397e9c9a2f6

build:
  number: 0
  binary_relocation: false

requirements:
  build:
    - pkg-config  # [not win]
    - pcre  # [not win]

test:
  files:
    - hello.go

  commands:
    # conda build currently does not activate the test environment before
    # tests, just sets PATH and some env variables
    - activate _test  # [win]
    - go version
    - go help
    - go run hello.go
    - cmd /c echo x%GOROOT% NEQ x%CONDA_DEFAULT_ENV%\go  # [win]
    - cmd /c if x%GOROOT% NEQ x%CONDA_DEFAULT_ENV%\go exit 1   # [win]
 
about:
  home: http://golang.org
  license: BSD 3-Clause
  summary: Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.

extra:
  recipe-maintainers:
    - jakirkham
