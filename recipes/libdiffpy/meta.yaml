{ % set name = "libdiffpy" % }
{ % set version = "1.4.0" % }
{ % set sha256 = "d5558cd419c8d46bdc958064cb97f963d1ea793866414c025906ec15033512ed" % }
{ % set setupdata = load_setup_py_data(from_recipe_dir=True) % }

package:
  name: {{ name }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://github.com/diffpy/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('libdiffpy', max_pin='x.x') }}

requirements:
  build:
    - {{ compiler('cxx') }}
  host:
    - python
    - scons
  run:
    - boost
    - gsl
    - libobjcryst
    - {{ pin_compatible('gsl', min_pin='x.x', max_pin='x') }}

test:
  requires:
    - {{ compiler('cxx') }}
    - cxxtest
    - scons

  source_files:
    - SConstruct
    - site_scons/
    - src/SConscript
    - src/SConscript.configure
    - src/tests/

about:
  home: https://github.com/diffpy/libdiffpy
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.txt
  summary: C++ calculators of PDF, bond valence sum and other pair quantities.
  description: |
    libdiffpy is a C++ library for calculating atomic pair distribution function (PDF), bond valence sums, atom 
    overlaps for a hard-sphere model, bond distances and directions up to a specified maximum distance. 
    The atomic structure models are represented by classes for non-periodic, periodic or structures with 
    space group symmetries. libdiffpy supports Crystal and Molecule classes from the ObjCryst crystallographic 
    library. Calculators support two evaluation models - BASIC, which performs a full pair-summation every time, 
    and OPTIMIZED, which updates only pair contributions that have changed since the last evaluation. libdiffpy 
    supports object serialization and parallel computations using parallel map function. PDF calculations can be 
    performed in two modes - either as a real-space summation of peak profiles (PDFCalculator) or as a 
    reciprocal-space Debye summation and Fourier transform of the total scattering structure function 
    (DebyePDFCalculator).
  doc_url: https://github.com/diffpy/libdiffpy
  dev_url: https://github.com/diffpy/libdiffpy
