{% set version = "1.8.27" %}

package:
  name: msmtp
  version: "{{ version }}"

source:
  url: https://marlam.de/msmtp/releases/msmtp-{{ version }}.tar.xz
  sha256: 94030580a63a747faa0a3b9b1b264ae355aad33a4d94b832bfeb5b21633c965e

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ stdlib("c") }}
    - make
    - pkg-config
  host:
    - libgsasl
    - libidn2
    - openssl
  run:
    - {{ pin_compatible('libgsasl', max_pin='x') }}

test:
  commands:
    - msmtp --version
    - msmtp --help

about:
  summary: "msmtp is a lightweight SMTP client"
  home: https://marlam.de/msmtp/
  license: GPL-3.0-or-later
  license_file: COPYING
  description: |
    msmtp is an SMTP client that can be used as an SMTP plugin for MUA
    (Mail User Agents) like mutt or other mail transfer setups. It supports
    authentication (including SASL) and TLS encryption.
  dev_url: https://marlam.de/msmtp/

extra:
  recipe-maintainers:
    - chrisburr
