{% set name = "c-kzg-4844" %}
{% set version = "1.03" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ethereum/c-kzg-4844/archive/refs/tags/v1.0.3.tar.gz
  sha256: d9b8bd960d7072cf5dba6ecd9f01bfb82513e75bf5170d6de5ca508ee1abc385

build:
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('rust') }}
    - python-build
  host:
    - blst
    - make
    - pip
    - python
    - PyYAML
  run:
    - python

test:
  source_files:
    - tests.py
  imports:
    - ckzg
  requires:
    - pip
  commands:
    - pip check
    - python tests.py

about:
  home: https://github.com/ethereum/c-kzg-4844
  summary: 'A minimal implementation of the Polynomial Commitments API for EIP-4844 and EIP-7594, written in C.'
  description: |
    The C-KZG-4844 library provides implementations of the public
    KZG functions that are defined in the Polynomial Commitments
    specification. The aim is to align these functions as closely
    as possible with the specification.
  license: Apache-2.0
  license_file:
    - LICENSE
    - blst/LICENSE

extra:
  recipe-maintainers:
    - MementoRC
