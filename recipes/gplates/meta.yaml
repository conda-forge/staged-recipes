{% set name = "gplates" %}
{% set version = "2.2.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  #url: https://sourceforge.net/projects/gplates/files/gplates/2.2/gplates-2.2.0-unixsrc.tar.bz2
  #sha256: 0b145891bb345ba94b379857714d722029e745784f2f4867479add8d12d92ccb
  #url: ./gplates_src_r19627.zip
  url: ./gplates_src_r19678.zip
  #sha256: 5fc8b44ccae2a7353d3d23dca1940c1a19c9d9d588b8926c785f6f9d5d51105b
  sha256: a975baf868e568accad6d6c34e12e2a326c5e6c8792c92445eb693ed70635ee5

build:
  number: 0

requirements:
  
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}  # [linux]
    - {{ cdt('libxdamage') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux] 
    - {{ cdt('libxext') }}  # [linux]
    # For some reason using the cdt tries to get the cos6 version of the
    # library and they do not exist.
    - libglvnd-cos7-x86_64
    - libglvnd-glx-cos7-x86_64
    - cmake
    - make
    - svn

  host:
    - xorg-libxfixes  # [linux]
    - libglvnd-cos7-x86_64
    - libglvnd-glx-cos7-x86_64
    - glew
    - python
    - boost
    - qt
    - gdal
    - proj
    - cgal
    - qwt
    - glfw
    - mesalib  # [linux]

  run:
    - glew
    - python
    - boost
    - qt
    - gdal
    - proj
    - cgal
    - qwt
    - glfw

about:
  home: https://www.gplates.org/
  license: GPL-2.0
  license_family: GPL
  summary: 'GPlates is desktop software for the interactive visualisation of plate-tectonics.'

  # The remaining entries in this section are optional, but recommended.
  description: |
      GPlates offers a novel combination of interactive plate-tectonic reconstructions,
      geographic information system (GIS) functionality and raster data visualisation.
      GPlates enables both the visualisation and the manipulation of plate-tectonic
      reconstructions and associated data through geological time. 
      GPlates runs on Windows, Linux and MacOS X. GPlates has an online user manual.
  doc_url: https://www.gplates.org/docs.html

extra:
  recipe-maintainers:
    - rbeucher
