From 458163c93d96f0b951803c99d77ae15580cbea7e Mon Sep 17 00:00:00 2001
From: Tom Vander Aa <vanderaa@imec.be>
Date: Wed, 4 Aug 2021 11:03:05 +0200
Subject: [PATCH 1/2] FIX: for LAPACK on windows, add
 -DLAPACK_COMPLEX_STRUCTURE=1

---
 cmake/DependenciesConfig.cmake | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/cmake/DependenciesConfig.cmake b/cmake/DependenciesConfig.cmake
index 89785352..7e851da3 100644
--- a/cmake/DependenciesConfig.cmake
+++ b/cmake/DependenciesConfig.cmake
@@ -45,6 +45,8 @@ macro(configure_lapack)
   find_package(LAPACK REQUIRED)
   find_package(LAPACKE REQUIRED)
   add_definitions(-DEIGEN_USE_BLAS -DEIGEN_USE_LAPACKE)
+  # needed because MSVC does not have support for c-type _Complex
+  add_definitions(-DLAPACK_COMPLEX_STRUCTURE=1)
   message(STATUS LAPACK: ${LAPACK_LIBRARIES})
 endmacro(configure_lapack)
 
-- 
2.30.2


From 67349b8cb5306ccb08b713f01da4dfe9bbc62376 Mon Sep 17 00:00:00 2001
From: Tom Vander Aa <vanderaa@imec.be>
Date: Wed, 4 Aug 2021 14:08:50 +0200
Subject: [PATCH 2/2] WIP: workaround for _Complex on Win

---
 cmake/DependenciesConfig.cmake | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/cmake/DependenciesConfig.cmake b/cmake/DependenciesConfig.cmake
index 7e851da3..b06206e1 100644
--- a/cmake/DependenciesConfig.cmake
+++ b/cmake/DependenciesConfig.cmake
@@ -46,7 +46,7 @@ macro(configure_lapack)
   find_package(LAPACKE REQUIRED)
   add_definitions(-DEIGEN_USE_BLAS -DEIGEN_USE_LAPACKE)
   # needed because MSVC does not have support for c-type _Complex
-  add_definitions(-DLAPACK_COMPLEX_STRUCTURE=1)
+  add_definitions(-Dlapack_complex_float=std::complex<float> -Dlapack_complex_double=std::complex<double>)
   message(STATUS LAPACK: ${LAPACK_LIBRARIES})
 endmacro(configure_lapack)
 
-- 
2.30.2

