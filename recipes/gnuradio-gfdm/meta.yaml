{% set oot_name = "gfdm" %}
{% set name = "gnuradio-" + oot_name %}
{% set version = "1.0.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  # - url: https://github.com/jdemel/gr-gfdm/archive/refs/tags/v{{ version }}.tar.gz
    # sha256: a79db85619ef51fe70beb0c270848483fcc3a88f7b9944aef7efb52b1e9f7877
    # folder: "gr-gfdm"
  - git_url: https://github.com/jdemel/gr-gfdm.git
    git_rev: "master"
    folder: "gr-gfdm"
  - git_url: https://github.com/veeresht/CommPy.git
    git_rev: v0.8.0
    folder: commpy

build:
  skip: True  # [win]
  number: 0

requirements:
  build:
    - {{ compiler("c") }}
    - {{ compiler("cxx") }}
    - cmake >=3.16
    - git
    - pip
    - ninja
    - pkg-config  # [not win]
    # cross-compilation requirements
    - python                              # [build_platform != target_platform]
    - cross-python_{{ target_platform }}  # [build_platform != target_platform]
    - numpy                               # [build_platform != target_platform]
    - pybind11                            # [build_platform != target_platform]
    # Add extra build tool dependencies here

  host:
    - python
    - numpy >=1.22
    - fmt
    - spdlog
    - pybind11
    - gmp  # [not win]
    - fftw
    - volk >=2.5
    - gmp  # [linux]
    # - scikit-commpy  # Waiting for package to be added to conda-forge
    # the following two entries are for generating builds against specific GR versions
    - gnuradio-core  # [not gnuradio_extra_pin]
    - gnuradio-core {{ gnuradio_extra_pin }}.*  # [gnuradio_extra_pin]
    - pip  # [win]

  run:
    - python

test:
  imports:
    - gfdm

about:
  home: https://github.com/jdemel/gr-gfdm
  license: GPL-3.0-or-later
  license_family: GPL
  license_file: gr-gfdm/LICENSE
  summary: GFDM (de)modulator GNU Radio OOT module
  doc_url: https://github.com/jdemel/gr-gfdm
  dev_url: https://github.com/jdemel/gr-gfdm

extra:
  recipe-maintainers:
    - jdemel
