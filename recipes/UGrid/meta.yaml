{% set name = "UGrid" %}
{% set version = "0.0.1.dev" %}
{% set commit = "79841fe3af2cf60eece683e6cff2d5dc31690698" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/Deltares/UGrid/archive/{{ commit }}.zip
  sha256: a8c42f8d23c947de342dcb3a82102487c9af207a3e10da0d0228b8e9c1df7575
  patches:
    - patches/constans.patch
    - patches/use_runtime_error.patch

build:
  skip: True  # [win]
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake >=3.19
    - make
  host:
    - boost
    - boost-cpp
    - netcdf-cxx4 >=4.3.1
    - openlibm
  run:
    - boost
    - boost-cpp
    - netcdf-cxx4 >=4.3.1

test:
  commands:
    - test -f ${PREFIX}/UGrid/lib/libUGridApi${SHLIB_EXT}  # [not win]

about:
  home: https://github.com/Deltares/UGrid
  summary: Deltares library for reading/writing UGrid compliant files
  description: |
     Deltares library for reading/writing UGrid files. The UGrid entities available in this library are: Network1d, Mesh1d, Mesh2d and Contacts.
     Network1d, Mesh1d, and Contacts concern Deltares extensions to UGrid, which will be submitted to the UGrid community.
  license: LGPL-2.1-or-later
  license_file: LICENSE

extra:
  recipe-maintainers:
    - ocefpaf
