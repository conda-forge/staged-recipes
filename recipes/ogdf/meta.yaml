{% set name = "ogdf" %}
{% set version = "2022.02" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ogdf/ogdf/archive/refs/tags/dogwood-202202.tar.gz
  sha256: 308cc2749c6a63520f7979bac86a04066dfea2fb9d3a5e89831318db404bfbf5

  patches:
    - cmake.patch

build:
  number: 0
  skip: True  # [win]
  run_exports:
    - {{ pin_subpackage('ogdf', max_pin='2022.02') }}

requirements:
  build:
    - {{ compiler("cxx") }}
    - backward-cpp                           # [build_platform != target_platform]
    - pugixml                                # [build_platform != target_platform]
    - coincbc                                # [build_platform != target_platform]
    - libdwarf-dev                           # [build_platform != target_platform]
  host:
    - cmake >=3.1
    - make               # [not win]
    - ninja              # [win]
    - backward-cpp
    - pugixml
    - coincbc
    - libdwarf-dev
  run:
    # To prevent DSO linking errors
    - coin-or-clp
    - coin-or-utils

test:
  commands:
    - test -f $PREFIX/lib/libOGDF.so                 # [linux]
    - test -f $PREFIX/lib/libOGDF.dylib              # [osx]
    - if not exist %LIBRARY_LIB%\\OGDF.lib exit 1    # [win]

about:
  home: http://www.ogdf.net/
  license: GPL-2.0-only OR GPL-3.0-only
  summary: OGDF is a self-contained C++ class library for the automatic layout of diagrams

  description: |
    OGDF is a self-contained C++ class library for the automatic layout of diagrams.
  doc_url: http://www.ogdf.net/doku.php
  dev_url: https://github.com/ogdf/ogdf

  license_file:
    - LICENSE.txt
    - LICENSE_GPL_v2.txt
    - LICENSE_GPL_v3.txt
    - LICENSE_abacus.txt
    - LICENSE_minisat.txt

extra:
  recipe-maintainers:
    - hadim
    - N-Coder
