{% set name = "git-credential-manager" %}
{% set version = "2.0.935" %}
{% set dotnet_version = "6.0.11" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/git-ecosystem/{{ name }}/releases/download/v{{ version }}/{{ name }}.{{ version }}.nupkg
  fn: {{ name }}.{{ version }}.nupkg
  sha256: 7ddbb105f75948ff4a8fd52fbdfd773779486d8c020c543cec5a4b1a6f63568e

build:
  number: 0

requirements:
  build:
    - dotnet
    - dotnet-runtime >={{ dotnet_version }},<7
  run:
    - dotnet-runtime >={{ dotnet_version }},<7

test:
  requires:
    - git
    - dotnet-runtime ={{ dotnet_version }}
  commands:
    - git credential-manager --version

about:
  home: https://github.com/git-ecosystem/git-credential-manager
  summary: Secure, cross-platform Git credential storage with authentication to GitHub, Azure Repos, and other popular Git hosting services.
  description: |
    Git Credential Manager (GCM) is a secure Git credential helper built on .NET that runs on Windows, macOS, and Linux. It aims to provide a consistent and secure authentication experience, including multi-factor auth, to every major source control hosting service and platform.

    GCM supports (in alphabetical order) Azure DevOps, Azure DevOps Server (formerly Team Foundation Server), Bitbucket, GitHub, and GitLab. Compare to Git's built-in credential helpers (Windows: wincred, macOS: osxkeychain, Linux: gnome-keyring/libsecret), which provide single-factor authentication support for username/password only.

    GCM replaces both the .NET Framework-based Git Credential Manager for Windows and the Java-based Git Credential Manager for Mac and Linux.
  license: MIT
  license_family: MIT
  license_file: LICENSE
  doc_url: https://github.com/git-ecosystem/git-credential-manager/blob/release/docs/README.md
  dev_url: https://github.com/git-ecosystem/git-credential-manager

extra:
  recipe-maintainers:
    - sshockwave
