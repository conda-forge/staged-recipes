context:
  version: "0.1.98"

package:
  name: fresh-editor
  version: ${{ version }}

source:
  url: https://github.com/sinelaw/fresh/archive/refs/tags/v${{ version }}.tar.gz
  sha256: f20c70b0a7e26d13e7ab8cae91ce249af249c60c214c4264ac43d1fc01f5d2a9

build:
  number: 0
  script:
    env:
      CARGO_PROFILE_RELEASE_STRIP: symbols
      CARGO_PROFILE_RELEASE_LTO: false
    content:
      - if: unix
        then:
          - export CFLAGS="${CFLAGS} -D_BSD_SOURCE"
          - export LIBCLANG_PATH="${BUILD_PREFIX}/lib"
          - cargo auditable install --locked --no-track --bins -j ${CPU_COUNT} --root ${{ PREFIX }} --path crates/fresh-editor
        else:
          - cargo auditable install --locked --no-track --bins -j %CPU_COUNT% --root %LIBRARY_PREFIX% --path crates\fresh-editor
      - cargo-bundle-licenses --format yaml --output ./THIRDPARTY.yml

requirements:
  build:
    - ${{ stdlib('c') }}
    - ${{ compiler('c') }}
    - ${{ compiler('rust') }}
    - cargo-auditable
    - libclang

tests:
  - script: fresh --help

about:
  homepage: https://sinelaw.github.io/fresh/
  summary: A terminal text editor you can just use.
  description: |
    Why another text editor? Fresh brings the intuitive, conventional UX of editors like VS Code and Sublime Text to the terminal.

    While veterans like Emacs and Vim - and newer editors like Neovim and Helix - are excellent for power users who prefer modal, highly specialized workflows, they often present a steep learning curve for those used to standard GUI interactions. Fresh is built for the developer who wants a familiar, non-modal experience out-of-the-box, without sacrificing the speed and portability of the command line. Keyboard bindings, mouse support, menus, command palette etc. are all designed to be familiar to most modern users.

    Architecturally, Fresh is built to handle multi-gigabyte files or slow network streams efficiently, maintaining a negligible memory overhead regardless of file size. While traditional editors struggle with latency and RAM bloat on large files, Fresh delivers consistent, high-speed performance on any scale.

    The goal for Fresh is to be an intuitive and accessible, high-performance terminal-based editor that "just works" on any hardware, for everyone.
  license: GPL-2.0-only
  license_file:
    - LICENSE
    - THIRDPARTY.yml
  repository: https://github.com/sinelaw/fresh

extra:
  recipe-maintainers:
    - claudiushaag
