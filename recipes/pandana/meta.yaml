{% set name = "pandana" %}
{% set version = "0.4.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  # url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  url: https://github.com/udst/{{ name }}/archive/0.4.2-rc.tar.gz
  sha256: d7e02c0df39e446ea315a8efda974cbe4ce625126cfe09b27c048bbb69aca7a5

build:
  # Uncomment the following line if the package is pure Python and the recipe is exactly the same for all platforms.
  # It is okay if the dependencies are not built for all platforms/versions, although selectors are still not allowed.
  # See https://conda-forge.org/docs/maintainer/knowledge_base.html#noarch-python for more details.
  # noarch: python
  number: 0
  # If the installation is complex, or different between Unix and Windows, use separate bld.bat and build.sh files instead of this key.
  # By default, the package will be built for the Python versions supported by conda-forge and for all major OSs.
  # Add the line "skip: True  # [py<35]" (for example) to limit to Python 3.5 and newer, or "skip: True  # [not win]" to limit to Windows.
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('cxx') }}
  host:
    - python
    - pip
    - cython >=0.25.2
    - numpy >=1.8
  run:
    - python
    - matplotlib >=1.3.1
    - numpy >=1.8
    - osmnet >=0.1.2
    - pandas >=0.17
    - pytables >=3.1
    - requests >=2.0
    - scikit-learn >=0.18.1

test:
  imports:
    - pandana
    - pandana.cyaccess
    - pandana.network

about:
  home: https://github.com/udst/pandana
  license: 'GNU Affero General Public License v3.0'
  license_family: GPL
  license_file: LICENSE
  summary: 'Pandas network analysis - dataframes of network queries, quickly'
  description: |
    Pandana performs hundreds of thousands of network queries in under a second (for walking-scale distances) using a Pandas-like API. The computations are parallelized for use on multi-core computers using an underlying C++ library.
  doc_url: http://udst.github.io/pandana/
  dev_url: https://github.com/udst/pandana

extra:
  recipe-maintainers:
    - smmaurer
