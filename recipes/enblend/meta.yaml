# The version 4.2 while the last one released,
# Really doesn't play well with new systems like conda
{% set version = "4.3.0" %}

package:
  name: enblend-enfuse
  version: {{ version }}

source:
  #url: https://phoenixnap.dl.sourceforge.net/project/enblend/enblend-enfuse/enblend-enfuse-{{ version }}/enblend-enfuse-{{ version }}.tar.gz
  url: https://sourceforge.net/code-snapshots/hg/e/en/enblend/code/enblend-code-b236375ad1a80df4d0b4b15b3f8ff8e15cd31913.zip
  sha256: 8a3b0c3a921a19611ab45b70857bab57fbdb77f17dba890802dffc0acb0fcc3d
  patches:
    - experimental_filesystem.patch

build:
  skip: true  # [not linux]
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make
  host:
    - libpng
    - jpeg
    - libtiff
    - lcms2
    - openexr
    - mercurial
    - gsl
    - boost
    - vigra
    - blas
  run:
    - jpeg
    - vigra
    - gsl

test:
  commands:
    - enblend --help
    - enfuse --help

about:
  home: http://enblend.sourceforge.net/
  license: GPL-2.0-only
  license_family: GPL
  license_file: COPYING
  summary: Enblend combines images that overlap like this into a single large image with no seams.

  description: |
    Enblend blends away the seams in a panoramic image mosaic using a
    multi-resolution spline. Enfuse merges different exposures of the same
    scene to produce an image that looks much like a tone-mapped image.
  doc_url: https://sourceforge.net/p/enblend/_list/hg

extra:
  recipe-maintainers:
    - hmaarrfk
