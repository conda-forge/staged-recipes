schema_version: 1

context:
  name: kconfiglib
  version: 14.1.0

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/kconfiglib-${{ version }}.tar.gz
  sha256: bed2cc2216f538eca4255a83a4588d8823563cdd50114f86cf1a2674e602c93c

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - menuconfig = menuconfig:_main
      - guiconfig = guiconfig:_main
      - genconfig = genconfig:main
      - oldconfig = oldconfig:_main
      - olddefconfig = olddefconfig:main
      - savedefconfig = savedefconfig:main
      - defconfig = defconfig:main
      - alldefconfig = alldefconfig:main
      - allnoconfig = allnoconfig:main
      - allmodconfig = allmodconfig:main
      - allyesconfig = allyesconfig:main
      - listnewconfig = listnewconfig:main
      - setconfig = setconfig:main

requirements:
  host:
    # TODO depends on windows-curses https://github.com/zephyrproject-rtos/windows-curses
    # - windows-curses
    - python ${{ python_min }}.*
    - pip
    - setuptools
  run:
    - python >=${{ python_min }}

tests:
  - python:
      imports:
        - alldefconfig
        - allmodconfig
        - allnoconfig
        - allyesconfig
        - defconfig
        - genconfig
        - guiconfig
        - kconfiglib
        - listnewconfig
        - menuconfig
        - oldconfig
        - olddefconfig
        - savedefconfig
        - setconfig
      pip_check: true
  - requirements:
      run:
        - pip
    script:
      - menuconfig --help
      - guiconfig --help
      - genconfig --help
      - oldconfig --help
      - olddefconfig --help
      - savedefconfig --help
      - defconfig --help
      - alldefconfig --help
      - allnoconfig --help
      - allmodconfig --help
      - allyesconfig --help
      - listnewconfig --help
      - setconfig --help

about:
  summary: A flexible Python Kconfig implementation
  license: MIT
  license_file: LICENSE.txt
  homepage: https://github.com/ulfalizer/Kconfiglib
  documentation: https://github.com/ulfalizer/Kconfiglib
  repository: https://github.com/ulfalizer/Kconfiglib

extra:
  recipe-maintainers:
    - ruben-arts
