{% set version = "8.2.0.8.2" %}
{% set name = "vtk-cdat" %}

package:
    name: {{ name|lower }}
    version: {{ version }}

source:
    url: https://github.com/cdat/vtk-cdat/archive/v{{ version }}.tar.gz
    sha256: 5ba7335c5d843991f47302bfbd79619295fc6ce266d73b15cd83ed02a69f619c

build:
    number: 0
    skip: true  # [win]

    features:
      - mesalib  # [vtk_with_osmesa]

requirements:
  build:
    - {{ compiler('cxx') }} # clang 4.0.1, gcc 7.3.0
    - cmake
    - ninja

    - {{ cdt("mesa-libgl-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("mesa-libgl") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("mesa-dri-drivers") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("xorg-x11-proto-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("xorg-x11-util-macros") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("xorg-x11-server-common") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libXdamage") }}  # [linux and not vtk_with_osmesa]    
    - {{ cdt("libxext-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxext") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libXfixes") }}  # [linux and not vtk_with_osmesa]    
    - {{ cdt("libx11") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libx11-common") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libx11-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxt") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxt-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxtst") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxtst-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libXxf86vm") }}  # [linux and not vtk_with_osmesa]    
    - {{ cdt("libsm") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libsm-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libice") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libice-devel") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libuuid") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxcb") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libxau") }}  # [linux and not vtk_with_osmesa]
    - {{ cdt("libselinux") }}  # [linux and not vtk_with_osmesa]    

  host:
    - python
    - numpy
    - ffmpeg
    - x264
    - mesalib  # [vtk_with_osmesa]

  run:
    - python
    - {{ pin_compatible('numpy') }}
    - future
    - ffmpeg
    - x264
    - mesalib  # [vtk_with_osmesa]

test:
    imports:
        - vtk

about:
    home: https://github.com/cdat/vtk-cdat
    license: BSD 3-Clause
    license_file: Copyright.txt
    summary:
        vtk-cdat is vtk with modules needed by to generate CDAT's vcs plots.
        The Visualization Toolkit (VTK) is an open-source, freely available software
        system for 3D computer graphics, modeling, image processing, volume
        rendering, scientific visualization, and information visualization.

extra:
    recipe-maintainers:
        - doutriaux1
        - sankhesh
        - danlipsa
        - muryanto1
        - xylar
        - downiec
