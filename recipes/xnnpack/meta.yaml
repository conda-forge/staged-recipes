{% set name = "xnnpack" %}
# Pytorch pins to 55d53a4
# https://github.com/pytorch/pytorch/tree/v1.9.0/third_party
# https://github.com/google/XNNPACK/commit/55d53a4
{% set commit = "55d53a4" %}
{% set commit_date = "2021.02.23" %}
# XNNPACK is unreleased software
# We create our own version numbers
{% set version = "0.0.0" + "." + commit_date + "." + commit %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  git_url: https://github.com/google/XNNPACK.git
  git_tag: {{ commit }}
  patches:
    - gcc11_compat.patch

build:
  number: 0
  skip: true   # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - cmake
  host:
    - pthread-stubs
  run:

test:
  commands:
    - echo dummy

about:
  home: https://github.com/google/XNNPACK
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: 'XNNPACK is a highly optimized library of floating-point neural network inference operators for ARM, WebAssembly, and x86 platforms.'

extra:
  recipe-maintainers:
    - hmaarrfk
