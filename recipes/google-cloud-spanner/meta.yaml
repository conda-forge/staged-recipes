{% set name = "google-cloud-spanner" %}
{% set version = "1.8.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 40c7d9a1b9d481936c14aa8063de1f55679ceaa544d529436f75bb0d70027df5

build:
  noarch: python
  number: 0
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed --verbose"

requirements:
  host:
    - python
    - pip
  run:
    - python >=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*
    - google-api-core >=1.4.1, <2.0.0dev
    - google-cloud-core >=0.29.0, <0.30dev
    - grpc-google-iam-v1 >=0.11.4, <0.12dev
    - grpcio >=1.8.2
    - grpcio-gcp >=0.2.2

test:
  imports:
    - google.api
    - google.api_core
    - google.cloud
    - google.cloud.spanner
    - google.cloud.spanner.spanner_admin_database_v1
    - google.cloud.spanner.spanner_admin_database_v1.gapic
    - google.cloud.spanner.spanner_admin_database_v1.gapic.database_admin_client
    - google.cloud.spanner.spanner_admin_database_v1.gapic.database_admin_client_config
    - google.cloud.spanner.spanner_admin_database_v1.gapic.enums
    - google.cloud.spanner.spanner_admin_database_v1.gapic.transports
    - google.cloud.spanner.spanner_admin_database_v1.gapic.transports.database_admin_grpc_transport
    - google.cloud.spanner.spanner_admin_database_v1.proto
    - google.cloud.spanner.spanner_admin_database_v1.protospanner_database_admin_pb2
    - google.cloud.spanner.spanner_admin_database_v1.protospanner_database_admin_pb2_grpc
    - google.cloud.spanner.spanner_admin_database_v1.types
    - google.cloud.spanner.spanner_admin_instance_v1
    - google.cloud.spanner.spanner_admin_instance_v1.gapic
    - google.cloud.spanner.spanner_admin_instance_v1.gapic.enums
    - google.cloud.spanner.spanner_admin_instance_v1.gapic.instance_admin_client
    - google.cloud.spanner.spanner_admin_instance_v1.gapic.instance_admin_client_config
    - google.cloud.spanner.spanner_admin_instance_v1.gapic.transports
    - google.cloud.spanner.spanner_admin_instance_v1.gapic.transports.instance_admin_grpc_transport
    - google.cloud.spanner.spanner_admin_instance_v1.proto
    - google.cloud.spanner.spanner_admin_instance_v1.proto.spanner_instance_admin_pb2
    - google.cloud.spanner.spanner_admin_instance_v1.proto.spanner_instance_admin_pb2_grpc
    - google.cloud.spanner.spanner_admin_instance_v1.types
    - google.cloud.spanner.spanner_v1
    - google.cloud.spanner.spanner_v1.batch
    - google.cloud.spanner.spanner_v1.client
    - google.cloud.spanner.spanner_v1.database
    - google.cloud.spanner.spanner_v1.instance
    - google.cloud.spanner.spanner_v1.keyset
    - google.cloud.spanner.spanner_v1.param_types
    - google.cloud.spanner.spanner_v1.pool
    - google.cloud.spanner.spanner_v1.session
    - google.cloud.spanner.spanner_v1.snapshot
    - google.cloud.spanner.spanner_v1.streamed
    - google.cloud.spanner.spanner_v1.transaction
    - google.cloud.spanner.spanner_v1.types
    - google.cloud.spanner.spanner_v1.gapic
    - google.cloud.spanner.spanner_v1.gapic.enums
    - google.cloud.spanner.spanner_v1.gapic.spanner_client
    - google.cloud.spanner.spanner_v1.gapic.spanner_client_config
    - google.cloud.spanner.spanner_v1.gapic.transports
    - google.cloud.spanner.spanner_v1.gapic.transports.spanner_grpc_transport
    - google.cloud.spanner.spanner_v1.proto
    - google.cloud.spanner.spanner_v1.proto.keys_pb2
    - google.cloud.spanner.spanner_v1.proto.keys_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.mutation_pb2
    - google.cloud.spanner.spanner_v1.proto.mutation_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.query_plan_pb2
    - google.cloud.spanner.spanner_v1.proto.query_plan_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.result_set_pb2
    - google.cloud.spanner.spanner_v1.proto.result_set_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.spanner_pb2
    - google.cloud.spanner.spanner_v1.proto.spanner_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.transaction_pb2
    - google.cloud.spanner.spanner_v1.proto.transaction_pb2_grpc
    - google.cloud.spanner.spanner_v1.proto.type_pb2
    - google.cloud.spanner.spanner_v1.proto.type_pb2_grpc
    - google.oauth2
    - google.protobuf
    - grpc

about:
  home: https://github.com/googleapis/google-cloud-python/tree/master/spanner
  license: Apache 2.0
  summary: 'Google Cloud Spanner API client library'

  description: |
    Cloud Spanner is the world's first fully managed relational database service to
    offer both strong consistency and horizontal scalability for mission-critical online
    transaction processing (OLTP) applications. With Cloud Spanner you enjoy all the
    traditional benefits of a relational database; but unlike any other relational database
    service, Cloud Spanner scales horizontally to hundreds or thousands of servers to handle
    the biggest transactional workloads.

  doc_url: https://googleapis.github.io/google-cloud-python/latest/spanner/index.html
  dev_url: https://github.com/googleapis/google-cloud-python

extra:
  recipe-maintainers:
    - BrentDorsey
