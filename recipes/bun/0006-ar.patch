diff --git a/cmake/tools/SetupLLVM.cmake b/cmake/tools/SetupLLVM.cmake
index d8849ed..9fcac85 100644
--- a/cmake/tools/SetupLLVM.cmake
+++ b/cmake/tools/SetupLLVM.cmake
@@ -9,6 +9,20 @@ endif()
 optionx(ENABLE_LLVM BOOL "If LLVM should be used for compilation" DEFAULT ${DEFAULT_ENABLE_LLVM})
 
 if(NOT ENABLE_LLVM)
+  # Even when LLVM is disabled, we need to ensure CMAKE_AR and CMAKE_RANLIB
+  # are set for subprojects (e.g., tinycc) that need them
+  if(DEFINED ENV{CMAKE_AR} AND NOT CMAKE_AR)
+    set(CMAKE_AR $ENV{CMAKE_AR})
+  endif()
+  if(CMAKE_AR)
+    list(APPEND CMAKE_ARGS -DCMAKE_AR=${CMAKE_AR})
+  endif()
+  if(DEFINED ENV{CMAKE_RANLIB} AND NOT CMAKE_RANLIB)
+    set(CMAKE_RANLIB $ENV{CMAKE_RANLIB})
+  endif()
+  if(CMAKE_RANLIB)
+    list(APPEND CMAKE_ARGS -DCMAKE_RANLIB=${CMAKE_RANLIB})
+  endif()
   return()
 endif()
 
