context:
  version: 1.2.13

package:
  name: bun
  version: ${{ version }}

source:
  - if: target_platform == "osx-64"
    then:
      url: https://github.com/oven-sh/bun/releases/download/bun-v${{ version }}/bun-darwin-x64.zip
      sha256: 25997191ce4235c9a4f6ff54c9d4774060a66cb330992e936c388ea4b38c7762  
  - if: target_platform == "osx-arm64"
    then:
      url: https://github.com/oven-sh/bun/releases/download/bun-v${{ version }}/bun-darwin-aarch64.zip
      sha256: 8154367524d8c298edb269b8d0df61d469ec4194d361c07e4b8d2c65fbbc2efb
  - if: target_platform == "linux-aarch64"
    then:
      url: https://github.com/oven-sh/bun/releases/download/bun-v${{ version }}/bun-linux-aarch64.zip
      sha256: b6a25537bc2d11ebe44a478dd62a8e01dbc9f4e1c4b7d2d730b4a7e9d3580cc9  
  - if: target_platform == "linux-64"
    then:
      url: https://github.com/oven-sh/bun/releases/download/bun-v${{ version }}/bun-linux-x64-baseline.zip
      sha256: 9de5b4a6d392c1de6b9c612bf26e9644bbce47ce09f0c847cedf867d1536ad45
  - if: target_platform == "win-64"
    then:
      url: https://github.com/oven-sh/bun/releases/download/bun-v${{ version }}/bun-windows-x64.zip
      sha256: 4401d9c51168d92563bffe5c249a8b38c05b08a6b88c52ff6b40fdd59071ac7c  

build:
  number: 0
  script:
    - if: unix
      then:
        - ldd ./bun
        - ./bun --help
        - ./bun --version
        - mkdir -p $PREFIX/bin
        - mv bun $PREFIX/bin
    - if: win
      then:
        - mkdir "%LIBRARY_BIN%"
        - move bun.exe "%LIBRARY_BIN%"

tests:
  - script:
    - bun --version

about:
  homepage: https://bun.sh
  repository: https://github.com/oven-sh/bun
  license: MIT
  summary: Bun is a fast all-in-one JavaScript runtime

extra:
  recipe-maintainers:
    - whophil
