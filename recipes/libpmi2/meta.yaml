{% set version = "25-05-2-1" %}
{% set build = 0 %}

package:
  name: libpmi2
  version: {{ version.replace("-", ".") }}

source:
  - url: https://github.com/SchedMD/slurm/archive/refs/tags/slurm-{{ version }}.tar.gz
    sha256: 6c5b7a95a82e4bbc8ca4093e8e4d38468cfb9f98e344267bbd17d97ca04558dd 

build:
  number: {{ build }}
  skip: true  # [win or osx]
  run_exports:
    - {{ pin_subpackage('libpmi2', min_pin='x.x.x', max_pin='x') }}

requirements:
  build:
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
    - make
  host:
    - munge

test:
  commands:
    - test -f $PREFIX/lib/libpmi2.so 
    - test -f $PREFIX/include/slurm/pmi2.h

about:
  home: https://www.schedmd.com/
  license: GPL-2.0-or-later
  license_file: COPYING
  summary: PMI2 (Process Management Interface) library from Slurm
  description: |
    This package provides the PMI2 library (libpmi2.so) and headers from the Slurm
    workload manager, enabling PMI2 support for MPI implementations.

extra:
  recipe-maintainers:
    - j34ni
