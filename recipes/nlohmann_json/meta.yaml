{% set version = "3.5.0" %}
{% set sha256 = "e0b1fc6cc6ca05706cce99118a87aca5248bd9db3113e703023d23f044995c1d" %}

package:
  name: nlohmann_json
  version: {{ version }}

source:
  fn: json-{{ version }}.tar.gz
  url: https://github.com/nlohmann/json/archive/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  skip: true  # [win and vc<14]

requirements:
  build:
    - cmake >=3.8
    - ninja
    - {{ compiler('cxx') }}

test:
  commands:
    - test -f ${PREFIX}/lib/cmake/nlohmann_json/nlohmann_jsonConfig.cmake                           # [unix]
    - test -f ${PREFIX}/include/nlohmann/json.hpp                                                   # [unix]

    - if exist %LIBRARY_LIB%\cmake\nlohmann_json\nlohmann_jsonConfig.cmake (exit 0) else (exit 1)   # [win]
    - if exist %LIBRARY_INC%\nlohmann\json.hpp (exit 0) else (exit 1)                               # [win]

about:
  home: https://nlohmann.github.io/json/
  license: MIT
  license_file: LICENSE.MIT
  license_family: MIT
  summary: JSON for Modern C++
  dev_url: https://github.com/nlohmann/json

extra:
  recipe-maintainers:
    - nicoddemus
    - tadeu
