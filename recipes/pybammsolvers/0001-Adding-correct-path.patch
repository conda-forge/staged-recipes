From 1401e72ae684937bb473e8db92ee51f07948ef7e Mon Sep 17 00:00:00 2001
From: Pradyot Ranjan <99216956+pradyotRanjan@users.noreply.github.com>
Date: Sun, 16 Feb 2025 13:09:41 +0530
Subject: [PATCH] Adding path and suitesparse_root

Signed-off-by: Pradyot Ranjan <99216956+pradyotRanjan@users.noreply.github.com>
---
 setup.py | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/setup.py b/setup.py
index 65e3e6c..b89d03b 100644
--- a/setup.py
+++ b/setup.py
@@ -12,9 +12,11 @@ from setuptools.command.build_ext import build_ext
 
 
 default_lib_dir = (
-    "" if system() == "Windows" else str(Path(__file__).parent.resolve() / ".idaklu")
+    "" if system() == "Windows" else str(Path(os.environ["PREFIX"]) / "lib")
 )
 
+suitesparse_root_dir = str(Path(os.environ["PREFIX"]) / "include" / "suitesparse")
+
 # ---------- set environment variables for vcpkg on Windows ----------------------------
 
 
@@ -64,7 +66,7 @@ class CMakeBuild(build_ext):
             ("sundials_root", "sundials_root"),
         )
         if not self.suitesparse_root:
-            self.suitesparse_root = os.path.join(default_lib_dir)
+            self.suitesparse_root = os.path.join(suitesparse_root_dir)
         if not self.sundials_root:
             self.sundials_root = os.path.join(default_lib_dir)
 
@@ -196,7 +198,7 @@ class CustomInstall(install):
     def finalize_options(self):
         install.finalize_options(self)
         if not self.suitesparse_root:
-            self.suitesparse_root = default_lib_dir
+            self.suitesparse_root = suitesparse_root_dir
         if not self.sundials_root:
             self.sundials_root = default_lib_dir
 
-- 
2.41.0