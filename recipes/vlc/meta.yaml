{% set version = "3.0.20" %}

package:
  name: vlc
  version: {{ version }}

source:
  url: https://get.videolan.org/vlc/{{ version }}/vlc-{{ version }}.tar.xz
  sha256: adc7285b4d2721cddf40eb5270cada2aaa10a334cb546fd55a06353447ba29b5
  patches:
  {% if version.startswith("4") %}
    - 7114-fix_undefined_variable.patch
  {% endif %}

build:
  number: 0
  skip: true  # [not linux]

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
    - pkg-config
    - automake
    - lua
    - libtool
    - gnuconfig
    - autoconf
    - scdoc
    - bison
    - flex
  host:
    - xorg-xorgproto
    - libgl-devel
    - ffmpeg
    # Specify LGPL so as not get the whole thing to be GPL'ed
    - ffmpeg  *=lgpl*
{% if version.startswith("3") %}
    - qt-main
{% else %}
    - qt6-main
{% endif %}

test:
  commands:
    - cvlc --version

about:
  home: https://videolan.org/
  summary: VLC is a free and open source cross-platform multimedia player and framework that plays most multimedia files as well as DVDs, Audio CDs, VCDs, and various streaming protocols.
  description: |
    VLC is a libre and open source media player and multimedia engine,
    focused on playing everything, and running everywhere.

    VLC can play most multimedia files, discs, streams, devices and is also able to
    convert, encode, stream and manipulate streams into numerous formats.

    VLC is used by many over the world, on numerous platforms, for very different use cases.
    The engine of VLC can be embedded into 3rd party applications, and is called libVLC.

    VLC is part of the VideoLAN project and
    is developed and supported by a community of volunteers.

    The VideoLAN project was started at the university Ã‰cole Centrale Paris who
    relicensed VLC under the GPLv2 license in February 2001. Since then, VLC has
    been downloaded billions of times.

  license: GPL-2.0-or-later AND LGPL-2.1-only
  license_file:
    - COPYING
    - COPYING.lib
  dev_url: https://code.videolan.org/videolan/vlc

extra:
  recipe-maintainers:
    - hmaarrfk
