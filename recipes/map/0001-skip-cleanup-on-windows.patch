cat > recipes/map/0001-skip-cleanup-on-windows.patch <<'EOF'
diff --git a/setup.py b/setup.py
--- a/setup.py
+++ b/setup.py
@@ -17,7 +17,11 @@ class PostInstallCommand(install):
     """Post-installation for installation mode."""
     def run(self):
         install.run(self)
-        atexit.register(cleanup)
+        # Avoid cleanup on Windows (files can be locked during CI install).
+        # Keep cleanup on Unix-like platforms.
+        import os
+        if os.name != "nt":
+            atexit.register(cleanup)
EOF