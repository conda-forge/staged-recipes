# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

# generated with https://gist.github.com/bollwyvl/2a74c4ec91918326820569c939357220

context:
  version: "2.9.0"
  # python 3.13+ would need pyarrow 0.15.x (unlikely at this point)
  # python 3.14+ would need pyoxigraph 0.3.x (unlikely at this point)
  python_check_max: "3.12"
  summary: Powerful [R2]RML engine to create RDF knowledge graphs from heterogeneous data sources.
  license: Apache-2.0
  test_skips: issue_316_a issue_316_b math_floor math_gcd RMLIMTC0000 RMLTC0000 RMLTC0001a RMLTC0001a RMLTC0001b RMLTC0001b RMLTC0002a RMLTC0002a RMLTC0002b RMLTC0002b RMLTC0003c RMLTC0003c RMLTC0004a RMLTC0004a RMLTC0005a RMLTC0005a RMLTC0007a RMLTC0007a RMLTC0007b RMLTC0007b RMLTC0007c RMLTC0007c RMLTC0007d RMLTC0007d RMLTC0007e RMLTC0007e RMLTC0007f RMLTC0007f RMLTC0007g RMLTC0007g RMLTC0008a RMLTC0008a RMLTC0008b RMLTC0008b RMLTC0008c RMLTC0008c RMLTC0009a RMLTC0009a RMLTC0009b RMLTC0009b RMLTC0010a RMLTC0010a RMLTC0010b RMLTC0010b RMLTC0010c RMLTC0010c RMLTC0011b RMLTC0011b RMLTC0012a RMLTC0012a RMLTC0012b RMLTC0012b RMLTC0013a RMLTC0015a RMLTC0015a RMLTC0016a triples_map_without_po

recipe:
  name: morph-kgc-split
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/m/morph-kgc/morph_kgc-${{ version }}.tar.gz
  sha256: 39d06525b74449b7377372c702456063b9886676c0466f14ed489ef8a9f65952

build:
  number: 0
  noarch: python

outputs:
  - package:
      name: morph-kgc
    build:
      noarch: python
      script:
        - ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation --disable-pip-version-check
    requirements:
      host:
        - hatchling >=1.11.0
        - pip
        - python ${{ python_min }}.*
      run:
        - elementpath >=4.0.0,<5.0.0
        - falcon >=3.0.0,<5.0.0
        - jsonpath-python >=1.0.6,<2.0.0
        - pandas >=2.1.0,<3.0.0
        - pyoxigraph >=0.3.0,<0.4.0
        - python >=${{ python_min }}
        - python-duckdb >=1.0.0,<2.0.0
        - rdflib >=6.1.1,<8.0.0
        - ruamel.yaml >=0.18.0,<0.19.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
  - package:
      name: morph-kgc-with-kafka
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - kafka-python >=2.0.2,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [kafka])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-sqlite
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - sql-metadata >=2.6.0,<3.0.0
        - sqlalchemy >=2.0.0,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [sqlite])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-mysql
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - cryptography >=42.0.0,<43.0.0
        - pymysql >=1.1.0,<2.0.0
        - sql-metadata >=2.6.0,<3.0.0
        - sqlalchemy >=2.0.0,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [mysql])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-postgresql
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - psycopg >=3.0.0,<4.0.0
        - sql-metadata >=2.6.0,<3.0.0
        - sqlalchemy >=2.0.0,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [postgresql])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-oracle
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - oracledb >=2.5.0,<9.0.0
        - sql-metadata >=2.6.0,<3.0.0
        - sqlalchemy >=2.0.0,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [oracle])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-mssql
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - pymssql >=2.2.7,<3.0.0
        - sql-metadata >=2.6.0,<3.0.0
        - sqlalchemy >=2.0.0,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [mssql])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-excel
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - odfpy >=1.4.1,<2.0.0
        - openpyxl >=3.0.0,<4.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [excel])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-tabular
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - pyarrow >=14.0.0,<16.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [tabular])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-spss
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - pyreadstat >=1.2.0,<2.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [spss])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-snowflake
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - snowflake-sqlalchemy >=1.7.3,<2.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [snowflake])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-databricks
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - databricks-sqlalchemy >=2.0.4,<3.0.0
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
    about:
      summary: ${{ summary }} (with [databricks])
      license: Apache-2.0
      license_file: LICENSE
  - package:
      name: morph-kgc-with-all
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage("morph-kgc", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-databricks", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-excel", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-kafka", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-mssql", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-mysql", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-oracle", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-postgresql", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-snowflake", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-spss", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-sqlite", exact=True) }}
        - ${{ pin_subpackage("morph-kgc-with-tabular", exact=True) }}
    tests:
      - python:
          imports: morph_kgc
          pip_check: true
          python_version:
            - ${{ python_min }}.*
            - ${{ python_check_max }}.*
      - requirements:
          run:
            - odfpy >=1.4.1,<2.0.0
            - openpyxl >=3.0.0,<4.0.0
            - pyarrow >=14.0.0,<20.0.0
            - pytest >=8.0.0,<9.0.0
            - pytest-cov
            - python ${{ python_min }}.*
            - sql-metadata >=2.6.0,<3.0.0
            - sqlalchemy >=2.0.0,<3.0.0
        files:
          source:
            - test/
        script:
          - coverage run --source=morph_kgc --branch -m pytest -vv --tb=long --color=yes -k "not (${{ test_skips | split | sort | join(" or ") }})"
          - coverage report --show-missing --skip-covered --fail-under=57
    about:
      summary: ${{ summary }} (with [all])
      license: Apache-2.0
      license_file: LICENSE
about:
  summary: ${{ summary }}
  license: Apache-2.0
  license_file: LICENSE
  homepage: https://github.com/morph-kgc/morph-kgc
  documentation: https://morph-kgc.readthedocs.io

extra:
  feedstock-name: morph-kgc
  recipe-maintainers:
    - bollwyvl
