# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  version: "1.3.4"

package:
  name: minhook
  version: ${{ version }}

source:
  - url: https://github.com/TsudaKageyu/minhook/archive/refs/tags/v${{ version }}.tar.gz
    sha256: 1aebeae4ca898330c507860acc2fca2eb335fe446a3a2b8444c3bf8b2660a14e

build:
  number: 0
  skip: unix
  script: build.nu

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib("c") }}
    - cmake >=3.15
    - ninja
    - nushell
  host: []

tests:
  - if: win
    then:
      script:
        - if not exist "%LIBRARY_LIB%\minhook.lib" exit 1
        - if not exist "%LIBRARY_INC%\MinHook.h" exit 1
      requirements:
        build:
          - ${{ compiler('c') }}

about:
  homepage: https://github.com/TsudaKageyu/minhook
  summary: "The Minimalistic x86/x64 API Hooking Library for Windows"
  description: |
    MinHook is a Windows API hooking library originally created by Tsuda Kageyu.

    Features:
    - Simple and easy-to-use API
    - Supports both x86 and x64 architectures
    - Thread-safe hooking operations
    - Minimal overhead and high performance
    - Well-tested and stable
    - No dependencies on external libraries
    - Visual Studio 2022 support (as of v1.3.4)
    - Native CMake build system support
    - Improved error handling for thread operations
    - Fixed compilation with Clang and as C++ code

    MinHook is particularly useful for:
    - API monitoring and debugging
    - Software reverse engineering
    - Runtime patching and modification
    - Security research and analysis
    - Creating debugging tools and profilers

    The library provides a clean C API that allows developers to:
    - Hook Windows API functions
    - Intercept function calls
    - Modify function behavior at runtime
    - Chain multiple hooks together
    - Enable/disable hooks dynamically

    Version 1.3.4 brings significant improvements including better build system
    support, enhanced error handling, and broader compiler compatibility.

    Note: This library is Windows-only and requires appropriate permissions
    to modify running processes.

  license: BSD-2-Clause
  license_file: LICENSE.txt
  repository: https://github.com/TsudaKageyu/minhook
  documentation: https://github.com/TsudaKageyu/minhook/blob/master/README.md

extra:
  recipe-maintainers:
    - phreed
