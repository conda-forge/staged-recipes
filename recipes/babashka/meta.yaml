{% set git_url = 'github.com/babashka/babashka' %}
{% set version = '1.4.192' %}

{% set name = git_url.split('/')[-1].lower() %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  git_url: https://{{ git_url }}.git
  git_rev: v{{ version }}

build:
  script:
    - script/uberjar  # [unix]
    - script/compile  # [unix]
    - script/uberjar.bat  # [win]
    - script/compile.bat  # [win]
  number: 0

# requirements:
#   build:
#     - {{ stdlib('c') }}  # [unix]
#     - {{ compiler('c') }}  # [unix]
#     - {{ stdlib('m2w64_c') }}  # [win]
#     - {{ compiler('m2w64_c') }}  # [win]
#     - {{ compiler('go-cgo') }}
#     - go-licenses

test:
  commands:
    - bb help

about:
  home: https://babashka.org/
  summary: Native, fast starting Clojure interpreter for scripting 
  description: |
    Babashka is a native Clojure interpreter for scripting with fast startup. Its main
    goal is to leverage Clojure in places where you would be using bash otherwise.
  license: EPL-1.0
  license_file:
    - LICENSE
  dev_url: https://{{ git_url }}

extra:
  recipe-maintainers:
    - seowalex
