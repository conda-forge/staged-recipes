= Mumble VoIP Package Roadmap
:toc:
:toclevels: 2

== Current Status

The mumble-voip conda-forge package is under development with the following components:

* ✅ Windows build with MSVC flag fixes
* ✅ **macOS build (using conda-forge best practices)**
* ⚠️  Linux build (untested)
* ✅ Server package (`mumble-server`) - primary focus
* ⚠️  Client package (`mumble`) - commented out for now

== Recent Changes

=== macOS Build Configuration Modernization

==== Approach
- Uses conda-forge recommended `-D_LIBCPP_DISABLE_AVAILABILITY` flag
- Sets only `MACOSX_SDK_VERSION: "11.0"` in variants.yaml
- Lets conda-forge-pinning handle deployment targets and compiler selection
- Simplified to ~6 lines of clean macOS build configuration
- Follows conda-forge C++ best practices

=== Variants Configuration Cleanup

- `MACOSX_SDK_VERSION: "11.0"` for osx x86_64 (not in conda-forge-pinning)

== Technical Implementation

=== macOS C++ Compatibility Strategy

The new approach uses the standard conda-forge method for C++ programs that need newer features on older macOS:

```cmake
CMAKE_CXX_FLAGS = "-D_LIBCPP_DISABLE_AVAILABILITY"
```

This flag:
- Disables C++ standard library availability checks
- Allows use of newer C++ features on older deployment targets
- Is the recommended approach per conda-forge documentation
- Works with conda's automatic SDK and compiler management

=== Build Configuration

Current `variants.yaml`:
```yaml
# Only non-default values from conda-forge-pinning are set here
MACOSX_SDK_VERSION:
  - if: osx and x86_64
    then: "11.0"
```

Current macOS build flags:
```cmake
CMAKE_CXX_FLAGS = "-Wno-deprecated-declarations -D_LIBCPP_DISABLE_AVAILABILITY"
CMAKE_C_FLAGS = "-Wno-deprecated-declarations -std=c11"
```
