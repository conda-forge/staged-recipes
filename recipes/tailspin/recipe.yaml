context:
  version: "5.5.0"

package:
  name: tailspin
  version: ${{ version }}

source:
  url: https://github.com/bensadeh/tailspin/archive/refs/tags/${{ version }}.tar.gz
  sha256: E9D7CEFB865585BB048A2CCBFCC1F900AE344134D71132A7C48EE0D5AF09CDAF

build:
  number: 0
  script:
    env:
      CARGO_PROFILE_RELEASE_STRIP: symbols
      CARGO_PROFILE_RELEASE_LTO: fat
    content:
      - if: unix
        then:
          - cargo auditable install --locked --no-track --bins -j ${CPU_COUNT} --root ${{ PREFIX }} --path .
        else:
          - cargo auditable install --locked --no-track --bins -j %CPU_COUNT% --root %LIBRARY_PREFIX% --path .
      - cargo-bundle-licenses --format yaml --output ./THIRDPARTY.yml

requirements:
  build:
    - ${{ stdlib('c') }}
    - ${{ compiler('c') }}
    - ${{ compiler('rust') }}
    - cargo-bundle-licenses
    - cargo-auditable
  run:
    - less

tests:
  - script: tspin --help

about:
  homepage: https://github.com/bensadeh/tailspin
  summary: A log file highlighter.
  description: |
    Features:
    - View (or tail) any log file of any format
    - No setup or config required
    - Highlights numbers, dates, IP-addresses, UUIDs, URLs and more
    - All highlight groups are customizable
    - Easy to integrate with other commands
  license: MIT
  license_file:
    - LICENCE
    - THIRDPARTY.yml

extra:
  recipe-maintainers:
    - claudiushaag
