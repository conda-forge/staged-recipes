schema_version: 1

context:
  name: pyvisgen
  version: 0.7.2
  python_min: 3.11

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/pyvisgen-${{ version }}.tar.gz
  sha256: 4ab94c910000d1fdfce1e08cdebad38e9ba4df501f6d5a3ad152083d0f888b0c

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - pyvisgen = pyvisgen.tools.cli:main

requirements:
  host:
    - python ${{ python_min }}.*
    - hatch-vcs
    - hatchling
    - pip
  run:
    - python >=${{ python_min }}
    - astropy-base <=6.1.0
    - click
    - h5py
    - joblib
    - natsort
    - numpy
    - pandas
    - pydantic >=2.12.3
    - pyvisgrid
    - rich
    - rich-click >=1.8.9
    - scipy
    - toml
    - pytorch
    - tqdm
    - radioft

tests:
  - python:
      imports:
        - pyvisgen
      pip_check: true
      python_version: ${{ python_min }}.*
  - requirements:
      run:
        - pip
    script:
      - pyvisgen --help

about:
  homepage: https://github.com/radionets-project
  summary: Simulate radio interferometer observations and visibility generation with the RIME formalism.
  license: MIT
  license_family: MIT
  license_file: LICENSE
  description: |
    Pyvisgen is a python implementation of the Radio Interferometer Measurement Equation (RIME)
    formalism inspired by the VISGEN tool of the MIT Array Performance Simulator developed at
    Haystack Observatory. The RIME is used to simulate the measurement process of a radio interferometer.
  documentation: https://pyvisgen.readthedocs.io/
  repository: https://github.com/radionets-project/pyvisgen

extra:
  recipe-maintainers:
    - aknierim
    - Kevin2
