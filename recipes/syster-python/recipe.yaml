# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json

context:
  version: "0.3.1_alpha"
  git_tag: ${{ version | replace('_', '-') }}

package:
  name: syster-python
  version: ${{ version }}

source:
  - url: https://github.com/jade-codes/syster-base/archive/refs/tags/v${{ git_tag }}.tar.gz
    sha256: 364c55aca00876c2ad1bde8acc177a5604f801ebfc69e513757ba05ff247a586
    target_directory: syster-base
  - path: binding/
  - path: LICENSE.md

build:
  number: 0
  script:
    - cargo-bundle-licenses --format yaml --output THIRDPARTY.yml
    - ${{ PYTHON }} -m pip install . -vv --no-build-isolation

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('rust') }}
    - ${{ stdlib('c') }}
    - cargo-bundle-licenses
  host:
    - python
    - maturin >=1.2.2,<2
    - pip
  run:
    - python

tests:
  - python:
      imports:
        - syster
      pip_check: true

about:
  homepage: https://github.com/jade-codes/syster-base
  summary: Python bindings for SysML v2 and KerML parsing, AST, and semantic analysis
  description: |
    Python bindings for the Syster Base library, providing SysML v2 and KerML
    parsing, AST, and semantic analysis. Built with PyO3 and maturin, this
    package exposes Rust-powered parsing, abstract syntax tree structures,
    incremental semantic analysis, name resolution with import handling,
    and SysML v2 standard library support to Python.
  license: MIT
  license_file:
    - LICENSE.md
    - THIRDPARTY.yml
  repository: https://github.com/jade-codes/syster-base

extra:
  recipe-maintainers:
    - phreed
    - jade-codes
