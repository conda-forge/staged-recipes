{% set version = "0.25" %}

package:
  name: charliecloud
  version: {{ version }}

source:
  url: https://github.com/hpc/charliecloud/releases/download/v{{ version }}/charliecloud-{{ version }}.tar.gz
  sha256: 62d6fd211e3a573f54578e1b01d5c298f9788b7eaf2db46ac94c2dcef604cc94

build:
  number: 0
  skip: true  # [not linux]
  script:
    - ./configure --prefix=$PREFIX
    - make
    - make install

  missing_dso_whitelist:
    - $RPATH/libsotest.so.1
    
requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - sysroot_linux-64 2.17  # [linux64]
    - make
    - cmake
#     - squashfs-tools >=4.2
#     - squashfuse
#     - requests
#     - buildah

    
  host:
    - python
    - squashfs-tools >=4.2
    - squashfuse
    - requests
#     - buildah

  run:
    - python
    - squashfs-tools >=4.2
    - squashfuse
    - requests
#     - buildah

test:
  commands:
    - echo "testing..."

about:
  home: https://hpc.github.io/charliecloud
  license: Apache-2.0
  license_file: LICENSE
  summary: Lightweight user-defined software stacks for high-performance computing.

  description: Lightweight user-defined software stacks for high-performance computing.


  dev_url: https://github.com/hpc/charliecloud
  doc_url: https://hpc.github.io/charliecloud

extra:
  recipe-maintainers:
    - ngam
