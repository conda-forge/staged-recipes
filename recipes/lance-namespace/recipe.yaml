context:
  version: "0.2.1"

recipe:
  name: lance-namespace-split
  version: ${{ version }}

source:
  url: https://github.com/lance-format/lance-namespace/archive/refs/tags/v${{ version }}.tar.gz
  sha256: ff3b57aecb56ee7c3d40b1fccecab9989df8ddd9752c69cdb5bff6fc10a1d0df

build:
  number: 0

outputs:
  - package:
      name: lance-namespace-urllib3-client
      version: ${{ version }}
    build:
      noarch: python
      script: |
        cd python/lance_namespace_urllib3_client
        python -m pip install . -vv --no-deps
      number: 0
    requirements:
      host:
        - python ${{ python_min }}.*
        - pip
        - hatchling
      run:
        - python >=${{ python_min }}
        - urllib3 >=1.25.3,<3.0.0
        - python-dateutil >=2.8.2
        - pydantic >=2
        - typing-extensions >=4.7.1
    tests:
      - python:
          imports:
            - lance_namespace_urllib3_client
          pip_check: true
          python_version: ${{ python_min }}.*
    about:
      summary: Auto-generated Python client for Lance Namespace REST APIs
      description: Lance Namespace Specification
      license: Apache-2.0
      license_file: LICENSE
      homepage: https://lance.org
      repository: https://github.com/lance-format/lance-namespace
      documentation: https://lance.org/format/namespace/

  - package:
      name: lance-namespace
      version: ${{ version }}
    build:
      noarch: python
      script: |
        cd python/lance_namespace
        python -m pip install . -vv --no-deps
      number: 0
    requirements:
      host:
        - python ${{ python_min }}.*
        - pip
        - hatchling
      run:
        - python >=${{ python_min }}
        - ${{ pin_subpackage('lance-namespace-urllib3-client', exact=True) }}
    tests:
      - python:
          imports:
            - lance_namespace
          pip_check: true
          python_version: ${{ python_min }}.*
    about:
      summary: Lance Namespace interface and plugin registry
      description: Lance Namespace interface and plugin registry
      license: Apache-2.0
      license_file: LICENSE
      homepage: https://lance.org
      repository: https://github.com/lance-format/lance-namespace
      documentation: https://lance.org/format/namespace/

about:
  homepage: https://lance.org
  summary: Lance Namespace is an open specification for describing access and operations against a collection of tables in a multimodal lakehouse
  description: Lance Namespace is an open specification for describing access and operations against a collection of tables in a multimodal lakehouse
  license: Apache-2.0
  license_file: LICENSE
  repository: https://github.com/lance-format/lance-namespace
  documentation: https://lance.org/format/namespace/

extra:
  feedstock-name: lance-namespace
  recipe-maintainers:
    - yhori991
