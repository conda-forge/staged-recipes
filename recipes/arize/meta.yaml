{% set name = "arize" %}
{% set version = "7.51.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/arize-{{ version }}.tar.gz
  sha256: 70a436daaa07b2a1c1dc069cff9332b5937abdf856c83a81a4a3fcfbdd9d29bc

build:
  number: 0
  noarch: python

requirements:
  host:
    - python {{ python_min }}
    - hatchling
    - pip
  run:
    - python >={{ python_min }}

outputs:
  - name: {{ name|lower }}
    build:
      script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
        - hatchling
        - pip
      run:
        - python >={{ python_min }}
        - requests-futures ==1.0.0
        - googleapis-common-protos >=1.51.0,<2
        - protobuf >=4.21.0,<7
        - pandas >=0.25.3,<3
        - pyarrow >=0.15.0
        - tqdm >=4.60.0,<5
        - pydantic >=2.0.0,<3
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-autoembeddings
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - transformers >=4.25,<5
        - tokenizers >=0.13,<1
        - datasets >=2.8,<3,!=2.14.*
        - pytorch >=1.13,<3
        - pillow >=8.4.0,<11
    test:
      imports:
        - arize
        - arize.pandas.embeddings
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-nlp-metrics
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - nltk >=3.0.0,<4
        - sacrebleu >=2.3.1,<3
        - rouge-score >=0.1.2,<1
        - evaluate >=0.3,<1
        - datasets !=2.14.*
    test:
      imports:
        - arize
        - arize.pandas.generative.nlp_metrics
        - arize.pandas.generative.llm_evaluation
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-datasets
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - typing-extensions >=4,<5
        - wrapt >=1.12.1,<2
        - opentelemetry-semantic-conventions >=0.43b0,<1
        - openinference-semantic-conventions >=0.1.6,<1
        - opentelemetry-sdk >=1.25.0,<2
        - opentelemetry-exporter-otlp >=1.25.0,<2
        - deprecated
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-tracing
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - opentelemetry-semantic-conventions >=0.43b0,<1
        - openinference-semantic-conventions >=0.1.12,<1
        - deprecated
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-prompthub
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - gql >=3.0.0,<4.0.0
        - requests-toolbelt >=1.0.0
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

  - name: {{ name|lower }}-with-prompthub-vertexai
    build:
      number: 0
      noarch: python
    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }}
        - {{ pin_subpackage(name|lower, max_pin='x.x.x') }}
        - google-cloud-aiplatform >=1.0.0
    test:
      imports:
        - arize
      requires:
        - python {{ python_min }}

about:
  home: https://github.com/Arize-ai/client_python
  summary: A helper library to interact with Arize AI APIs
  dev_url: https://github.com/Arize-ai/client_python
  license: BSD-3-Clause
  license_file: LICENSE.md

extra:
  recipe-maintainers:
    - zephyap
  feedstock-name: {{ name|lower }}
