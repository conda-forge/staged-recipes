{% set name = "psychopy" %}
{% set version = "3.1.2" %}
{% set sha256 = "e54c9582dde91652703077c9b23555cf22ad04429f2cc20c98dd16489c13eb55" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://github.com/psychopy/psychopy/archive/{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  script: python -m pip install --no-deps -vv .
  entry_points:
    - psychopy = psychopy.app.psychopyApp:main

requirements:
  build:
    - cffi
    - configobj
    - future
    - gevent
    - json_tricks
    - matplotlib
    - pandas
    - pyglet
    - numpy
    - opencv
    - openpyxl
    - moviepy
    - msgpack-python
    - pillow
    - pip
    - psutil
    - pyobjc-core  # [osx]
    - pyobjc-framework-quartz  # [osx]
    - pyopengl
    - pyosf
    - pyqt
    - pyserial
    - pysoundfile
    - pytables
    - python
    - python-bidi
    - python-sounddevice
    - pyyaml
    - pyzmq
    - requests
    - scipy
    - setuptools
    - wxpython
    - xlrd
    - wxpython

  run:
    - cffi
    - configobj
    - future
    - gevent
    - json_tricks
    - matplotlib
    - pandas
    - pyglet
    - numpy
    - opencv
    - openpyxl
    - moviepy
    - msgpack-python
    - pillow
    - pip
    - psutil
    - pyobjc-core  # [osx]
    - pyobjc-framework-quartz  # [osx]
    - pyopengl
    - pyosf
    - pyqt
    - pyserial
    - pysoundfile
    - pytables
    - python
    - python-bidi
    - python-sounddevice
    - pyyaml
    - pyzmq
    - requests
    - scipy
    - setuptools
    - wxpython
    - xlrd
    - wxpython

test:
  imports:
    - psychopy
    - psychopy.app
    - psychopy.data
    - psychopy.event
    - psychopy.experiment
    - psychopy.gui
    - psychopy.hardware
    - psychopy.monitors
    - psychopy.preferences
    - psychopy.sound
    - psychopy.visual

about:
  home: http://www.psychopy.org
  license: GPL-3.0
  summary: 'Psychology experiment software in Python'
  license_family: GPL
  license_file: LICENSE
  description: |
    PsychoPy is an open-source package for creating psychology stimuli in
    Python (A real and free alternative to Matlab). PsychoPy combines the
    graphical strengths of OpenGL with the easy Python syntax to give
    psychophysics a free and simple stimulus presentation and control package.
  doc_url: http://psychopy.org/documentation.html
  dev_url: https://github.com/psychopy/psychopy

extra:
  recipe-maintainers:
    - kastman
    - hoechenberger
    - peircej
