context:
  version: "2.0.0"

package:
  name: libmgui
  version: ${{ version }}

source:
  url: https://github.com/mhekkel/libmgui/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 9c9e49c8c42d1448c8a798d0498c21e1a13fe62b08ba48283601a4b924601ec3

build:
  number: 0
  skip:
    # Remove windows in the future when we have windows support
    - not linux
  script:
    - if: linux
      then: |
        set -exo pipefail
        cmake -S . -B build ${CMAKE_ARGS} -DBUILD_SHARED_LIBS=ON
        cmake --build build --parallel ${CPU_COUNT}
        cmake --install build

requirements:
  build:
    - ${{ compiler("cxx") }}
    - ${{ stdlib("c") }}
    - cmake
    - pkg-config
    - if: linux
      then:
        - make
  host:
    - expat
    - freetype
    - glib
    - libgxrio
    - maartens_resource_compiler
    - zeem
    - if: linux
      then:
        - gtk4
        - libcanberra
    - zlib
  run_exports:
    - ${{ pin_subpackage("libmgui", upper_bound="x") }}

tests:
  - package_contents:
      include:
        - mgui/*
      lib:
        - libmgui.so

about:
  homepage: https://github.com/mhekkel/libmgui
  repository: https://github.com/mhekkel/libmgui
  license: BSD-2-Clause
  license_file: LICENSE
  summary: "Class library for creating gui applications"
  description: |
    This library provides a cross platform application framework.

    The library uses a strict division between client code that is OS agnostic and implementation code using bridge patterns.

extra:
  recipe-maintainers:
    - eunos-1128
