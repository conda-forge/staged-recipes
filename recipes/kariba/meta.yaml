{% set name = "Kariba" %}
{% set version = "1.0.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/antonpannekoek/kariba/archive/refs/tags/v{{ version }}.tar.gz
  sha256: f08b75ebd2ae84eb0f716d28eeb64d2adcae9daf9224a5e8ce06edab1ad6f75e

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ stdlib('c') }}
    - {{ compiler('cxx') }}
    - make
  host:
    - gsl
    - libopenblas   # [linux]
    - libgomp       # [linux]
    - llvm-openmp   # [osx]

test:
  commands:
    - ls $(dirname $(which kariba_test))/../include/kariba/*.hpp
    - ls $(dirname $(which kariba_test))/../lib/libkariba.so   # [linux]
    - ls $(dirname $(which kariba_test))/../lib/libkariba.dylib   # [osx]
    - kariba_test

about:
  home: https://github.com/antonpannekoek/kariba
  summary: 'A library to support semi-analytical, multi-zone jet models designed for modelling steady-state SEDs of jets'
  description: |
    Kariba is a small C++ library to support jet models. In
    particular, it was built to support BHJet, a semi-analytical,
    multi-zone jet model designed for modelling steady-state SEDs of
    jets launched from accreting black holes.
  license: MIT
  license_family: MIT
  license_file: LICENSE
  doc_url: https://antonpannekoek.github.io/kariba/
  dev_url: https://github.com/antonpannekoek/kariba

extra:
  recipe-maintainers:
    - evertrol
    - maklinger
    - rubyduncan
