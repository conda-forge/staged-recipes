context:
  version: "0.4.1"

package:
  name: bibtex-updater
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/b/bibtex_updater/bibtex_updater-${{ version }}.tar.gz
  sha256: 28d00fd15cb9c6d6c670f0c9607e9dde48d847df983ce8d6fbbbc3403252395a

build:
  noarch: python
  script: python -m pip install . -vv
  number: 0
  python:
    entry_points:
      - bibtex-update = bibtex_updater.cli.updater_cli:main
      - bibtex-check = bibtex_updater.cli.fact_checker_cli:main
      - bibtex-filter = bibtex_updater.cli.filter_cli:main
      - bibtex-zotero = bibtex_updater.cli.zotero_cli:main
      - bibtex-zotero-organize = bibtex_updater.cli.zotero_organizer_cli:main
      - bibtex-obsidian-keywords = bibtex_updater.cli.obsidian_keywords_cli:main

requirements:
  host:
    - python ${{ python_min }}.*
    - pip
    - hatchling
    - hatch-vcs
  run:
    - python >=${{ python_min }}
    - bibtexparser >=1.4.0
    - requests >=2.28.0
    - crossref_commons_py >=0.0.7
    - httpx >=0.24.0
    - rapidfuzz >=3.0.0
    - scholarly >=1.7.0
    - pyzotero >=1.5.0
    - pyyaml >=6.0
    - sentence-transformers >=2.2.0

tests:
  - python:
      imports:
        - bibtex_updater
      pip_check: true
      python_version: ${{ python_min }}.*

about:
  homepage: https://github.com/DataAnalyticsEngineering/UNOCG
  summary: Replace preprint BibTeX entries with published versions and validate bibliography references.
  description: |
    Tools for managing BibTeX bibliographies: automatically update preprints to published versions, validate references against external databases, and filter to only cited references.
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - claudiushaag
