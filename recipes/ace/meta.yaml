{% set version = "6.4.4" %}

{% set dyn_ext = ".so" %}  # [linux]
{% set dyn_ext = ".dylib" %}  # [osx]
{% set dyn_ext = ".dll" %}  # [win]

{% set static_ext = ".a" %}  # [unix]
{% set static_ext = ".lib" %}  # [win]

package:
  name: ace
  version: {{ version }}

source:
  fn: ace-{{ version }}.tar.bz2
  url: http://download.dre.vanderbilt.edu/previous_versions/ACE-{{ version }}.tar.bz2
  sha256: 35524e4153d0bc69410b1acbf6b8b41a47bc133eaeaa5201ad550b8284546810
  patches:
    #! /usr/bin/perl -> #! /usr/bin/env perl
    - linux_install.patch

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - toolchain
    - perl 5.22.2.1

test:
  commands:
    - test -f "${PREFIX}/lib/libACE{{dyn_ext}}"
    - test -f "${PREFIX}/lib/libACE.lib"  # [win]
    - test -f "${PREFIX}/lib/libACE{{static_ext}}"
    - test -d "${PREFIX}/include/ace"
    - test -d "${PREFIX}/share/ace"

about:
  home: http://www.dre.vanderbilt.edu/~schmidt/ACE.html
  license: ACE
  license_file: COPYING
  summary: The Adaptive Communication Environment (Network Programming Toolkit in C++)

extra:
  recipe-maintainers:
    - grlee77
