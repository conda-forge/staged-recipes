schema_version: 1

context:
  name: sbom2dot
  version: 0.3.2

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  # There is no sdist on PyPI
  - url: https://github.com/anthonyharrison/${{ name }}/archive/refs/tags/v${{ version }}.tar.gz
    sha256: a6fb4ed6a89669ceba122ccfd23b3a25c1ec74db7ff10ff78c8ee3a618fc5a54
  - url: https://raw.githubusercontent.com/anthonyharrison/sbom2dot/a2d9f5dd3a2cda54d70553e6aa3222a38cf872c3/LICENSE
    sha256: c71d239df91726fc519c6eb72d318ec65820627232b2f796219e87dcf35d0ab4

build:
  number: 0
  noarch: python
  script: ${{ PYTHON }} -m pip install . --no-deps -vv
  python:
    entry_points:
      - sbom2dot = sbom2dot.cli:main

requirements:
  host:
    - python ${{ python_min }}.*
    - setuptools
    - pip
  run:
    - python >=${{ python_min }}
    - lib4sbom >=0.7.2

tests:
  - python:
      imports:
        - sbom2dot
      python_version: ${{ python_min }}.*
  - requirements:
      run:
        - pip
        - python ${{ python_min }}.*
    script:
      - pip check
      - sbom2dot --help

about:
  license: Apache-2.0
  license_file: LICENSE
  summary: Create a dependency graph of the components within a SBOM
  description: |
    SBOM2DOT generates a dependency graph of the components within an SBOM (Software Bill of Materials). The format of the graph file is compatible with the DOT language used by the GraphViz application. SBOMs are supported in a number of formats including SPDX and CycloneDX.
  homepage: https://github.com/anthonyharrison/sbom2dot
  repository: https://github.com/anthonyharrison/sbom2dot

extra:
  recipe-maintainers:
    - xhochy
