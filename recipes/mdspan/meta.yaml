{% set name = "mdspan" %}
{% set version = "0.6.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/kokkos/{{ name }}/archive/refs/tags/{{ name }}-{{ version }}.tar.gz
  sha256: 79f94d7f692cbabfbaff6cd0d3434704435c853ee5087b182965fa929a48a592

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - cmake
    - ninja
    - make

test:
  requires:
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - cmake
    - ninja  # [unix]
  files:
    - tests/
  commands:
    # Test that header files are installed
    - test -f $PREFIX/include/experimental/mdspan  # [unix]
    - if not exist %LIBRARY_INC%\experimental\mdspan exit 1  # [win]

    # Test that CMake config files are installed
    - test -f $PREFIX/lib/cmake/mdspan/mdspanConfig.cmake  # [unix]
    - if not exist %LIBRARY_PREFIX%\lib\cmake\mdspan\mdspanConfig.cmake exit 1  # [win]

about:
  home: https://github.com/kokkos/mdspan
  summary: Reference implementation of mdspan targeting C++23
  description: |
    mdspan is a reference implementation of the C++23 mdspan feature.
    It provides a non-owning multidimensional array view for use with
    modern C++ programs. This is a header-only library that provides
    efficient and flexible indexing of multidimensional data.
  license: Apache-2.0 WITH LLVM-exception
  license_file: LICENSE
  doc_url: https://github.com/kokkos/mdspan
  dev_url: https://github.com/kokkos/mdspan

extra:
  recipe-maintainers:
    - jeongseok-meta
