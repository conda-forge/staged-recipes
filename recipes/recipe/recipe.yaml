schema_version: 1

context:
  name: tach
  version: 0.23.0

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/tach-${{ version }}.tar.gz
  sha256: ae123491231ab0712417d579b9a3259014d713d72626805ff64552955e43e912

build:
  number: 0
  skip: match(python, "<3.7")
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - tach = tach.start:start

requirements:
  host:
    - python >=3.7
    - maturin >=1.5,<2.0
    - pip
  run:
    - python >=3.7
    - pyyaml >=6.0,<7.dev0
    - tomli >=1.2.2
    - tomli-w >=1.0,<2.dev0
    - rich >=13.0,<14.dev0
    - prompt-toolkit >=3.0,<4.dev0
    - gitpython >=3.1,<4.dev0
    - networkx >=2.6,<4.0
    - pydot >=2,<4
    - if: match(python, "<3.10")
      then: stdlib-list >=0.10.0
    - if: match(python, "==3.7")
      then: importlib-metadata >=6.0
    - myorg-pack-d @file:///var/folders/_j/kscn3hgd6x995v65h1b3gnrm0000gn/t/grayskull-tach-cnenzxjv/tach-0.23.0/python/tests/example/multi_package/src/pack-d
    - myorg-pack-e @file:///var/folders/_j/kscn3hgd6x995v65h1b3gnrm0000gn/t/grayskull-tach-cnenzxjv/tach-0.23.0/python/tests/example/multi_package/src/pack-e

tests:
  - python:
      imports:
        - tach
      pip_check: true
  - requirements:
      run:
        - pip
    script:
      - tach --help

about:
  summary: A Python tool to maintain a modular package architecture.
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - lucascolley

