context:
  name: toppra
  version: "0.6.4"

recipe:
  name: toppra
  version: ${{ version }}

source:
  url: https://github.com/hungpham2511/toppra/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 31213336fc36a69e8003808e7317773ba7c78e503c8cbd6d01fe2d50660e3294

build:
  number: 0

outputs:
  - package:
      name: libtoppra
      version: ${{ version }}
    build:
      skip:
        - not linux
      script: |
        cmake -S "${SRC_DIR}/cpp" \
          -B build/toppra \
          -G Ninja \
          -DPYTHON_BINDINGS=OFF \
          -DBUILD_TESTS=OFF \
          ${CMAKE_ARGS}
        cmake --build build/toppra
        cmake --install build/toppra
    requirements:
      run_exports:
        - ${{ pin_subpackage("libtoppra", upper_bound="x.x.x") }}
      build:
        - ${{ stdlib('c') }}
        - ${{ compiler('cxx') }}
        - cmake
        - ninja
      host:
        - eigen
        - gtest
      run:
        - eigen
      ignore_run_exports:
        by_name:
          - gtest
        from_package:
          - gtest
    tests:
      - package_contents:
          lib:
            - toppra

about:
  homepage: https://github.com/hungpham2511/toppra
  license: MIT
  license_file: LICENSE
  summary: Path parameterization for robots
  repository: https://github.com/hungpham2511/toppra
  documentation: https://hungpham2511.github.io/toppra/index.html

extra:
  feedstock-name: toppra
  recipe-maintainers:
    - sea-bass
