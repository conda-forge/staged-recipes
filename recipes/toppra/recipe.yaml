context:
  name: toppra
  version: "0.6.2"

recipe:
  name: toppra
  version: ${{ version }}

source:
  # TODO: Once this is versioned, replace with a versioned tarball.
  url: https://github.com/hungpham2511/toppra/archive/6b11235b304455a944479f1cb250559f1eb44b7b.tar.gz
  sha256: cc0318173769d9dd88c7315e6e0d5cf1b63d570fdc05ea1e0fe1339da53c10fd

build:
  number: 0

outputs:
  - package:
      name: libtoppra
      version: ${{ version }}
    build:
      skip:
        - not linux
      script: |
        cmake -S "${SRC_DIR}/cpp" \
          -B build/toppra \
          -G Ninja \
          -DPYTHON_BINDINGS=OFF \
          -DBUILD_TESTS=OFF \
          ${CMAKE_ARGS}
        cmake --build build/toppra
        cmake --install build/toppra
    requirements:
      run_exports:
        - ${{ pin_subpackage("libtoppra", upper_bound="x.x.x") }}
      build:
        - ${{ stdlib('c') }}
        - ${{ compiler('cxx') }}
        - cmake
        - ninja
      host:
        - eigen
        - gtest
      run:
        - eigen
      ignore_run_exports:
        by_name:
          - gtest
        from_package:
          - gtest
    tests:
      - package_contents:
          lib:
            - toppra

about:
  homepage: https://github.com/hungpham2511/toppra
  license: MIT
  license_file: LICENSE
  summary: Path parameterization for robots
  repository: https://github.com/hungpham2511/toppra
  documentation: https://hungpham2511.github.io/toppra/index.html

extra:
  feedstock-name: toppra
  recipe-maintainers:
    - sea-bass
