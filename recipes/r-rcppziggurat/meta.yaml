{% set version = '0.1.4' %}
{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-rcppziggurat
  version: {{ version|replace("-", "_") }}

source:
  fn: RcppZiggurat_{{ version }}.tar.gz
  url:
    - https://cran.r-project.org/src/contrib/RcppZiggurat_{{ version }}.tar.gz
    - https://cran.r-project.org/src/contrib/Archive/RcppZiggurat/RcppZiggurat_{{ version }}.tar.gz
  sha256: e4432987d5f93e49c10c031acd758e79f74facf48807950404d8d8ff41d58d9b

build:
  number: 0
  skip: true  # [win32]

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - r-base
    - r-rcpp
    - r-rcppgsl
    - posix                # [win]
    - {{native}}toolchain  # [win]
    - gcc                  # [not win]

  run:
    - r-base
    - r-rcpp
    - r-rcppgsl
    - libgcc  # [not win]

test:
  commands:
    - $R -e "library('RcppZiggurat')"  # [not win]
    - "\"%R%\" -e \"library('RcppZiggurat')\""  # [win]

about:
  home: https://CRAN.R-project.org/package=RcppZiggurat
  license: GPL (>= 2)
  summary: The Ziggurat generator for normally distributed random numbers, originally proposed
    by Marsaglia and Tsang (JSS, 2000), has been improved  upon a few times starting
    with Leong et al (JSS, 2005). This package provides an aggregation in order to compare
    different implementations. The goal is to provide an 'faster but good enough' alternative
    for use with R and C++ code.
  license_family: GPL3
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'  # [unix]
  license_file: '{{ environ["PREFIX"] }}\R\share\licenses\GPL-3'  # [win]

extra:
  recipe-maintainers:
    - johanneskoester
    - bgruening
    - daler
    - jdblischak
    - cbrueffer
