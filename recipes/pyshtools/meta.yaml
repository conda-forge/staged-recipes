{% set name = "pyshtools" %}
{% set version = "4.5" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  # url: https://github.com/{{ name }}/{{ name }}/archive/{{ version }}.tar.gz
  sha256: a3ccd13786dddd15074c7645af0813a7e67d6bdd8ee6bfefb44ed5f78d5c7b3b

build:
  number: 0
  # If the installation is complex, or different between Unix and Windows, use separate bld.bat and build.sh files instead of this key.
  # By default, the package will be built for the Python versions supported by conda-forge and for all major OSs.
  # Add the line "skip: True  # [py<35]" (for example) to limit to Python 3.5 and newer, or "skip: True  # [not win]" to limit to Windows.
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    # If your project compiles code (such as a C extension) then add the required compilers as separate entries here.
    # Compilers are named 'c', 'cxx' and 'fortran'.
    - {{ compiler('c') }}
    - {{ compiler('fortran') }}
  host:
    - python
    - pip
    - setuptools
    - numpy
    - fftw >=3
    - libblas
    - libcblas
    - liblapack
    - liblapacke
    - tcsh  # [not win]
  run:
    - python
    - numpy
    - scipy >=0.14.0
    - matplotlib
    - astropy
    - fftw >=3
    - blas
    - lapack

test:
  # Some packages might need a `test/commands` key to check CLI.
  # List all the packages/modules that `run_test.py` imports.
  imports:
    - pyshtools

about:
  home: https://github.com/SHTOOLS/SHTOOLS
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: 'Tools for working with spherical harmonics'

  description: |
    SHTOOLS/pysthools is a Fortran-95/Python library that can be used to
    perform spherical harmonic transforms, multitaper spectral analyses on the
    sphere, expansions of functions into Slepian bases, and standard operations
    on global gravitational and magnetic field data.
  doc_url: https://shtools.github.io/SHTOOLS/
  dev_url: https://github.com/SHTOOLS/SHTOOLS

extra:
  recipe-maintainers:
    - megies
    - moorepants
