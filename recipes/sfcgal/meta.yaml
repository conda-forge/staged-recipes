{% set version = "2.2.0" %}

package:
  name: sfcgal
  version: {{ version }}

source:
  url: https://gitlab.com/sfcgal/SFCGAL/-/archive/v{{ version }}/SFCGAL-v{{ version }}.tar.gz
  sha256: bb6bb77ddb58523d8c229764de23699f99c1a7011d873419afd2a67df85602a2

build:
  number: 0
  missing_dso_whitelist:   # [linux]
    - /lib64/libpthread.so.0  # [linux]
    - /lib64/libm.so.6  # [linux]
    - /lib64/libc.so.6  # [linux]
    - /lib64/ld-linux-x86-64.so.2  # [linux]
    - /lib/libgcc_s.so.1  # [linux]


requirements:
  host:
    - {{ compiler('c') }}
    - {{ stdlib("c") }}
    - {{ compiler('cxx') }}
    - cgal-cpp
    - cmake
    - libboost-devel
    - gmp
    - mpfr
    - ninja
  run:
    - gmp
    - mpfr
    - cgal-cpp
    - libboost-devel

test:
  commands:
    # Test the config script on Unix (it's a shell script, won't work in Windows CMD)
    - sfcgal-config --version  # [unix]

    # Test library files exist
    - test -f $PREFIX/lib/libSFCGAL${SHLIB_EXT}  # [unix]
    - if not exist %LIBRARY_BIN%\SFCGAL.dll exit 1  # [win]

about:
  home: https://gitlab.com/sfcgal/SFCGAL
  summary: "A wrapper around CGAL that intents to implement 2D and 3D operations on OGC standards models."
  license: LGPL-2.1-or-later
  license_family: LGPL
  license_file: LICENSE
  dev_url: https://gitlab.com/sfcgal/SFCGAL

extra:
  recipe-maintainers:
    - lbartoletti
