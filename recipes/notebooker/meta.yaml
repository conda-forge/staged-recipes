{% set name = "notebooker" %}
{% set version = "0.4.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/notebooker-{{ version }}.tar.gz
  sha256: 9fd23ea83f020eb4c36b53d5eb0fb205a9d7011e6c59396b7474d74344d825e4

build:
  entry_points:
    - notebooker-cli = notebooker._entrypoints:base_notebooker
    - notebooker_execute = notebooker.execute_notebook:docker_compose_entrypoint
    - notebooker_template_sanity_check = notebooker.utils.template_testing:sanity_check
    - notebooker_template_regression_test = notebooker.utils.template_testing:regression_test
    - convert_ipynb_to_py = notebooker.convert_to_py:main
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  host:
    - numpy
    - pip
    - python >=3.5
    - six
  run:
    - apscheduler
    - babel
    - cachelib
    - click >7.1.0
    - dataclasses
    - flask
    - gevent
    - gitpython
    - inflection
    - ipykernel
    - ipython
    - jupytext >=1.2.0
    - matplotlib-base
    - nbconvert <6.0.0
    - nbformat
    - pandas
    - papermill
    - pymongo
    - python >=3.5
    - python-dateutil
    - requests
    - retrying
    - stashy

test:
  imports:
    - notebooker
    - notebooker.serialization
    - notebooker.serializers
    - notebooker.utils
    - notebooker.web
    - notebooker.web.routes
  commands:
    - pip check
    - notebooker-cli --help
    - notebooker_execute --help
    - notebooker_template_sanity_check --help
    - notebooker_template_regression_test --help
    - convert_ipynb_to_py --help
  requires:
    - pip
    - git  # [unix]
    - m2-git  # [win]

about:
  home: https://github.com/man-group/notebooker
  doc_url: https://notebooker.readthedocs.io/en/latest/
  summary: Tool for parametrizing, executing, and displaying Jupyter Notebooks as reports.
  license: AGPL-3.0-or-later
  license_file: LICENSE.txt

extra:
  recipe-maintainers:
    - thewchan
