{% set version = '2.1.5' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-consrank
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/ConsRank_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/ConsRank/ConsRank_{{ version }}.tar.gz
  sha256: 62f468f6b29f50822d9747ed0473f39223a154b55ef71dc2cc51202106724c1a

build:
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
    - r-gtools
    - r-proxy
    - r-rgl
    - r-rlist >=0.4.2
    - r-tidyr
  run:
    - r-base
    - r-gtools
    - r-proxy
    - r-rgl
    - r-rlist >=0.4.2
    - r-tidyr

test:
  commands:
    - $R -e "library('ConsRank')"           # [not win]
    - "\"%R%\" -e \"library('ConsRank')\""  # [win]

about:
  home: https://www.r-project.org/
  license: GPL-3.0-only
  summary: 'Compute the median ranking according to the Kemeny''s axiomatic approach. Rankings
    can or cannot contain ties, rankings can be both complete or incomplete. The package
    contains both branch-and-bound algorithms and heuristic solutions recently proposed.
    The searching space of the solution can either be restricted to the universe of
    the permutations or unrestricted to all possible ties. The package also provide
    some useful utilities for deal with preference rankings, including both element-weight
    Kemeny distance and correlation coefficient. This release declare as deprecated
    some functions that are still in the package for compatibility. Next release will
    not contains these functions. Please type ''?ConsRank-deprecated'' Essential references:
    Emond, E.J., and Mason, D.W. (2002) <doi:10.1002/mcda.313>; D''Ambrosio, A., Amodio,
    S., and Iorio, C. (2015) <doi:10.1285/i20705948v8n2p198>; Amodio, S., D''Ambrosio,
    A., and Siciliano R. (2016) <doi:10.1016/j.ejor.2015.08.048>; D''Ambrosio, A., Mazzeo,
    G., Iorio, C., and Siciliano, R. (2017) <doi:10.1016/j.cor.2017.01.017>; Albano,
    A., and Plaia, A. (2021) <doi:10.1285/i20705948v14n1p117>.'
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
