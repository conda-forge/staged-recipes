{% set name = "sqlite-zstd" %}
{% set version = "0.3.2.41" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  git_url: https://github.com/phiresky/sqlite-zstd.git
  sha256: 9da3ff9987dbf47f13aa07280debe57f32322d98c982e9055d4216df1d9bed9f

build:
  script: cd python && {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  host:
    - {{ compiler('rust') }}
    - {{ stdlib('c') }}
    - python >=3.9
    - setuptools >=61.2
    - setuptools-scm >=6.2
    - setuptools-rust
    - pip
  run:
    - python >=3.9
    - libgcc

test:
  imports:
    - sqlite_zstd
  commands:
    - pip check
  requires:
    - pip

about:
  home:  https://github.com/phiresky/sqlite-zstd
  summary: 'Transparent dictionary-based row-level compression for SQLite'
  description: |
    Extension for sqlite that provides transparent dictionary-based row-level compression for sqlite. This basically allows you to compress entries in a sqlite database almost as well as if you were compressing the whole DB file, but while retaining random access.
  license: LGPL-3.0-or-later
  license_file: LICENSE

extra:
  recipe-maintainers:
    - matthiasdiener
