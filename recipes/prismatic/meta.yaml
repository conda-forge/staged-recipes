{% set version = "1.2.1" %}

package:
  name: prismatic
  version: {{ version }}

source:
  url: https://github.com/prism-em/prismatic/archive/{{ version }}.tar.gz
  sha256: 844f659575dd98999b7c4864e850a7ec735f297ab1fb6c2d2be91d7f9720fe70 
  patches:
    - cmakelists.patch

build:
  number: 0
  # will skip windows & linux for the moment - until we've got OSX sorted...
  skip: True             # [win]
  skip: False            # [linux]
  skip: True             # [osx]
  features:

requirements:
  build:
    # If your project compiles code (such as a C extension) then add the required compilers as separate entries here.
    # Compilers are named 'c', 'cxx' and 'fortran'.
    - {{ compiler('c') }}                # [linux]
    - {{ compiler('cxx') }}              # [linux]
    - {{ cdt('libxext-devel') }}         # [linux]
    - {{ cdt('mesa-libgl-devel') }}      # [linux]
    - {{ cdt('mesa-dri-drivers') }}      # [linux]
    - {{ cdt('libxau-devel') }}          # [linux]
    - {{ cdt('libselinux-devel') }}      # [linux]
    - {{ cdt('libxdamage') }}            # [linux]
    - {{ cdt('libxfixes') }}             # [linux]
    - {{ cdt('libxxf86vm') }}            # [linux]
    - make                               # [linux]
    - cmake
    - fftw >=3.3
  host:
    - python >=3
    - pip
    - boost
    - hdf5 >=1.10
    - fftw >=3.3
    - qt =5.9.*
    - numpy >=1.13.0
    - matplotlib >=2.0.2
    - h5py >=2.9.0
    - zlib
  run:
    - fftw >=3.3

test:
  files:
    - SI100.XYZ
  commands:
    #- prismatic --help
    - prismatic -i SI100.XYZ



about:
  home: http://prism-em.com/
  license: GNU
  license_file: LICENSE
  summary: 'CPU / GPU software for fast simulation of Scanning Transmission Electron Microscopy (STEM) experiments'
  description: |
    CPU / GPU software for fast simulation of Scanning Transmission Electron Microscopy (STEM) experiments
  dev_url: https://github.com/prism-em/prismatic

extra:
  recipe-maintainers:
    # GitHub IDs for maintainers of the recipe.
    # Always check with the people listed below if they are OK becoming maintainers of the recipe. (There will be spam!)
    - ericpre
    - douglowe

