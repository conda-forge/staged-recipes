context:
  version: "20260216"

package:
  name: copybara
  version: ${{ version }}

source:
  url: https://github.com/google/copybara/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 808a8ae9b3ea7404b03e2ec35565c328e7cbd8a907070822c5282c8832c33ad4

build:
  number: 0
  skip:
    - win
  script:
    - if: unix
      then: bash ${RECIPE_DIR}/build.sh

requirements:
  build:
    - bazel >=7
    - openjdk >=21
    - maven
    - git
  run:
    - openjdk >=21
    - git

tests:
  - script:
      - copybara version

about:
  homepage: https://github.com/google/copybara
  summary: A tool for transforming and moving code between repositories
  description: |
    Copybara is a tool used internally at Google to transform and move code
    between repositories. It is often used to maintain mirrored repositories
    between internal Google repositories and public GitHub repositories.
  license: Apache-2.0
  license_file:
    - LICENSE
    - library_licenses/

extra:
  recipe-maintainers:
    - ytausch
