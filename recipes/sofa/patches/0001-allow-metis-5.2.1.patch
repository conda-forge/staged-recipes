From 3ae5f527e2bd610a010a14c309b517f0077c7b84 Mon Sep 17 00:00:00 2001
From: Olivier Roussel <olivier.roussel@inria.fr>
Date: Thu, 7 Mar 2024 09:34:16 +0100
Subject: [PATCH] allow metis >=5.2.1

---
 Sofa/Component/LinearSolver/Direct/CMakeLists.txt         | 6 +++---
 Sofa/Component/LinearSolver/Preconditioner/CMakeLists.txt | 6 +++---
 applications/plugins/SofaMatrix/CMakeLists.txt            | 6 +++---
 3 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/Sofa/Component/LinearSolver/Direct/CMakeLists.txt b/Sofa/Component/LinearSolver/Direct/CMakeLists.txt
index 9f09a537c3..ab577f3604 100644
--- a/Sofa/Component/LinearSolver/Direct/CMakeLists.txt
+++ b/Sofa/Component/LinearSolver/Direct/CMakeLists.txt
@@ -55,17 +55,17 @@ set(SOURCE_FILES
     ${SOFACOMPONENTLINEARSOLVERDIRECT_SOURCE_DIR}/TypedMatrixLinearSystem[BTDMatrix].cpp
 )
 
-find_package(metis 5.1.0 EXACT QUIET)
+find_package(metis 5.2.1 QUIET)
 if(NOT metis_FOUND AND SOFA_ALLOW_FETCH_DEPENDENCIES)
     message("Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is ON, fetching metis...")
     include(FetchContent)
     FetchContent_Declare(metis
             GIT_REPOSITORY https://github.com/sofa-framework/METIS
-            GIT_TAG v5.1.0-ModernInstall
+            GIT_TAG v5.2.1-ModernInstall
     )
     FetchContent_MakeAvailable(metis)
 elseif (NOT metis_FOUND)
-    message(FATAL_ERROR "Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version=5.1.0), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
+    message(FATAL_ERROR "Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version>=5.2.1), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
 endif()
 
 sofa_set_01(SOFA_COMPONENT_LINEARSOLVER_DIRECT_HAVE_METIS VALUE TRUE)
diff --git a/Sofa/Component/LinearSolver/Preconditioner/CMakeLists.txt b/Sofa/Component/LinearSolver/Preconditioner/CMakeLists.txt
index e8183f8cfd..b176262973 100644
--- a/Sofa/Component/LinearSolver/Preconditioner/CMakeLists.txt
+++ b/Sofa/Component/LinearSolver/Preconditioner/CMakeLists.txt
@@ -36,17 +36,17 @@ sofa_find_package(Sofa.Component.ODESolver.Backward REQUIRED)
 sofa_find_package(Sofa.Component.LinearSolver.Iterative REQUIRED)
 sofa_find_package(Sofa.Component.LinearSolver.Direct REQUIRED)
 
-find_package(metis 5.1.0 EXACT QUIET)
+find_package(metis 5.2.1 QUIET)
 if(NOT metis_FOUND AND SOFA_ALLOW_FETCH_DEPENDENCIES)
     message("Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is ON, fetching metis...")
     include(FetchContent)
     FetchContent_Declare(metis
             GIT_REPOSITORY https://github.com/sofa-framework/METIS
-            GIT_TAG v5.1.0-ModernInstall
+            GIT_TAG v5.2.1-ModernInstall
     )
     FetchContent_MakeAvailable(metis)
 elseif (NOT metis_FOUND)
-    message(FATAL_ERROR "Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version=5.1.0), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
+    message(FATAL_ERROR "Sofa.Component.LinearSolver.Direct: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version>=5.2.1), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
 endif()
 
 add_library(${PROJECT_NAME} SHARED ${HEADER_FILES} ${SOURCE_FILES} ${WRAPPER_FILES})
diff --git a/applications/plugins/SofaMatrix/CMakeLists.txt b/applications/plugins/SofaMatrix/CMakeLists.txt
index e716ed68c7..4dddff26d0 100644
--- a/applications/plugins/SofaMatrix/CMakeLists.txt
+++ b/applications/plugins/SofaMatrix/CMakeLists.txt
@@ -8,17 +8,17 @@ sofa_find_package(Sofa.Component.LinearSolver.Direct REQUIRED)
 sofa_find_package(Eigen3 REQUIRED)
 sofa_find_package(Sofa.GUI.Qt QUIET)
 
-find_package(metis 5.1.0 EXACT QUIET)
+find_package(metis 5.2.1 QUIET)
 if(NOT metis_FOUND AND SOFA_ALLOW_FETCH_DEPENDENCIES)
     message("SofaMatrix: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is ON, fetching metis...")
     include(FetchContent)
     FetchContent_Declare(metis
             GIT_REPOSITORY https://github.com/sofa-framework/METIS
-            GIT_TAG v5.1.0-ModernInstall
+            GIT_TAG v5.2.1-ModernInstall
     )
     FetchContent_MakeAvailable(metis)
 elseif (NOT metis_FOUND)
-    message(FATAL_ERROR "SofaMatrix: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version=5.1.0), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
+    message(FATAL_ERROR "SofaMatrix: DEPENDENCY metis NOT FOUND. SOFA_ALLOW_FETCH_DEPENDENCIES is OFF and thus cannot be fetched. Install metis (version>=5.2.1), or enable SOFA_ALLOW_FETCH_DEPENDENCIES to fix this issue.")
 endif()
 
 
-- 
2.34.1

