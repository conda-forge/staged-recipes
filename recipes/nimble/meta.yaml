{% set name = "nimble" %}
{% set version = "0.5.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/nimble-{{ version }}.tar.gz
  sha256: aa415d2ffe1838ad3f471d966ee8816b54e460c5bcd145e90ff82b1a4b047c9d

build:
  skip: true # [py<38 or py>=313]
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

outputs:
  - name: nimble
    requirements:
      build:
        - {{ compiler('c') }}
        - cross-python_{{ target_platform }} # [build_platform != target_platform]
        - python # [build_platform != target_platform]
        - cython >=0.29 # [build_platform != target_platform]
        - setuptools >=61.0 # [build_platform != target_platform]
      host:
        - python
        - setuptools >=61.0
        - cython >=0.29
        - pip
      run:
        - python
        - numpy >=1.14
        - packaging >=20.0
        - tomli >=2.0
        - scipy >=1.1
        - pandas>=0.24
  - name: nimble-quickstart
    requirements:
      run:
        - {{ pin_subpackage('nimble', max_pin="x.x.x") }}
        - pandas>=0.24
        - scipy>=1.1
        - matplotlib>=3.1
        - cloudpickle>=1.0
        - requests>2.12
        - h5py>=2.10
        - python-dateutil>=2.6
        - hyperopt>=0.2
        - scikit-learn>=1.0
      run-constrained:
        - keras>=2.4
        - tensorflow>=2.0
        - hyperopt>=0.2

test:
  imports:
    - nimble
  commands:
    - pip check
  requires:
    - pip

about:
  summary: Interfaces and tools for data science.
  license: Apache-2.0
  license_file: LICENSE
  home: www.nimbledata.org

extra:
  feedstock-name: nimble
  recipe-maintainers:
    - willfind
    - tpburns

