{% set version = "0.0.3" %}

package:
  name: ipypdf
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/i/ipypdf/ipypdf-{{ version }}.tar.gz
  sha256: ad14bf1d16872bbe22fe25dacab91877e5d2a9b9e60ef8808fb731ef15f660f4

build:
  script: {{ PYTHON }} -m pip install -vv . --no-deps
  noarch: python
  number: 0

requirements:
  build:
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}  # [linux]
    - {{ cdt('libxdamage') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libxext') }}     # [linux]
  host:
    - xorg-libxfixes  # [linux]
    - python >=3.6
    - pip
    - setuptools
  run:
    - python >=3.6
    - ipycanvas
    - ipycytoscape
    - ipyevents
    - ipytree
    - ipywidgets
    - jupyterlab >=3.0
    - numpy <=1.19.3,>=1.13  # Constrained by paddlepaddle
    - opencv
    - pandas
    - pdf2image
    - poppler
    - pytesseract
    - spacy
    - tesseract
    - traitlets

test:
  source_files:
    - tests
  requires:
    - pip
    - pytest
    - pytest-cov
  imports:
    ipypdf
  commands:
    - pip check
    - pytest -vv -k --ignore=tests/test_3_layoutparser.py

about:
  home: https://github.com/JoelStansbury/ipypdf
  summary: Jupyter widget for applying nlp to pdf documents
  license: MIT
  license_file: LICENSE
  description: |
    ipypdf is an InteractivePython (iPy) widget designed to provide powerful
    tools for extracting data from PDF documents. The widget features a directory
    tree to navigate through the hierarchy. Rendered pdf canvas used to highlight
    portions of the document relevant to your specific task. And a toolkit panel
    to perform predefined operations. Among these operations are AutoParse, which
    will utilize layoutparser to extract titles, text, tables, and images from the
    document. Spacy, which utilizes SpaCy's NLP model to detect and display named
    entities. Cytoscape, which discovers symantically similar portions of text and
    displays them in an interactive graph. (and more)

extra:
  recipe-maintainers:
    - JoelStansbury
