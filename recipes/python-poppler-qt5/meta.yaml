{% set name = "python-poppler-qt5" %}
{% set version = "21.3.0" %}

# Note: python-poppler-qt5 versions follow Poppler versions. However,
# poppler is pinned in conda-forge
# (https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/main/recipe/conda_build_config.yaml).
# We just build the binding with a higher version of Poppler, which is fine
# -- it just exposes the API subset that was already in the older Poppler version
# corresponding to the python-poppler-qt5 version.

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: b477e8841f0ea0e09fdab6f2f305cf38df977d9e142e5693a374605d75dd6fe0

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - python
    - sip
    - setuptools
    - pyqt-builder
    - pyqt
    - poppler-qt {{ poppler }}
  host:
    - {{ compiler('cxx') }}
    - python
    - sip
    - setuptools
    - pyqt-builder
    - pyqt
    - poppler-qt {{ poppler }}
  run:
    - python
    - pyqt
    # pinned by pin_run_as_build in conda-forge's conda_build_config.yaml
    - poppler-qt

test:
  imports:
    - popplerqt5
  requires:
    - pip
  commands:
    - pip check

about:
  home: https://github.com/frescobaldi/python-poppler-qt5
  summary: 'Python binding to libpoppler-qt5'
  license: GPL-2.0-or-later
  license_family: GPL
  license_file: LICENSE

extra:
  recipe-maintainers:
    - jeanas
