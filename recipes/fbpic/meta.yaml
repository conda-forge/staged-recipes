{% set version = '0.9.2' %}
{% set name = 'FBPIC' %}
{% set hash = '86523486b030e8a744c11ece2f0f2d7b47098f9954603fb83d8c89d94a454f86' %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  fn: '{{ version }}.tar.gz'
  url:
    - 'https://github.com/{{ name|lower }}/{{ name|lower }}/archive/{{ version }}.tar.gz'
  sha256: '{{ hash }}'

build:
  skip: True    # [win]
  number: 0
  script: python -m pip install --no-deps --ignore-installed .

requirements:
  build:
    - cudatoolkit
    - python
    - pytest
    - numba
    - scipy
    - h5py
    - mkl
    - mpi4py
    - pyculib
    - python-dateutil
    - pip
    - funcsigs

  run:
    - cudatoolkit
    - python
    - {{ pin_compatible('numpy') }}
    - numba
    - scipy
    - h5py
    - mkl
    - mpi4py
    - pyculib
    - python-dateutil
    - funcsigs

test:
  imports:
    - fbpic
  requires:
    - pytest

about:
  home: 'https://github.com/fbpic/fbpic'
  license: 'BSD 3-clause'
  license_family: 'BSD'
  license_file: 'LICENSE.txt'
  summary: 'FBPIC is a Particle-In-Cell (PIC) code for relativistic plasma physics. The code can run on CPU (with multi-threading) and on GPU.'

extra:
  recipe-maintainers:
      - slacalle
