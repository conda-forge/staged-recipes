{% set version = '0.9.4' %}
{% set name = 'FBPIC' %}
{% set hash = 'cc83aae652f9fcda3624eab844df098c2360bebd4bc77ffeaf115bb8f6caad00' %}

package:
  name: '{{ name|lower }}'
  version: '{{ version }}'

source:
  fn: '{{ version }}.tar.gz'
  url: 'https://github.com/{{ name|lower }}/{{ name|lower }}/archive/{{ version }}.tar.gz'
  sha256: '{{ hash }}'

build:
  skip: True    # [win]
  number: 0
  script: ${PYTHON} -m pip install --no-deps --ignore-installed .

requirements:
  build:
    - python
    - pytest
    - numba
    - scipy
    - h5py
    - mkl
    - mpi4py
    - pip
    - python-dateutil
    - funcsigs

  host:
    - cudatoolkit
    - python
    - numba
    - scipy
    - h5py
    - mkl
    - mpi4py
    - pyculib
    - pip
    - python-dateutil
    - funcsigs

  run:
    - cudatoolkit
    - python
    - {{ pin_compatible('numpy') }}
    - numba
    - scipy
    - h5py
    - mkl
    - mpi4py
    - pyculib
    - python-dateutil
    - funcsigs

test:
  imports:
    - fbpic

about:
  home: 'https://github.com/fbpic/fbpic'
  license: 'BSD 3-clause'
  license_family: 'BSD'
  license_file: 'LICENSE.txt'
  summary: 'FBPIC is a Particle-In-Cell (PIC) code for relativistic plasma physics.
            The code can run on CPU (with multi-threading) and on GPU.'

extra:
  recipe-maintainers:
      - slacalle
