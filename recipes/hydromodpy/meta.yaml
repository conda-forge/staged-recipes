{% set name = "hydromodpy" %}
{% set version = "0.3.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/h/hydromodpy/hydromodpy-0.3.0.tar.gz
  sha256: a28f552a7c5fc6328dac99011581a9f144eae7fb70b5e27d5d97ef41c7260a8c

build:
  number: 0
  # Ignore Python versions below 3.11 as required by the package
  skip: true  # [py<311]
  
  # Maintain upstream binaries without modification
  binary_relocation: false
  script: {{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv
  # Allow linking to system libraries for vendored binaries (Modflow)
  missing_dso_whitelist:
    - "*"

requirements:
  host:
    - python
    - pip
    - setuptools
  run:
    - python
    - colormap
    - contextily
    - flopy
    - geopandas
    - h5py
    - imageio
    - ipykernel
    - ipython
    - matplotlib-base
    - matplotlib-scalebar
    - netcdf4
    - numpy
    - pandas
    - plotly
    - pyproj
    - pyshp
    - rasterio
    - rioxarray
    - selenium
    - vedo
    - whitebox
    - xarray
    - pysheds
    - pyside6
    - spyder-kernels

test:
  requires:
    - python
  commands:
    - python -c "import os, importlib; os.environ['WBT_PATH'] = os.path.join(r'{{ PREFIX }}', 'whitebox'); import hydromodpy; importlib.import_module('hydromodpy.watershed'); print(hydromodpy.__version__)"

about:
  summary: A Python toolbox for deploying catchment-scale shallow groundwater models.
  description: |
    HydroModPy streamlines the deployment of catchment-scale hydrological and 
    shallow groundwater models. It automates the extraction and discretization 
    of watersheds from Digital Elevation Models (DEMs) while integrating 
    essential hydrographic and geological data. 
    
    The platform leverages open-source packages like FloPy and WhiteBoxTools to 
    standardize simulation batches and facilitate the visualization and 
    comparison of modeling results. Designed for scientific and educational 
    purposes, it simplifies complex hydrogeological workflows.
  home: https://hydromod.readthedocs.io/
  doc_url: https://hydromod.readthedocs.io/
  dev_url: https://gitlab.com/Alex-Gauvain/HydroModPy
  license: EPL-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - bastien-boivin
