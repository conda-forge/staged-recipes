{% set name = "csp" %}
 {% set version = "0.0.2" %}

 package:
   name: {{ name|lower }}
   version: {{ version }}

 source:
   url: https://pypi.io/packages/source/{{ name [0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
   sha256: 3dec890ec0f626115f6ee1513d6db467f0d6bbabe3309d591bdfdffee23dfaa2

 build:
   number: 0
   skip: true  # [not linux]
   script:
     - export CSP_USE_VCPKG=0
     - {{ PYTHON }} -m pip install . -vv --no-deps
   rpaths:
     - {{ SP_DIR }}/csp/lib

 requirements:
   build:
     - python                                 # [build_platform != target_platform]
     - cross-python_{{ target_platform }}     # [build_platform != target_platform]
     - numpy                                  # [build_platform != target_platform]
     - {{ compiler('c') }}
     - {{ compiler('cxx') }}
     - cmake
     - make
   host:
     - python
     - bison
     - brotli
     - cmake
     - cyrus-sasl
     - exprtk
     - flex
     - gtest
     - libarrow =15
     - libparquet =15
     - libprotobuf
     - librdkafka
     - lz4-c
     - numpy
     - pip
     - pyarrow =15
     - rapidjson
     - ruamel.yaml
     - scikit-build
     - setuptools >=69
     - tar
     - unzip
     - zip
     - zlib
   run:
     - python
     - {{ pin_compatible('numpy') }}
     - brotli
     - cyrus-sasl
     - libarrow =15
     - libprotobuf
     - librdkafka
     - lz4-c
     - packaging
     - pandas <2.2
     - pyarrow =15
     - psutil
     - pytz
     - rapidjson
     - ruamel.yaml
     - sqlalchemy
     - zlib

 test:
   imports:
     - csp

 about:
   home: http://github.com/Point72/csp
   license: Apache-2.0
   license_family: Apache
   license_file: LICENSE
   summary: csp is a high performance reactive stream processing library, written in C++ and Python
   description: csp is a high performance reactive stream processing library, written in C++ and Python
   dev_url: https://github.com/Point72/csp

 extra:
   recipe-maintainers:
     - robambalu
     - AdamGlustein
     - svatasoiu
     - alexddobkin
     - ngoldbaum
