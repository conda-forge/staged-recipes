{% set version = '0.1.0' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-leafpm
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/leafpm_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/leafpm/leafpm_{{ version }}.tar.gz
  sha256: 7b038b3d24851c5d543bd7f2a9cc477c15a851f46a09ae885b67db657a99a219

build:
  merge_build_host: True  # [win]
  number: 0
  script: R CMD INSTALL --build .
  skip: True  # [win]
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{posix}}zip               # [win]
  host:
    - r-base
    - r-dplyr
    - r-htmltools >=0.3
    - r-htmlwidgets
    - r-jsonlite
    - r-leaflet >=2.0.1
    - r-sf >=0.5_2
  run:
    - r-base
    - r-dplyr
    - r-htmltools >=0.3
    - r-htmlwidgets
    - r-jsonlite
    - r-leaflet >=2.0.1
    - r-sf >=0.5_2

test:
  commands:
    - $R -e "library('leafpm')"           # [not win]
    - "\"%R%\" -e \"library('leafpm')\""  # [win]

about:
  home: https://github.com/r-spatial/leafpm
  license: MIT
  license_file: LICENSE
  summary: A collection of tools for interactive manipulation of (spatial) data  layers on leaflet
    web maps. Tools include editing of existing layers, creation  of new layers through
    drawing of shapes (points, lines, polygons), deletion  of shapes as well as cutting
    holes into existing shapes. Provides control over  options to e.g. prevent self-intersection
    of polygons and lines or to enable/disable  snapping to align shapes.
  license_family: MIT

extra:
  recipe-maintainers:
    - ocefpaf
