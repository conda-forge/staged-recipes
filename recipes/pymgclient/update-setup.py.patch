--- a/setup.py
+++ b/setup.py
@@ -26,2 +26,7 @@
 from setuptools.command.build_ext import build_ext
+from build_mgclient_with_conda_lib_ext import build_mgclient_with_conda_lib_ext
+
+ if platform.system() == "Windows":
+     os.environ['CC'] = 'gcc'
+     os.environ['CXX'] = 'g++'

@@ -316,3 +321,3 @@
     ext_modules=[
-        Extension(EXTENSION_NAME, sources=sources, depends=headers, extra_link_args=extra_link_args)
+        build_mgclient_with_conda_lib_ext()
     ],
@@ -322,3 +332,2 @@
     },
-    cmdclass={"build_ext": BuildMgclientExt},
     install_requires=[
