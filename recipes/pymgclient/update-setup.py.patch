--- a/setup.py
+++ b/setup.py
@@ -26,2 +26,13 @@
 from setuptools.command.build_ext import build_ext
+from build_mgclient_with_conda_lib_ext import build_mgclient_with_conda_lib_ext
+
+class GccBuildExt(build_ext):
+  def build_extensions(self):
+    from distutils.command.build_ext import build_ext
+    from distutils.ccompiler import new_compiler
+    if platform.system() == "Windows":
+      self.compiler = new_compiler(compiler='mingw32')
+      if hasattr(self.compiler, 'initialize'):
+        self.compiler.initialize()
+    build_ext.build_extensions(self)

@@ -316,3 +327,3 @@
     ext_modules=[
-        Extension(EXTENSION_NAME, sources=sources, depends=headers, extra_link_args=extra_link_args)
+        build_mgclient_with_conda_lib_ext()
     ],
@@ -322,3 +338,2 @@
     },
-    cmdclass={"build_ext": BuildMgclientExt},
+    cmdclass={"build_ext": GccBuildExt},
     install_requires=[
