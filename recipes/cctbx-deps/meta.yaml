{% set version = "2019.05.10" %}

package:
  name: cctbx-base-deps
  version: {{ version }}

build:
  number: 0

requirements:
  run:
    - python
    - cython
    - future
    - six
    - mock >=2.0.0
    - pytest >=3.1
    - pytest-xdist >=1.22
    - {{ pin_compatible('numpy') }}
    - hdf5 >=1.10
    - h5py >=2.7.1
    - nomkl                             # [unix]
    - openblas                          # [unix]

test:
  imports:
    - six
    - h5py

outputs:
  - name: cctbx-base-deps

  - name: cctbx-deps
    requirements:
      run:
        - biopython
        - ipython
        - libsvm
        - psutil
        - mrcfile
        - pyopengl
        - matplotlib-base
        - pillow
        - reportlab
        - PyRTF
        - sphinx
        - wxpython
        - python.app                    # [osx]
        - {{ pin_subpackage('cctbx-base-deps', exact=True) }}

  - name: cctbx-base-deps-dev
    requirements:
      run:
        # select LLVM compatible with macOS Xcode
        # https://en.wikipedia.org/wiki/Xcode#Latest_versions
        - libcxx >=4.0,<5.0             # [osx]
        - scons
        - {{ pin_subpackage('cctbx-base-deps', exact=True) }}

  - name: cctbx-deps-dev
    requirements:
      run:
        - libcxx >=4.0,<5.0             # [osx]
        - scons
        - {{ pin_subpackage('cctbx-deps', exact=True) }}

about:
  home: https://cctbx.github.io
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.txt
  summary: Metapackage for CCTBX dependencies
  description: |
    The Computational Crystallography Toolbox (CCTBX) is an open source
    library of tools written in Python and C/C++ for macromolecular
    crystallography. This metapackage defines the dependencies needed
    for running and developing CCTBX.
  doc_url: https://cctbx.github.io/
  dev_url: https://github.com/cctbx/cctbx_project

extra:
  recipe-maintainers:
    - bkpoon
