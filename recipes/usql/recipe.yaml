context:
  version: "0.20.8"

package:
  name: usql
  version: ${{ version }}

source:
  url: https://github.com/xo/usql/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 71c25971a7ab8558a34d106eb60bf9d06acdfd8b5e6417062748821005aac1a7

build:
  number: 0
  script:
    - if: unix
      then: |
        go build -v -ldflags="-s -w" -o $PREFIX/bin/usql .
      else: |
        go build -v -ldflags="-s" -o %LIBRARY_BIN%\usql.exe .
    - go-licenses save . --save_path=license-files || true

requirements:
  build:
    - ${{ compiler('go-nocgo') }}
    - go-licenses

tests:
  - script:
      - usql --version

about:
  homepage: https://github.com/xo/usql
  repository: https://github.com/xo/usql
  documentation: https://github.com/xo/usql
  summary: Universal command-line interface for SQL databases
  description: |
    usql is a universal command-line interface for PostgreSQL, MySQL, Oracle Database, SQLite3, Microsoft SQL Server, and many other databases including NoSQL and non-relational databases!
  license: MIT
  license_file:
    - LICENSE
    - license-files/

extra:
  recipe-maintainers:
    - VasanthakumarV
