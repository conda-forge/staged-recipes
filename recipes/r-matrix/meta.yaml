{% set version = '1.2-12' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-matrix
  version: {{ version|replace("-", "_") }}

source:
  fn: Matrix_{{ version }}.tar.gz
  url:
    - https://cran.r-project.org/src/contrib/Matrix_{{ version }}.tar.gz
    - https://cran.r-project.org/src/contrib/Archive/Matrix/Matrix_{{ version }}.tar.gz

  sha256: 16e51aef69dca94dc4fcba8aa35a0039d9d0e6abd9cc017c095e954e1e2ca4f2

build:
  number: 0
  skip: true  # [win32]

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - r-base
    - r-lattice
    - posix                # [win]
    - {{native}}toolchain  # [win]
    - gcc                  # [not win]

  run:
    - r-base
    - r-lattice
    - libgcc  # [not win]

test:
  commands:
    - $R -e "library('Matrix')"  # [not win]
    - "\"%R%\" -e \"library('Matrix')\""  # [win]

about:
  home: http
  license: GPL (>= 2)
  summary: A rich hierarchy of matrix classes, including triangular, symmetric, and diagonal
    matrices, both dense and sparse and with pattern, logical and numeric entries.   Numerous
    methods for and operations on these matrices, using 'LAPACK' and 'SuiteSparse' libraries.
  license_family: GPL3
  license_file: '{{ environ["PREFIX"] }}\/lib\/R\/share\/licenses\/GPL-3'  # [unix]
  license_file: '{{ environ["PREFIX"] }}\R\share\licenses\GPL-3'  # [win]
extra:
   recipe-maintainers:
    - MathiasHaudgaard
    - FrodePedersen
    - ArneKr
    - Johanneskoester
    - Bgruening
    - Daler
    - Jdblischak
