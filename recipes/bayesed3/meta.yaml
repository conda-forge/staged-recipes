{% set name = "bayesed3" %}
{% set version = "2026.01.31" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/hanyk/BayeSED3/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 41251adba0c24e67547c71b3d91998b473a7ae0a189a075fddde7d19c7ae2154

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('fortran') }}
    - {{ stdlib("c") }}
  host:
    - python
    - pip
    - setuptools
  run:
    - openmpi 4.1.6
    - python
    # Python dependencies from pyproject.toml
    - numpy >=1.20.0
    - h5py >=3.1.0
    - astropy >=4.2
    - matplotlib-base >=3.3.0
    - getdist >=1.3.0
    - requests >=2.25.0
    - tqdm >=4.60.0

test:
  imports:
    - bayesed
  commands:
    - python -c "import bayesed; print(bayesed.__version__)"
    - python -c "from bayesed import BayeSEDInterface; print('BayeSEDInterface imported successfully')"

about:
  home: https://github.com/hanyk/BayeSED3
  license: MIT
  license_file: LICENSE
  summary: Bayesian SED synthesis and analysis tool for galaxies and AGNs with full posterior inference and model comparison
  description: |
    BayeSED3 is a sophisticated Bayesian tool for interpreting spectral energy distributions (SEDs) 
    of galaxies and Active Galactic Nuclei (AGNs). It performs rigorous Bayesian parameter estimation 
    using posterior probability distributions and model comparison via Bayesian evidence calculation.
    
    Key Capabilities:
    - Multi-component SED modeling: stellar populations, dust attenuation/emission, AGN components
    - Flexible star formation histories (exponential, delayed, non-parametric)
    - Comprehensive AGN modeling (accretion disk, BLR/NLR, torus, FeII emission)
    - Handles photometric and spectroscopic data (individual or combined)
    - Machine learning-based SED emulation (FANN, AKNN) for computational efficiency
    - MPI-based parallel processing for large datasets
    - Nested sampling via MultiNest for robust Bayesian inference
    - Python API with high-level interface and comprehensive result analysis
    - GetDist integration for advanced posterior visualization
    - Optional GUI for interactive model configuration
    
    Scientific Applications:
    - Galaxy stellar mass, age, and star formation rate estimation
    - AGN-host galaxy decomposition
    - Dust properties and attenuation curves
    - Model comparison using Bayesian evidence
    - Mock survey analysis and forecasting
    
    Platform Support: Linux x86_64, macOS x86_64/ARM64 (via Rosetta 2), Windows (via WSL)
    
    Citation: Han & Han 2012 (ApJ 749, 123); Han & Han 2014 (ApJS 215, 2); 
    Han & Han 2019 (ApJS 240, 3); Han et al. 2023 (ApJS 269, 39)
  doc_url: https://github.com/hanyk/BayeSED3
  dev_url: https://github.com/hanyk/BayeSED3

extra:
  recipe-maintainers:
    - hanyk
