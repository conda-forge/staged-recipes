{% set name = "pypulseq" %}
{% set version = "1.4.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/pypulseq-{{ version }}.tar.gz
  sha256: 9d7fdf9969af751376cd16f07084e3080942ff1b2d47d4c846c972e1413913c2

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  host:
    - python >=3.6
    - pip
    - setuptools
  run:
    - python >=3.6
    - coverage >=6.2
    - matplotlib-base >=3.5.2
    - numpy >=1.23.5 # see https://github.com/scipy/scipy/blob/30a92651acb845fea4458189f09c25fe26a58699/pyproject.toml#L49C13-L49C19
    - scipy >=1.8.1

test:
  imports:
    - pypulseq
  source_files:
    - pypulseq/tests
  commands:
    - pytest -m "not matlab_seq_comp and not sigpy" # ignore tests which involve matlab data or sigpy lib
  requires:
    - pip
    - coverage >= 6.2
    - pytest

about:
  home: https://github.com/imr-framework/pypulseq
  summary: Pulseq in Python
  description: |
    PyPulseq: A Python Package for MRI Pulse Sequence Design
    which enables vendor-neutral pulse sequence design in Python.
    The pulse sequences can be exported as a .seq file to be run
    on Siemens, GE, Bruker and now also Philips hardware
    by leveraging their respective Pulseq interpreters. This tool
    is targeted at MRI pulse sequence designers,
    researchers, students and other interested users.
    It is a translation of the Pulseq framework originally written in Matlab.
  license: AGPL-3.0
  license_file: LICENSE
  doc_url: https://pypulseq.readthedocs.io/
  dev_url: https://github.com/imr-framework/pypulseq

extra:
  recipe-maintainers:
    - sravan953
    - btasdelen
    - frankzijlstra
    - schuenke
    - lrlunin
