context:
  version: "0.8.0"

package:
  name: shoutrrr
  version: ${{ version }}

source:
  url: https://github.com/containrrr/shoutrrr/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 141c233631f51450f1015f32f7acd831d8585f0ebbd53e3b32675f46199d4248
  target_directory: src

build:
  number: 0
  script:
    - cd src/shoutrrr
    - go-licenses save . --save_path ../../library_licenses
    - if: unix
      then: go build -v -o $PREFIX/bin/shoutrrr -ldflags="-s -w"
      else: go build -v -o %LIBRARY_BIN%\shoutrrr.exe -ldflags="-s"

requirements:
  build:
    - ${{ compiler("go-nocgo") }}
    - go-licenses

tests:
  - script: shoutrrr --help
  - package_contents:
      bin:
        - shoutrrr
      strict: true

about:
  homepage: https://github.com/containrrr/shoutrrr
  summary: Notification library for gophers and their furry friends.
  description: |
    Notification library for gophers and their furry friends.
  license: MIT
  license_file:
    - src/LICENSE
    - library_licenses/
  documentation: https://pkg.go.dev/github.com/containrrr/shoutrrr
  repository: https://github.com/containrrr/shoutrrr

extra:
  recipe-maintainers:
    - pavelzw
