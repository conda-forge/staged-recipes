# manually update or generated from template
package:
    name: parallel-preprocessor
    version: 0.3
source:
    # calc check sum by command sha256sum
    sha256: 89aad3990c278c2352bacacdc0d7edc77b9922200272e50ff9591c6f957f6219
    url: https://github.com/ukaea/parallel-preprocessor/releases/download/dev/parallel-preprocessor.zip

build:
    # number should be generated, or manually update, YYMM pattern here, must be 0 for the first PR
    number: '0'
    string: oct_2020

requirements:
    build:
        - cmake
        - git
        - compilers
        - make  # [unix]
        - occt >=7.4
        - tbb
        - tbb-devel
        - pybind11
    host:
        - ca-certificates
        - openssl
        - vc >=14,<15.0a0  # [win]
        - vs2015_runtime  # [win]
    run:
        - occt >=7.4
        - tbb
        - vs2015_runtime [win]

test:
    commands:
        - if not exist %LIBRARY_BIN%\pppApp%SHLIB_EXT% exit 1  # [win]
        - test -f $PREFIX/lib/libpppApp$SHLIB_EXT  # [unix]
        - echo "started test in the folder $(pwd)"  # [unix]
        - if [ -d conda-build ]; then cd conda-build; fi  # [unix]
        - if [ -f run_all_tests.sh ]; sh run_all_tests.sh; fi  # [unix]
 
about:
    home: https://github.com/ukaea/parallel-preprocessor
    license: LGPL-2.1-only
    license_family: LGPL
    license_file: LICENSE
    summary: 'parallel CAD preprocessor for large assembly simulation'

extra:
    recipe-maintainers:
        - qingfengxia
