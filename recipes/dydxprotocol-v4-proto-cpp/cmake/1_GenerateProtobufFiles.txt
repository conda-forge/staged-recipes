set(GENERATED_PROTO_DIR "${CMAKE_CURRENT_BINARY_DIR}/_generated")
file(MAKE_DIRECTORY ${GENERATED_PROTO_DIR})

protobuf_generate(
    PROTOC_OUT_DIR ${GENERATED_PROTO_DIR}
    OUT_VAR GENERATED_PROTO_FILES
    EXPORT_MACRO DYDX_V4_PROTO_API
    LANGUAGE cpp
    PROTOS ${proto_files})

add_custom_target(generate_proto_files DEPENDS ${GENERATED_PROTO_FILES})
