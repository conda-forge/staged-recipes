schema_version: 1

context:
  name: atk
  version: "2.38.0"

package:
  name: libatk
  version: ${{ version }}

source:
  url: https://download.gnome.org/sources/${{ name }}/2.38/${{ name }}-${{ version }}.tar.xz
  sha256: ac4de2a4ef4bd5665052952fe169657e65e895c5057dffb3c2a810f6191a0c36

build:
  number: 0
  script:
    - if: unix
      then: meson setup builddir --prefix=$PREFIX --libdir=lib -Dintrospection=false
      else: set "LDFLAGS=%LDFLAGS% intl.lib" && meson setup builddir --prefix=%LIBRARY_PREFIX% --libdir=lib -Dintrospection=false
    - meson compile -C builddir
    - meson install -C builddir

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - meson
    - ninja
    - pkg-config
  host:
    - glib
    - if: not linux
      then: libintl-devel

tests:
  - package_contents:
      lib:
        - atk-1.0${{ SHLIB_EXT }}
      include:
        - atk-1.0/atk/atk.h
  - script:
      - pkg-config --print-errors --modversion atk
    requirements:
      run:
        - pkg-config

about:
  license: LGPL-2.1-or-later
  license_file: COPYING
  summary: Accessibility Toolkit
  description: |
    ATK provides the set of accessibility interfaces that are implemented
    by other toolkits and applications. Using the ATK interfaces,
    accessibility tools have full access to view and control running
    applications.
  homepage: https://wiki.gnome.org/Accessibility
  repository: https://gitlab.gnome.org/Archive/atk
  documentation: https://docs.gtk.org/atk/

extra:
  recipe-maintainers:
    - ytausch
