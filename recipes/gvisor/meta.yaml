{% set provider = "gvisor" %}
{% set goname = "github.com/google/"+provider.lower() %}
{% set version = "20200323.0" %}

{% set name = goname.split('/')[-1] %}
{% set pkg_src = ('src/'+goname).replace("/",os.sep) %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
    url: https://github.com/google/{{ provider }}/archive/release-{{ version }}.tar.gz
    sha256: 4a4b0d42ef741cfdb831ebc05ef6f483217515f6d186abc96af6fea3d1312353

build:
  number: 0
  skip: True  # [osx or win]

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - {{ compiler('go') }}
    - git

test:
  commands:
    - test //pkg/...
    - test //runsc/...
  source_files:
    - pkg/
    - runsc/

about:
  home: https://gvisor.dev
  license: Apache-2.0
  license_file: LICENSE
  summary: Container Runtime Sandbox
  doc_url: https://gvisor.dev/docs
  dev_url: https://github.com/google/gvisor

extra:
  recipe-maintainers:
    - rluria14
    - oblute
