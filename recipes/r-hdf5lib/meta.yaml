{% set version = '2.0.0.4' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-hdf5lib
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/hdf5lib_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/hdf5lib/hdf5lib_{{ version }}.tar.gz
  sha256: 5226aecadd98c7968792bae97b2b7cc99ff71210d97507238a4f1143b30be011

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ stdlib("c") }}            # [not win]
    - {{ stdlib("m2w64_c") }}      # [win]
    - {{ compiler('c') }}          # [not win]
    - {{ compiler('m2w64_c') }}    # [win]
    - {{ posix }}filesystem        # [win]
    - {{ posix }}sed               # [win]
    - {{ posix }}grep              # [win]
    - {{ posix }}autoconf
    - {{ posix }}automake          # [not win]
    - {{ posix }}automake-wrapper  # [win]
    - pkg-config
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
  run:
    - r-base

test:
  commands:
    - $R -e "library('hdf5lib')"           # [not win]
    - "\"%R%\" -e \"library('hdf5lib')\""  # [win]

about:
  home: https://cmmr.github.io/hdf5lib
  dev_url: https://github.com/cmmr/hdf5lib
  license: MIT
  summary: '''HDF5'' (Hierarchical Data Format 5) is a high-performance library and file format
    for storing and managing large, complex data. This package provides the static libraries
    and headers for the ''HDF5'' ''C'' library (release 2.0.0). It is intended for R
    package developers to use in the ''LinkingTo'' field, which eliminates the need
    for users to install system-level ''HDF5'' dependencies. This build is compiled
    with thread-safety enabled and supports dynamic loading of external compression
    filters. ''HDF5'' is developed by ''The HDF Group'' <https://www.hdfgroup.org/>.'
  license_family: MIT
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/MIT'
    - LICENSE

extra:
  recipe-maintainers:
    - conda-forge/r
    - dansmith01

# Package: hdf5lib
# Type: Package
# Title: Headers and Static Libraries for 'HDF5'
# Version: 2.0.0.4
# Authors@R: c( person("Daniel P.", "Smith", email = "dansmith01@gmail.com", role = c("aut", "cre"), comment = c(ORCID = "0000-0002-2479-2044")), person("The HDF Group", role = "cph", comment = "Copyright holder of the HDF5 library"), person("Jean-loup", "Mark", role = "cph", comment = "Copyright holder of the zlib library"), person("Gailly", "Adler", role = "cph", comment = "Copyright holder of the zlib library") )
# Description: 'HDF5' (Hierarchical Data Format 5) is a high-performance library and file format for storing and managing large, complex data. This package provides the static libraries and headers for the 'HDF5' 'C' library (release 2.0.0). It is intended for R package developers to use in the 'LinkingTo' field, which eliminates the need for users to install system-level 'HDF5' dependencies. This build is compiled with thread-safety enabled and supports dynamic loading of external compression filters. 'HDF5' is developed by 'The HDF Group' <https://www.hdfgroup.org/>.
# URL: https://github.com/cmmr/hdf5lib, https://cmmr.github.io/hdf5lib/
# BugReports: https://github.com/cmmr/hdf5lib/issues
# License: MIT + file LICENSE
# Encoding: UTF-8
# Depends: R (>= 4.2.0)
# NeedsCompilation: yes
# Suggests: knitr, rmarkdown, testthat (>= 3.0.0)
# Config/testthat/edition: 3
# RoxygenNote: 7.3.3
# Config/Needs/website: rmarkdown
# Packaged: 2025-12-22 18:37:23 UTC; Daniel
# Author: Daniel P. Smith [aut, cre] (ORCID: <https://orcid.org/0000-0002-2479-2044>), The HDF Group [cph] (Copyright holder of the HDF5 library), Jean-loup Mark [cph] (Copyright holder of the zlib library), Gailly Adler [cph] (Copyright holder of the zlib library)
# Maintainer: Daniel P. Smith <dansmith01@gmail.com>
# Repository: CRAN
# Date/Publication: 2025-12-22 19:00:02 UTC
