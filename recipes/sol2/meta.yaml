{% set name = "sol2" %}
{% set version = "3.5.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ThePhD/sol2/archive/v{{ version }}.tar.gz
  sha256: 86c0f6d2836b184a250fc2907091c076bf53c9603dd291eaebade36cc342e13c

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - cmake
    - ninja
    - lua >=5.1
  host:
    - lua >=5.1

test:
  commands:
    - test -d ${PREFIX}/include/sol  # [unix]
    - test -f ${PREFIX}/include/sol/sol.hpp  # [unix]
    - test -f ${PREFIX}/share/cmake/sol2/sol2-config.cmake  # [osx]
    - test -f ${PREFIX}/share/cmake/sol2/sol2-config-version.cmake  # [osx]
    - test -f ${PREFIX}/share/cmake/sol2/sol2-config.cmake  # [linux]
    - test -f ${PREFIX}/share/cmake/sol2/sol2-config-version.cmake  # [linux]
    - if not exist %LIBRARY_PREFIX%\include\sol\sol.hpp (exit 1)  # [win]
    - if not exist %LIBRARY_PREFIX%\share\cmake\sol2\sol2-config.cmake (exit 1)  # [win]
    - if not exist %LIBRARY_PREFIX%\share\cmake\sol2\sol2-config-version.cmake (exit 1)  # [win]

about:
  home: https://github.com/ThePhD/sol2/
  summary: 'Simple, fast, extensible JSON encoder/decoder for Python'
  description: |
    sol2 is a C++ library binding to Lua. It currently supports all 
    Lua versions 5.1+ (LuaJIT 2.0+ and MoonJIT included). sol2 aims 
    to be easy to use and easy to add to a project. The library is 
    header-only for easy integration with projects, and a single 
    header can be used for drag-and-drop start up.
  license: MIT
  license_family: MIT
  license_file: LICENSE.txt
  doc_url: http://sol2.rtfd.io/
  dev_url: https://github.com/ThePhD/sol2/

extra:
  recipe-maintainers:
    - joergbrech
