{% set name = "pyrovelocity" %}
{% set version = "0.1.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/pyrovelocity-{{ version }}.tar.gz
  sha256: e4158bbca57fe9c3c43efb15f0c0fdb2ce8cdf9c3be8c1c18dad1c3e9f6e7bb3

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  host:
    - python >=3.8,<3.9
    - poetry-core >=1.1.0
    - pip
  run:
    - python >=3.8,<3.9
    - click >=8.0.1
    - marshmallow >=3.18.0
    - desert >=2022.9.22
    - leidenalg ==0.9.0
    - pyro-ppl ==1.6.0
    - seaborn ==0.11.2
    - scipy ==1.9.3
    - scvelo ==0.2.4
    - scvi-tools ==0.13.0
    - pytorch-lightning ==1.3.0
    - pytorch ==1.8.1
    - scikit-misc ==0.1.4
    - torchmetrics ==0.5.1
    - h5py ==3.7.0
    - anndata ==0.7.5
    - adjusttext ==0.7.3
    - astropy ==5.1
    - cospar ==0.1.9
    - colorlog ==6.7.0
    - omegaconf ==2.2.3
    - rich ==12.6.0
    - hydra-core ==1.2.0
    - mlflow ==1.30.0

test:
  imports:
    - pyrovelocity
    - pyrovelocity.api
    - pyrovelocity.data
    - pyrovelocity.plot
  commands:
    - pip check
  requires:
    - pip

about:
  home: https://github.com/pinellolab/pyrovelocity
  summary: A multivariate RNA Velocity model to estimate future cell states with uncertainty using probabilistic modeling with pyro.
  license: AGPL-3.0-only
  license_file: LICENSE
  doc_url: https://pyrovelocity.readthedocs.io
  dev_url: https://github.com/pinellolab/pyrovelocity

extra:
  recipe-maintainers:
    - cameronraysmith
