{% set name = "taxoniq" %}
{% set version = "0.6.0" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz"
  sha256: 19fb5d7f85158dc9e80c636635716ce14bb13671abefc9b785257789353f6982

build:
  number: 2
  entry_points:
    - taxoniq=taxoniq.cli:cli
  script: "{{ PYTHON }} -m pip install . --no-deps -vv"

requirements:
  host:
    - ncbi_taxon_db
    - ncbi_refseq_accession_db
    - ncbi_refseq_accession_lengths
    - ncbi_refseq_accession_offsets
    - pip
    - python
    - urllib3 >=1.25.8
    - zstandard >=0.15.1
  run:
    - ncbi_taxon_db
    - ncbi_refseq_accession_db
    - ncbi_refseq_accession_lengths
    - ncbi_refseq_accession_offsets
    - python
    - urllib3 >=1.25.8
    - zstandard >=0.15.1

test:
  imports:
    - taxoniq
    - taxoniq.vendored
  commands:
    - taxoniq --help
  requires:
    - coverage
    - flake8
    - wheel

about:
  home: "https://github.com/chanzuckerberg/taxoniq"
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: "Taxoniq: Taxon Information Query - fast, offline querying of NCBI Taxonomy and related data"
  doc_url: https://taxoniq.github.io/
