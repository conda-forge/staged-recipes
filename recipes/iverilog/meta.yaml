{% set version = "10.2" %}

package:
  name: iverilog
  version: {{ version }}

source:
  url: https://github.com/steveicarus/iverilog/archive/v{{ version | replace(".", "_") }}.tar.gz
  sha256: f54d91821223c71c70f4735a1fb2af39c62efbccdeb9b0060ea1cf9c67647ee3

build:
  number: 0
  skip: True  # [win]
  script:
    - export CXXFLAGS=`echo $CXXFLAGS | sed -e 's/-std=c++17/-std=c++14/'`
    - sh autoconf.sh
    - ./configure --prefix={{ PREFIX }}
    - make -j{{ CPU_COUNT }}
    - make install

requirements:
  build:
    - {{ compiler('cxx') }}
    - autoconf
    - make
      # host:
      # run:
test:
  commands:
    - iverilog -V

about:
  home: https://github.com/steveicarus/iverilog
  license: LGPL-2.1
  license_family: LGPL
  license_file: COPYING
  summary: 'Simple, fast, extensible JSON encoder/decoder for Python'
  summary: 'The Icarus Verilog Compilation System'

  # The remaining entries in this section are optional, but recommended
  description: |
    Icarus Verilog is intended to compile ALL of the Verilog HDL as
    described in the IEEE-1364 standard. Of course, it's not quite there
    yet. It does currently handle a mix of structural and behavioral
    constructs. For a view of the current state of Icarus Verilog, see its
    home page at <http://iverilog.icarus.com/>.

extra:
  recipe-maintainers:
    - hmaarrfk
