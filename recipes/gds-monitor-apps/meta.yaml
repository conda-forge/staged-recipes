{% set name = "gds-monitor-apps" %}
{% set version = "3.0.0" %}

# dependencies
{% set gds_base_version = "3.0.0" %}
{% set gds_dmt_version = "3.0.0" %}
{% set gds_frameio_version = "3.0.0" %}
{% set gds_gui_version = "3.0.0" %}
{% set ldas_tools_framecpp_version = "2.5.8" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://software.igwn.org/sources/source/{{ name }}-{{ version }}.tar.gz
  sha256: 90a86bfe86b0e07e3c2d49dafdce8d61ffa583b11fb4168d04908e4b0f65c927

build:
  error_overlinking: true
  error_overdepending: true
  ignore_run_exports:
    - gds-services
  number: 0
  skip: true  # [not linux]

requirements:
  build:
    - {{ compiler('cxx') }}
    - make
    - pkg-config
  host:
    - fftw
    - gds-base >={{ gds_base_version }}
    - gds-base-gdstrig >={{ gds_base_version }}
    - gds-base-monitors >={{ gds_base_version }}
    - gds-dmt-base >={{ gds_dmt_version }}
    - gds-dmt-monitors >={{ gds_dmt_version }}
    - gds-frameio-base >={{ gds_frameio_version }}
    - gds-gui-crtools >={{ gds_gui_version }}
    - gds-services >={{ gds_base_version }}
    - jsoncpp
    - ldas-tools-al
    - ldas-tools-framecpp >={{ ldas_tools_framecpp_version }}
    - libboost-headers
    - root_base
  run:
    - gds-dmt-base >={{ gds_dmt_version }}
    - gds-dmt-monitors >={{ gds_dmt_version }}
    - jsoncpp

test:
  commands:
    - kleineWelleM
    - SenseMonitor --help

about:
  home: https://computing.docs.ligo.org/daswgweb/projects/dmt.html
  license: GPL-2.0-only
  license_family: GPL
  license_file: COPYING
  summary: DMT Monitor programs
  description: GDS DMT monitor programs

extra:
  recipe-maintainers:
    - duncanmmacleod
    - emaros
