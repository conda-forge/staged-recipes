schema_version: 1

context:
  name: py5
  version: 0.10.4a2

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/${{ name[0] }}/${{ name }}/py5-${{ version }}.tar.gz
  sha256: 54686570b3954cc57f59b3a1032e289f49f068830fddb5c780bd302926c273dd

build:
  number: 0
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  files:
    exclude:
      - ${{ "*.dll" if linux or mac }}
      - ${{ "*.exe" if linux or mac }}
      - ${{ "*.so" if windows or mac }}
      - ${{ "*.dylib" if windows or linux }}
  python:
    entry_points:
      - py5-cmd = py5_tools.tools.py5cmd:main
      - py5-translate-imported2module = py5_tools.tools.py5translate_imported2module:main
      - py5-translate-module2imported = py5_tools.tools.py5translate_module2imported:main
      - py5-translate-processingpy2imported = py5_tools.tools.py5translate_processingpy2imported:main
      - py5-utils = py5_tools.tools.py5utils:main
      - run_sketch = py5_tools.tools.run_sketch:main
      - py5-run-sketch = py5_tools.tools.run_sketch:main
      - py5-live-coding = py5_tools.tools.live_coding:main

requirements:
  host:
    - ${{ stdlib("c") }}
    - openjdk
    - python
    - hatchling
    - pip
    - setuptools
  run:
    - autopep8 >=2.2
    - colour >=0.1.5
    - jpype1 >=1.5.0
    - line_profiler >=4.1
    - matplotlib-base >=3.9
    - numpy >=1.26
    - openjdk
    - pillow >=10.2
    - ${{ "pyobjc >=10.1" if darwin }}
    - python
    - ${{ "pywin32 >=307" if win }}
    - requests >=2.31
    - shapely >=2.0
    - stackprinter >=0.2.11
    - trimesh >=4.3

tests:
  - python:
      imports:
        - py5_tools
      pip_check: false
  - requirements:
      run:
        - pip
    script:
      - py5-cmd --help
      - py5-translate-imported2module --help
      - py5-translate-module2imported --help
      - py5-translate-processingpy2imported --help
      - py5-utils --help
      - run_sketch --help
      - py5-run-sketch --help
      - py5-live-coding --help

about:
  summary: Processing for CPython
  license: LGPL-2.1-only
  license_file: LICENSE
  homepage: https://py5coding.org/
  repository: https://github.com/py5coding/py5
  description: |
    py5 is a new version of Processing for Python 3.9+. The goal of py5 is to
    create a version of Processing that is integrated into the Python ecosystem.
    Built into the library are thoughtful choices about how to best get py5 to
    work with other popular Python libraries and tools such as Jupyter, numpy,
    shapely, trimesh, matplotlib, and Pillow.

    py5 is an excellent choice for educators looking to teach Python in the context
    of creative coding and is currently used in classrooms all around the world. The
    documentation website includes introductory tutorials as well as extensive
    reference documentation, complete with example code.

extra:
  recipe-maintainers:
    - tetov
