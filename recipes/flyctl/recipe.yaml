context:
  version: "0.3.210"

package:
  name: flyctl
  version: ${{ version }}

source:
  url: https://github.com/superfly/flyctl/archive/v${{ version }}.tar.gz
  sha256: 6a42c6f29ae67ffe64d9e5968581663b77552bcef9f6a04569bc39b79c0389ed

build:
  number: 0
  script:
    - if: unix
      then:
        - go build -v -o $PREFIX/bin/flyctl -ldflags="-s -w"
        - ln -s flyctl $PREFIX/bin/fly
      else:
        - go build -v -o %LIBRARY_BIN%\flyctl.exe -ldflags="-s"
        - cp flyctl %LIBRARY_BIN%\fly

requirements:
  build:
    - ${{ compiler("go-nocgo") }}

tests:
  - script:
    - flyctl version
    - fly version

about:
  homepage: https://fly.io
  repository: https://github.com/superfly/flyctl
  documentation: https://fly.io/docs/flyctl/
  license: Apache-2.0
  license_file: LICENSE
  summary: Command line tools for fly.io services
  description: |
    flyctl is the command-line interface for Fly.io, a platform for running
    full stack apps and databases close to your users. The flyctl command
    allows you to deploy, manage, and scale your applications on the Fly.io
    platform.

extra:
  recipe-maintainers:
    - Hofer-Julian
