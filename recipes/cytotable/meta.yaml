---
# conda build recipe file for cytotable
{% set name = "cytotable" %}
{% set version = "0.0.3" %}

# specifies package name and version to release
package:
  name: {{ name|lower }}
  version: {{ version }}

# specifies the location for conda build source
source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: c3340bb723db2f044c113374d67bda892aa40ac6edf1646923fa1e2a723a4519

# specifies build architecture and call for installation
build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0
  # note: skipping windows due to Parsl Windows incompatibility issues
  # see the following for more info: https://github.com/Parsl/parsl/issues/1878
  skip: true  # [win]

# specifies the build and runtime requirements
requirements:
  # requirements for build
  build:
    - "python >=3.8,<3.13"
    - "pip"
    - "poetry"
  # requirements specific to target platform
  host:
    - "python >=3.8,<3.13"
    - "pip"
    - "poetry"
  # requirements for running the package
  run:
    - "python >=3.8,<3.13"
    - "pyarrow >=13.0.0,<14.0.0"
    - "cloudpathlib >=0.15.0,<0.16.0"
    - "python-duckdb >=0.8.0,<0.9.0"
    - "parsl >=2023.9.18"

# specifies testing environment tests
test:
  imports:
    - cytotable
  commands:
    - pip check
  requires:
    - pip

# specifies various project metadata
about:
  home: https://github.com/cytomining/CytoTable
  summary: Transform CellProfiler and DeepProfiler data for processing image-based profiling readouts with Pycytominer and other Cytomining tools.
  license: BSD-3-Clause
  license_file: LICENSE
  doc_url: https://cytomining.github.io/CytoTable/

extra:
  # specifies conda recipe maintainers
  recipe-maintainers:
    - d33bs
    - axiomcura
    - falquaddoomi
    - vincerubinetti
    - gwaybio
