{% set name = "txrm2tiff" %}
{% set version = "1.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/DiamondLightSource/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: d29d56ccd0fc315716e0d9f31695b9d3cd994c9943f42b24a0d59d6c7e29c420

build:
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"
  skip: True  # [py<36]

requirements:

  build:
    - python
    - setuptools
  host:
    - python
    - pip
    - numpy >=1.17.4
    - scipy
  run:
    - python
    - {{ pin_compatible('numpy') }}
    - tifffile >=2019.7.26
    - mrcfile >=1.1.2
    - omexml-dls >=1.0.3
    - olefile >=0.46
    - scipy >=1.3.3
    - pywin32  # [win]

test:
  imports:
    - {{ name }}
    - win32com.client  # [win]
  commands:
    - {{ name }} setup --windows-shortcut  # [win]
    - {{ name }} --version

about:
  home: https://github.com/DiamondLightSource/{{ name }}
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.txt
  summary: 'Converts txrm/xrm files to OME tif/tiff files'

  description: |
    Converts txrm/xrm files to OME tif/tiff files.
    txrm2tiff was created for users of beamline B24 of Diamond Light 
    Source by Thomas Fish. This has been adapted from B24's the automatic 
    processing pipeline. Parts of this code were originally written by 
    Kevin Savage, with further additions and amendments by Peter Chang, 
    Victoria Beilsten-Edmands, and Thomas Fish.
  doc_url: https://github.com/DiamondLightSource/{{ name }}/blob/master/README.md
  dev_url: https://github.com/DiamondLightSource/{{ name }}

extra:
  recipe-maintainers:
    - thomasmfish
