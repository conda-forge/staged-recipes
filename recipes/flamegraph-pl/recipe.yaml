context:
  version: "1.0"

package:
  name: flamegraph-pl
  version: ${{ version }}

source:
  url: https://github.com/brendangregg/FlameGraph/archive/v${{ version }}.tar.gz
  sha256: c5ba824228a4f7781336477015cb3b2d8178ffd86bccd5f51864ed52a5ad6675

build:
  noarch: generic
  number: 0

requirements:
  run:
    - perl
    - if: unix
      then:  __unix
      else: __win

tests:
  - script:
      - flamegraph test/results/perf-dd-stacks-01-collapsed-all.txt > graph.svg
    files:
      source:
        - test/results/perf-dd-stacks-01-collapsed-all.txt

about:
  homepage: https://www.brendangregg.com/flamegraphs.html
  summary: flame stack grapher
  license: CDDL-1.0
  license_file: docs/cddl1.txt
  repository: https://github.com/brendangregg/FlameGraph

extra:
  recipe-maintainers:
    - lucascolley
