{% set version = '1.5.1' %}
{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-climate4r
  version: {{ version|replace("-", "_") }}

build:
  merge_build_host: True  # [win]
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ posix }}filesystem        # [win]
    - {{ posix }}git
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base >=3.5,<4
    - r-climate4r.udg       >=0.2.0
    - r-loader.java         >=1.1.1
    - r-loader              >=1.7.0
    - r-loader.ecoms        >=1.4.6
    - r-transformer         >=2.1.0
    - r-downscaler          >=3.3.2
    - r-downscaler.keras    >=1.0.0
    - r-visualizer          >=1.6.0
    - r-convertr            >=0.2.0
    - r-geoprocessor        >=0.2.0
    - r-climate4r.climdex   >=0.2.1
    - r-climate4r.indices   >=0.1.0
    - r-loader.2nc          >=0.1.1
    - r-firedanger          >=1.1.0
    - r-value               >=2.2.1
    - r-climate4r.value     >=0.0.2
    - r-mopa                >=1.0.0
    - r-drought4r           >=0.2.0
    - r-climate4r.datasets  >=0.0.1
  run:
    - r-base >=3.5,<4
    - r-climate4r.udg       >=0.2.0
    - r-loader.java         >=1.1.1
    - r-loader              >=1.7.0
    - r-loader.ecoms        >=1.4.6
    - r-transformer         >=2.1.0
    - r-downscaler          >=3.3.2
    - r-downscaler.keras    >=1.0.0
    - r-visualizer          >=1.6.0
    - r-convertr            >=0.2.0
    - r-geoprocessor        >=0.2.0
    - r-climate4r.climdex   >=0.2.1
    - r-climate4r.indices   >=0.1.0
    - r-loader.2nc          >=0.1.1
    - r-firedanger          >=1.1.0
    - r-value               >=2.2.1
    - r-climate4r.value     >=0.0.2
    - r-mopa                >=1.0.0
    - r-drought4r           >=0.2.0
    - r-climate4r.datasets  >=0.0.1

test:
  commands:
    - $R -e "library('climate4R.indices')"           # [not win]
    - "\"%R%\" -e \"library('climate4R.indices')\""  # [win]

about:
  home: http://meteo.unican.es/climate4R
  license: GPL-3.0-or-later
  summary: A bundle of R packages for transparent climate data access, post-processing 
    (including data collocation and bias correction / downscaling) and visualization. 
    climate4R builds on two main data structures (grid and station, including metadata) 
    to deal with gridded and point data from observations, reanalysis, seasonal forecasts 
    and climate projections. It considers ensemble members as a basic dimension of the 
    data structures. Moreover, climate4R is transparently (and remotely) connected to 
    the Santander Climate Data Gateway, offering several state-of-the-art datasets 
    (including CMIP5 and CORDEX subsets).
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
    - cofinoa
