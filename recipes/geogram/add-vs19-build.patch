From c6d8bde811b2759710adcef23814086524d05fb8 Mon Sep 17 00:00:00 2001
From: Neil Godber <njgodber@outlook.com>
Date: Sun, 20 Jun 2021 10:44:40 +1000
Subject: [PATCH] add vs19 build

---
 cmake/platforms/Win64-vs2019/config.cmake | 3 +++
 cmake/platforms/Win64-vs2019/setvars.bat  | 8 ++++++++
 configure.bat                             | 2 +-
 3 files changed, 12 insertions(+), 1 deletion(-)
 create mode 100644 cmake/platforms/Win64-vs2019/config.cmake
 create mode 100644 cmake/platforms/Win64-vs2019/setvars.bat

diff --git a/cmake/platforms/Win64-vs2019/config.cmake b/cmake/platforms/Win64-vs2019/config.cmake
new file mode 100644
index 0000000..766a7f6
--- /dev/null
+++ b/cmake/platforms/Win64-vs2019/config.cmake
@@ -0,0 +1,3 @@
+set(VORPALINE_ARCH_64 true)
+include(${GEOGRAM_SOURCE_DIR}/cmake/platforms/Windows-vs.cmake)
+
diff --git a/cmake/platforms/Win64-vs2019/setvars.bat b/cmake/platforms/Win64-vs2019/setvars.bat
new file mode 100644
index 0000000..1ae9652
--- /dev/null
+++ b/cmake/platforms/Win64-vs2019/setvars.bat
@@ -0,0 +1,8 @@
+:: Get the Visual Studio installation dir
+set MSVCDIR=%VS160COMNTOOLS%..\..\VC\Auxiliary\Build
+
+:: Configure environment for Visual Studio
+call "%MSVCDIR%\VCVARSALL.BAT" x64
+
+:: Set the generator to use
+set CMAKE_VS_GENERATOR=Visual Studio 16 2019
diff --git a/configure.bat b/configure.bat
index 977bef8..490a176 100644
--- a/configure.bat
+++ b/configure.bat
@@ -41,7 +41,7 @@ if "%opsys%" == "" (
         exit /B 1
     )
 )
-
+echo %opsys%
 if not exist "cmake\platforms\%opsys%" (
     echo Error: unsupported platform: %opsys%
     exit /B 1
-- 
2.19.1.windows.1

