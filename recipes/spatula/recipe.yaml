schema_version: 1

context:
  name: "spatula"
  version: "0.1.0"

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/glotzerlab/${{ name }}/releases/download/v${{ version }}/${{ name }}-${{ version }}.tar.xz
  sha256: c2593a076df0ef30ee956ad036725d557e74a1dddea50cc46c34599a61563610

build:
  script: python -m pip install . --ignore-installed --no-cache-dir --no-deps -vv
  number: 0

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake
    - if: build_platform != target_platform
      then:
        - python
        - cross-python_${{ target_platform }}
        - pybind11
        - scikit-build-core
    - if: not win
      then:
        - make
  host:
    - python
    - pip
    - scikit-build-core
    - pybind11
  run:
    - python
    - numpy
    - scipy
    - freud >=3.0.0,!=3.2.0

tests:
  - script:
      - python -m pytest tests -v
    requirements:
      run:
        - pytest
        - pytest-rerunfailures
        - coxeter
    files:
      source:
        - tests/

about:
  homepage: https://glotzerlab.engin.umich.edu
  license: BSD-3-Clause
  license_file: LICENSE
  summary: Python package for calculation of symmetry based order parameters in molecular simulation systems.
  description: |
    SPATULA (Symmetry Pattern Analysis Toolkit for Understanding Local Arrangements) is a
    Python package for computing the continuous symmetry ordering of the neighbors of a
    point in space. In general, this is to compute the local ordering of particles (molecules)
    in simulations or experiments over time. The package serves as an extension of 
    `freud <https://github.com/glotzerlab/freud>`__ with a new order parameters.
  documentation: https://spatula.readthedocs.io/
  repository: https://github.com/glotzerlab/spatula

extra:
  recipe-maintainers:
    - DomFijan
    - joaander
    - janbridley
