{% set name = "tensorflow-macos" %}
{% set name_ = "tensorflow_macos" %}
{% set version = "2.9.2" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp310-cp310-macosx_11_0_arm64.whl  # [osx and arm64 and py==310]
    sha256: d6badc2586040fedc6ef03cffa5cdabb0e0733995742bc88bee5b25522dcf0ef  # [osx and arm64 and py==310]
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp310-cp310-macosx_11_0_x86_64.whl  # [osx and x86 and py==310]
    sha256: 72a6ba8dbb8ed5d075755a512287978f79025a843af2866d88db7bfbbf6d1696  # [osx and x86 and py==310]
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp39-cp39-macosx_11_0_arm64.whl  # [osx and arm64 and py==39]
    sha256: d2450e441c27fe6f49411b1b33680814e220278d3c94a29b5ac8fd4fee0b3b88  # [osx and arm64 and py==39]
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp39-cp39-macosx_11_0_x86_64.whl  # [osx and x86 and py==39]
    sha256: 957e2e03cf5d96c80d8944934a887d15e2f739e3e146cf515afdce207860c94d  # [osx and x86 and py==39]
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp38-cp38-macosx_11_0_arm64.whl  # [osx and arm64 and py==38]
    sha256: abc1f9cd95eb1541c548faab1e2fc6b82d769294069f918eb01b721c9a15515a  # [osx and arm64 and py==8]
  - url: https://files.pythonhosted.org/packages/cp310/t/{{ name }}/{{ name_ }}-{{ version }}-cp38-cp38-macosx_11_0_x86_64.whl  # [osx and x86 and py==38]
    sha256: 18e80fe9d0ae46e963d1f4dfd79c0eba9447d678ea3bb3d0a98e6ab135ef16e3  # [osx and x86 and py==38]

build:
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp310-cp310-macosx_11_0_arm64.whl  # [osx and arm64 and py==310]
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp310-cp310-macosx_11_0_x86_64.whl  # [osx and x86 and py==310]
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp39-cp39-macosx_11_0_arm64.whl  # [osx and arm64 and py==39]
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp39-cp39-macosx_11_0_x86_64.whl  # [osx and x86 and py==39]
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp38-cp38-macosx_11_0_arm64.whl  # [osx and arm64 and py==38]
  script: {{ PYTHON }} -m pip install -vv {{ name_ }}-{{ version }}-cp38-cp38-macosx_11_0_x86_64.whl  # [osx and x86 and py==38]
  number: 0
  skip: true  # [not osx]
  skip: true  # [py<38]

requirements:
  host:
    - python
    - pip
  run:
    - python
    - keras-preprocessing >=1.1.1
    - tensorboard <2.10,>=2.9
    - packaging
    - gast <=0.4.0,>=0.2.1
    - astunparse >=1.6.0
    - tensorflow-estimator <2.10.0,>=2.9.0rc0
    - numpy >=1.20
    - wrapt >=1.11.0
    - libclang >=13.0.0
    - protobuf <3.20,>=3.9.2
    - h5py >=2.9.0
    - setuptools
    - grpcio <2.0,>=1.24.3
    - termcolor >=1.1.0
    - absl-py >=1.0.0
    - flatbuffers <2,>=1.12
    - keras <2.10.0,>=2.9.0rc0
    - opt-einsum >=2.3.2
    - google-pasta >=0.1.1
    - six >=1.12.0
    - typing-extensions >=3.6.6
    - wheel <1.0,>=0.23.0
    - tensorboard-plugin-wit >=1.6.0 
    - werkzeug >=1.0.1
    - tensorboard-data-server <0.7.0,>=0.6.0
    - google-auth <3,>=1.6.3
    - requests <3,>=2.21.0
    - markdown >=2.6.8
    - google-auth-oauthlib <0.5,>=0.4.1
    - pyparsing !=3.0.5,>=2.0.2
    - cachetools <6.0,>=2.0.0
    - pyasn1-modules >=0.2.1
    - rsa <5,>=3.1.4
    - requests-oauthlib >=0.7.0
    - urllib3 <1.27,>=1.21.1
    - charset-normalizer ~=2.0.0
    - certifi >=2017.4.17
    - idna <4,>=2.5
    - pyasn1 <0.5.0,>=0.4.6
    - oauthlib >=3.0.0

test:
  requires:
    - pip
  commands:
    - pip check

about:
  home: https://pypi.org/project/tensorflow-metal/
  license: MIT
  license_file: LICENSE
  summary: TensorFlow acceleration for Mac GPUs.

extra:
  recipe-maintainers:
    - ngam
