{% set name = "biber" %}
{% set version = "2.18" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://sourceforge.net/projects/biblatex-biber/files/biblatex-biber/{{ version }}/binaries/Linux/biber-linux_x86_64.tar.gz  # [linux and x86_64]
  sha256: 2a6b4cd15a1139907799da0d23cd4ddcce8341af3960d2b3d1d3e4b4a9f1fb53  # [linux and x86_64]

  url: https://sourceforge.net/projects/biblatex-biber/files/biblatex-biber/{{ version }}/binaries/MacOS/biber-darwin_universal.tar.gz  # [osx]
  sha256: a0848ca266334284f1145470e53c3882b2d5e8ad82828700df1f6e347f7b675b  # [osx]

  url: https://sourceforge.net/projects/biblatex-biber/files/biblatex-biber/{{ version }}/binaries/Windows/biber-MSWIN64.zip  # [win64]
  sha256: 02ee3a8b6838b7ff1e9aea1a5342686981b9364067a7b8e7131c3b3201cf387c  # [win64]

  url: https://sourceforge.net/projects/biblatex-biber/files/biblatex-biber/{{ version }}/binaries/Windows/biber-MSWIN32.zip  # [win32]
  sha256: 7328c7e6346b6776fcc5e01162d90312817851fb44171d7145d179a143567fb8  # [win32]

build:
  number: 0
  script:
    - mkdir -pv $PREFIX/bin  # [not win]
    - cp biber $PREFIX/bin/biber  # [not win]
    - mkdir %PREFIX%\bin  # [win]
    - cp biber.exe %PREFIX%\bin\biber.exe  # [win]
  missing_dso_whitelist:
    - /lib64/libpthread.so.0
    - /lib64/libdl.so.2
    - /lib64/libm.so.6
    - /lib64/libc.so.6
    - /lib64/libutil.so.1

requirements:
  run:
    - libnsl

test:
  commands:
    - which biber  # [not win]
    - where biber  # [win]
    - biber --version

about:
  home: https://github.com/plk/biber/
  license: Artistic-2.0
  summary: Backend processor for BibLaTeX
  description: |
    Biber is a sophisticated bibliography processing backend for the LaTeX biblatex
    package. It supports an unsurpassed feature set for automated conformance to complex
    bibliography style requirements such as labelling, sorting and name handling. It has
    comprehensive Unicode support.
  doc_url: https://sourceforge.net/projects/biblatex-biber/files/biblatex-biber/{{ version }}/documentation/biber.pdf/download
  dev_url: https://github.com/plk/biber/

extra:
  recipe-maintainers:
    - anjos
