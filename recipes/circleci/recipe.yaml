context:
  version: 0.1.34038

package:
  name: circleci
  version: ${{ version }}

source:
  url: https://github.com/CircleCI-Public/circleci-cli/archive/refs/tags/v${{ version }}.tar.gz
  sha256: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

build:
  number: 0
  skip:
    - win
  script:
    - go-licenses save . --save_path ../library_licenses --override github.com/inconshreveable/go-update=Apache-2.0 --override github.com/mattn/go-localereader=MIT
    - go build -v -o $PREFIX/bin/circleci -ldflags="-s -w"

requirements:
  build:
    - ${{ compiler('go-nocgo') }}
    - go-licenses

tests:
  - script:
      - circleci version
      - circleci help

about:
  homepage: https://circleci-public.github.io/circleci-cli/
  summary: Use CircleCI from the command line.
  license: MIT
  license_file:
    - LICENSE
    - library_licenses/

extra:
  recipe-maintainers:
    - lucascolley
