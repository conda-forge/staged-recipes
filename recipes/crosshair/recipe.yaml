context:
  version: "0.0.101"

package:
  name: crosshair
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/c/crosshair_tool/crosshair_tool-${{ version }}.tar.gz
  sha256: c36eb18e211b344b47dc9aaf85d0b16ae4cb00719d20f131eb6ebf5e79767983

build:
  script: ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  python:
    entry_points:
      - crosshair=crosshair.main:main
      - mypycrosshair=crosshair.main:mypy_and_check
  number: 0

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib("c") }}
  host:
    - python
    - pip
    - setuptools
    - if: linux or osx
      then: libxcrypt
  run:
    - python
    - packaging
    - typing_inspect >=0.7.1
    - typing_extensions >=3.10.0
    - z3-solver >=4.13.0.0
    - importlib-metadata >=4.0.0
    - pygls >=1.0.0
    - typeshed-client >=2.0.5

tests:
  - python:
      imports:
        - crosshair
      pip_check: true
  - requirements:
      run:
        - python
    script:
      - crosshair --help
      - mypycrosshair --help

about:
  homepage: https://github.com/pschanely/CrossHair
  summary: Analyze Python code for correctness using symbolic execution.
  license: Apache-2.0
  license_file: LICENSE
  documentation: https://crosshair.readthedocs.io/en/latest/
  repository: https://github.com/pschanely/CrossHair

extra:
  recipe-maintainers:
    - kratsg
