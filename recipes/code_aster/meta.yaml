{% set name = "code_aster" %}
{% set source_name = "aster-full-src" %}
{% set version = "13.4.0" %}
{% set minor_version = "3" %}
{% set test_version = "13.4" %}
{% set md5 = "54054e08d418d7d2c9376ceeae18646f" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ source_name }}-{{ version }}.tar.gz
  url: https://www.code-aster.org/FICHIERS/{{ source_name }}-{{ version }}-{{ minor_version }}.noarch.tar.gz
  md5: {{ md5 }}
  patches:
    - compilers.patch

build:
  number: 0
  skip: true  # [py3k or win]
  script: ls -l $PREFIX/bin; ls -l $PREFIX/include; ls -l $PREFIX/lib; python setup.py install --prefix=$PREFIX --noprompt

requirements:
  build:
    - python
    - toolchain
    - gfortran_linux-64
    - cmake
    - tk
    - numpy
    - bison
    - flex
    - lapack
    - openblas
    - lapack
    - zlib
    
  run:
    - python

test:
  commands:
    - $PREFIX/aster/bin/as_run --vers={{ test_version }} --test forma01a

about:
  home: https://www.code-aster.org
  license: "GPL 2 and 3"
  # More info on licenses: https://www.code-aster.org/spip.php?article306
  license_family: GPL
  summary: 'Structure and thermomechanics analysis for studies and research'

  description: |
    Structure and thermomechanics analysis for studies and research.
  doc_url: https://www.code-aster.org/spip.php?rubrique19
  dev_url: https://www.code-aster.org/forum2/

extra:
  recipe-maintainers:
    - alen12345
