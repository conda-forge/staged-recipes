{% set name = "habitat-sim" %}
{% set version = "0.3.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/facebookresearch/habitat-sim/archive/v{{ version }}.tar.gz
    sha256: 4bfb649eb0ff473e3e32eedd4970f7d54d90b8884c74498d32c6169d8caaacc3
  - url: https://github.com/erikwijmans/recastnavigation/archive/8eef00be6003a6bf9c49cb4c126662e05e58d508.tar.gz
    sha256: b237275985282fe9d38a184de37e06da57da475601cf1e853da203570ef3ada7
    folder: src/deps/recastnavigation

build:
  number: 0
  skip: true  # [win]
  skip: true  # [osx]

requirements:
  build:
    - {{ cdt('libxxf86vm-devel') }}      # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - cmake
    - ninja
    - pkg-config  # [unix]
    - pybind11
    - cross-python_{{ target_platform }}  # [build_platform != target_platform]
    - numpy                               # [build_platform != target_platform]
    - python                              # [build_platform != target_platform]
    - setuptools
  host:
    - assimp
    - bullet-cpp
    - eigen
    - glfw
    - openexr
    - rapidjson
    - python
    - pip
    - attrs >=19.1.0
    - smmap <4.0,>=3.0.1
    - numba
    - numpy >=1.13
    - gitpython
    - quaternion
    - pillow
    - scipy >=1.3.0
    - tqdm
    - imageio
    - imageio-ffmpeg
    - matplotlib-base
    - magnum
    - magnum-integration
    - magnum-plugins
    - zstd
    - libglu                 # [linux]
    - libxcb                 # [linux]
    - xorg-libx11            # [linux]
    - xorg-libxau            # [linux]
    - xorg-libxext           # [linux]
    - xorg-libxfixes         # [linux]
    - xorg-libxi             # [linux]
    - xorg-libxrandr         # [linux]
    - xorg-libxinerama       # [linux]
    - xorg-libxcursor        # [linux]
    - pip
    - python
    - requests
    - setuptools
  run:
    - assimp
    - bullet-cpp
    - eigen
    - glfw
    - openexr
    - rapidjson
    - python
    - smmap <4.0,>=3.0.1
    - gitpython
    - attrs >=19.1.0
    - numba
    - numpy >=1.13
    - quaternion
    - pillow
    - scipy >=1.3.0
    - tqdm
    - imageio
    - imageio-ffmpeg
    - matplotlib-base
    - magnum
    - magnum-integration
    - magnum-plugins
    - zstd
    - libxcb                 # [linux]
    - xorg-libx11            # [linux]
    - xorg-libxau            # [linux]
    - xorg-libxext           # [linux]
    - xorg-libxfixes         # [linux]
    - xorg-libxi             # [linux]
    - xorg-libxrandr         # [linux]
    - xorg-libxcursor        # [linux]

test:
  imports:
    - habitat-sim

about:
  home: https://aihabitat.org
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: A flexible, high-performance 3D simulator for Embodied AI research.

extra:
  recipe-maintainers:
    - jeongseok-meta
