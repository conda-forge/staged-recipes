{% set name = "habitat-sim" %}
{% set version = "0.3.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/facebookresearch/habitat-sim/archive/v{{ version }}.tar.gz
    sha256: cf89f06e71d1f28b4ee90e4efb04fbcec28a7bb263c78cac3000df469147b4ad

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('habitat-sim', max_pin='x.x') }}
  skip: true  # [win]
  skip: true  # [osx]

requirements:
  build:
    - {{ cdt('libxxf86vm-devel') }}      # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
    - cmake
    - ninja
    - pkg-config  # [unix]

  host:
    - python
    - pip
    - setuptools
    - attrs>=19.1.0
    - smmap<4.0,>=3.0.1
    - numba
    - numpy>=1.13
    - gitpython
    - quaternion
    - pillow
    - scipy>=1.3.0
    - tqdm
    - imageio
    - imageio-ffmpeg
    - matplotlib
    - libglu                 # [linux]
    - libxcb                 # [linux]
    - xorg-libx11            # [linux]
    - xorg-libxau            # [linux]
    - xorg-libxext           # [linux]
    - xorg-libxfixes         # [linux]
    - xorg-libxi             # [linux]
    - xorg-libxrandr         # [linux]
    - xorg-libxinerama       # [linux]
    - xorg-libxcursor        # [linux]

  run:
    - python
    - smmap<4.0,>=3.0.1
    - gitpython
    - attrs>=19.1.0
    - numba
    - numpy>=1.13
    - quaternion
    - pillow
    - scipy>=1.3.0
    - tqdm
    - imageio
    - imageio-ffmpeg
    - matplotlib
    - libxcb                 # [linux]
    - xorg-libx11            # [linux]
    - xorg-libxau            # [linux]
    - xorg-libxext           # [linux]
    - xorg-libxfixes         # [linux]
    - xorg-libxi             # [linux]
    - xorg-libxrandr         # [linux]
    - xorg-libxcursor        # [linux]

test:
  imports:
    - habitat-sim

about:
  home: https://aihabitat.org
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: A flexible, high-performance 3D simulator for Embodied AI research.
