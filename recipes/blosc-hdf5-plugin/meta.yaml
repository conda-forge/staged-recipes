{% set name = "blosc-hdf5-plugin" %}
{% set version = "1.0" %}

package:
    name: {{ name }}
    version: {{ version }}

source:
  git_url: https://github.com/Blosc/hdf5-blosc 
  git_rev: efa7653f0735cd03e7e9efb94f3ebcbcbec42889
  patches:
    - cmakelists_use_cf_blosc.patch

build:
  number: 0
  skip: True  # [win]

 
requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}

  host:
    - hdf5
    - blosc
    - cmake
    - make
  run:
    - blosc
    - hdf5

test:
  files:
    - test_plugin.py
  requires:
    - h5py
    - python
  commands:
    - python test_plugin.py 

about:
    license: '3-Clause BSD'
    license_file: 'LICENSE'
    home: https://github.com/Blosc/hdf5-blosc
    summary: HDF5 plugin for BLOSC filter 
    description: |
        The plugin is being placed into HDF5 plugin directory, so it can be dynamically
        loaded. This enables the usage for other libraries like h5py. It originates from the
        cited github repository.

extra:
  recipe-maintainers:
    - marscher 
