schema_version: 1

package:
  name: phast
  version: "1.9.3"

source:
  url: https://github.com/CshlSiepelLab/phast/archive/refs/tags/v1.9.3.tar.gz
  sha256: 98e222d72fcbb0fe51e849eb5d761cb68dbf6d3395f4a0c00a730f670a9fc625

build:
  number: 0
  skip: true # [win]
  script:
    - >
      cmake -S . -B build
      -DCMAKE_BUILD_TYPE=Release
      -DCMAKE_INSTALL_PREFIX=$PREFIX
      -DCMAKE_INSTALL_LIBDIR=lib
      -DCMAKE_INSTALL_BINDIR=bin
      -DCMAKE_INSTALL_INCLUDEDIR=include
    - cmake --build build --parallel {{ nproc }}
    - cmake --install build

requirements:
  build:
    - "{{ compiler('c') }}"
    - "cmake"
    - "make"
  host:
    - "pcre"
    - "blas"
    - "lapack"
  run:
    - "pcre"
    - "blas"
    - "lapack"

tests:
  - script:
      - phastCons --help
      - phyloFit --help
      - test -x $PREFIX/bin/phastCons
      - test -x $PREFIX/bin/phyloFit
  - requires:
      - bash

about:
  homepage: https://github.com/CshlSiepelLab/phast
  repository: https://github.com/CshlSiepelLab/phast
  summary: "PHAST: Phylogenetic Analysis with Space/Time models"
  description: |
    PHAST is a C-based toolkit for phylogenetic analysis, comparative
    genomics, and evolutionary modeling.
  license: BSD-3-Clause
  license_file: LICENSE

extra:
  recipe-maintainers:
    - asiepel
