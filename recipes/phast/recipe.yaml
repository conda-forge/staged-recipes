schema_version: 1

package:
  name: phast
  version: "1.9.2"

source:
  url: https://github.com/CshlSiepelLab/phast/archive/refs/tags/v1.9.2.tar.gz
  sha256: 2df9527c44eb9d7c6c90a9011570bbc03056f7e76806dac8766d3458fb87238f

build:
  number: 0
  skip: true # [win]
  script:
    - >
      cmake -S . -B build
      -DCMAKE_BUILD_TYPE=Release
      -DCMAKE_INSTALL_PREFIX=$PREFIX
      -DCMAKE_INSTALL_LIBDIR=lib
      -DCMAKE_INSTALL_BINDIR=bin
      -DCMAKE_INSTALL_INCLUDEDIR=include
    - cmake --build build --parallel {{ nproc }}
    - cmake --install build

requirements:
  build:
    - {{ compiler('c') }}
    - cmake
    - make         # or ninja (see questions)
  host:
    - pcre
    - blas
    - lapack
  run:
    - pcre
    - blas
    - lapack

tests:
  - script:
      - phastCons --help
      - phyloFit --help
      - test -x $PREFIX/bin/phastCons
      - test -x $PREFIX/bin/phyloFit
  - requires:
      - bash

about:
  homepage: https://github.com/CshlSiepelLab/phast
  repository: https://github.com/CshlSiepelLab/phast
  summary: "PHAST: Phylogenetic Analysis with Space/Time models"
  description: |
    PHAST is a C-based toolkit for phylogenetic analysis, comparative
    genomics, and evolutionary modeling.
  license: BSD-3-Clause
  license_file: LICENSE.txt

extra:
  recipe-maintainers:
    - asiepel
