{% set name = "TPOT" %}
{% set version = "0.9.1" %}
{% set sha256 = "293ee765a1258822c835b50e8eae5cf72462549c771c5e421a9883c571a09a13" %}
{% set committish = "5516d7ef501c39efb59c2dd1ec7ba100cbe540c4" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  script:
    - python setup.py build_ext --inplace
    - python setup.py install --single-version-externally-managed --record record.txt

requirements:
  build:
    - python
    - setuptools
    - cython
    - toolchain

  run:
    - deap >=1.0
    - numpy >=1.12.1
    - pandas >=0.20.2
    - python
    - scikit-learn >=0.18.1
    - scipy >=0.19.0
    - stopit >=1.1.1
    - tqdm >=4.11.2
    - update_checker >=0.16

test:
  requires:
    - git
    - nose
    - py-xgboost >=0.6a2
    - python
    - scikit-mdr >=0.4.4
    - skrebate >=0.3.4
  imports:
    - tpot
  commands:
    - git clone https://github.com/rhiever/tpot.git
    - cd tpot
    - git checkout {{ committish }}
    - rm -rf tpot
    - nosetests

about:
  home: http://rhiever.github.io/tpot
  license: LGPL-3.0
  license_family: LGPL
  license_file: LICENSE
  summary: |
    A Python Automated Machine Learning tool that optimizes machine learning
    pipelines using genetic programming.
  description: |
    Consider TPOT your Data Science Assistant. TPOT is a Python Automated
    Machine Learning tool that optimizes machine learning pipelines using
    genetic programming.

    TPOT will automate the most tedious part of machine learning by
    intelligently exploring thousands of possible pipelines to find the best
    one for your data.
  doc_url: http://rhiever.github.io/tpot
  dev_url: https://github.com/rhiever/tpot

extra:
  recipe-maintainers:
    - bollwyvl
