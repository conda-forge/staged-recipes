schema_version: 1

package:
  name: vine
  version: "0.2.1"

source:
  url: https://github.com/CshlSiepelLab/vine/archive/refs/tags/v0.2.1.tar.gz
  sha256: aa7de61a71c0c785d7f0e0b16657fe89463d7ff1a7d5cdbaf6eb4b4005189dc7

build:
  number: 0
  skip:
    - win
  script:
    - >
      cmake -S . -B build
      -DCMAKE_BUILD_TYPE=Release
      -DCMAKE_INSTALL_PREFIX=$PREFIX
      -DPHAST_ROOT=$PREFIX
    - "cmake --build build --parallel ${{ nproc }}"
    - "cmake --install build"

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ stdlib('c') }}
    - "cmake"
    - "make"
  host:
    - "phast"
  run:
    - "phast"

tests:
  - script:
      - "vine --help"
      - "test -x $PREFIX/bin/vine"
    requirements:
      run:
        - "bash"

about:
  homepage: https://github.com/CshlSiepelLab/vine
  repository: https://github.com/CshlSiepelLab/vine
  summary: "VINE: Variational Inference with Node Embeddings"
  description: |
    VINE is a C-based variational inference framework for phylogenetic
    reconstruction using node embeddings and efficient optimization.
  license: BSD-3-Clause
  license_file: LICENSE

extra:
  recipe-maintainers:
    - asiepel
