{% set name = "CutLang" %}
{% set version = "2.9.9" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://github.com/unelg/CutLang/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 1ac4befecffc131cce5e5fc5c2551c602b6843c7585e53752923a1414551587d

build:
  number: 0
  skip: True  # [win]

requirements:
  host:
    - root =6.24.2
    - jupyterlab =3.0.16
    - metakernel =0.27.5
    - flex =2.6.4
    - bison =3.4
    - make =4.2.1
    - wget =1.20.1
  run:
    - root =6.24.2
    - jupyterlab =3.0.16
    - metakernel =0.27.5
    - wget =1.20.1

test:
  commands:
    - test -r libdbx_muon_h.so       || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_muon_h.so      libdbx_muon_h.so     ; ln -s libdbx_muon_h.so dbx_muon_h.so )
    - test -r libdbx_tau_h.so        || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_tau_h.so       libdbx_tau_h.so      ; ln -s libdbx_tau_h.so dbx_tau_h.so )
    - test -r libdbx_electron_h.so   || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_electron_h.so  libdbx_electron_h.so ; ln -s libdbx_electron_h.so dbx_electron_h.so )
    - test -r libdbx_photon_h.so     || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_photon_h.so    libdbx_photon_h.so   ; ln -s libdbx_photon_h.so dbx_photon_h.so )
    - test -r libdbx_jet_h.so        || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_jet_h.so       libdbx_jet_h.so      ; ln -s libdbx_jet_h.so dbx_jet_h.so )
    - test -r libdbx_truth_h.so      || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbx_truth_h.so     libdbx_truth_h.so    ; ln -s libdbx_truth_h.so dbx_truth_h.so )
    - test -r libdbxParticle_cpp.so  || ( ln -s $PREFIX/bin/cutlang/analysis_core/dbxParticle_cpp.so libdbxParticle_cpp.so; ln -s libdbxParticle_cpp.so dbxParticle_cpp.so )
    - test -r libDBXNtuple_cpp.so    || ( ln -s $PREFIX/bin/cutlang/analysis_core/DBXNtuple_cpp.so   libDBXNtuple_cpp.so  ; ln -s libDBXNtuple_cpp.so DBXNtuple_cpp.so )
    - test -r libdelphesParticles_h.so  || ( ln -s $PREFIX/bin/cutlang/analysis_core/delphesParticles_h.so   libdelphesParticles_h.so  ; ln -s libdelphesParticles_h.so delphesParticles.so )

about:
  home: 'https://github.com/unelg/CutLang'
  license: LGPL-2.1-only
  license_file: LICENSE
  summary: |
    A Particle Physics Analysis Description Language and Runtime Interpreter
  description: |
    A Particle Physics Analysis Description Language and Runtime Interpreter

extra:
  recipe-maintainers:
    - unelg
    - shenburak
