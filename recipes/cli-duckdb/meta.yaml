{% set name = "cli-duckdb" %}
{% set version = "0.9.1" %}
{% set extensions = "arrow;aws;httpfs;icu;json;parquet;postgres;spatial" %}

package:
  name: {{ name | lower }}
  version: {{ version }}

source: 
  url: https://github.com/duckdb/duckdb/archive/v{{ version }}.tar.gz
  sha256: 37a43188d9354ce3ca101b2b118d867f5f76d04c3b83c09d86fd7508351a631b

build:
  number: 0
  skip: true  # [win]
  script:
    - DUCKDB_EXTENSIONS='{{ extensions }}' make

test:
  commands:
    - $PREFIX/build/release/duckdb --version

outputs:
  - name: {{ name | lower }}
    version: {{ version }}
    files:
      - build/release/*
{% for extension in extensions.split(';') %}
  - name: {{ extension }}-duckdb
    version: {{ version }}
    files:
      build/release/extension/{{ extension }}/*
{% endfor %}

about:
  home: https://github.com/duckdb/duckdb/
  summary: |
    DuckDB is a high-performance analytical database system. It is designed to be fast, reliable, portable, and easy to use. DuckDB provides a rich SQL dialect, with support far beyond basic SQL. DuckDB supports arbitrary and nested correlated subqueries, window functions, collations, complex types (arrays, structs), and more. For more information on using DuckDB, please refer to the DuckDB documentation.
  doc_url: https://duckdb.org/
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - mediocretech
    