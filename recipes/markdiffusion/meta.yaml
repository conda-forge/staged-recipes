{% set name = "markdiffusion" %}
{% set version = "0.1.6" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/m/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: bf9c26c7a5ba9dedbde2e0121d76478e18d21e77b9c222f2e502976f79e36357

build:
  number: 0
  noarch: python
  script: "{{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation"

requirements:
  host:
    - python {{ python_min }}
    - pip
    - setuptools >=68
    - wheel
  run:
    - python >={{ python_min }}
    - pytorch >=2.0
    - torchvision
    - numpy >=1.20
    - pillow >=8.0
    - py-opencv >=4.12
    - requests >=2.26
    - tqdm >=4.60
    - scipy >=1.7
    - matplotlib-base >=3.4
    - diffusers >=0.25
    - transformers >=4.30
    - accelerate >=0.20
    - huggingface_hub >=0.16
    - ujson >=5.10
    - datasets >=2.0
    - sentence-transformers >=5.0
    - joblib >=1.5
    - pandas >=1.4
    - pycryptodome >=3.21

test:
  imports:
    - markdiffusion
  commands:
    - pip check
  requires:
    - python {{ python_min }}
    - pip

about:
  home: https://github.com/THU-BPM/markdiffusion
  summary: "An Open-Source Toolkit for Generative Watermarking of Latent Diffusion Models"
  license: Apache-2.0
  license_file: LICENSE

extra:
  recipe-maintainers:
    - codelformat
    - panly2003
