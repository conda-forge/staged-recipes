{% set name = "abinit" %}
{% set version = "8.10.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/abinit/abinit/archive/{{ version }}.tar.gz
  sha256: b5ec4340807c899671aa574262fbd277c47a043d40a9e30723294a65eebb2815

build:
  number: 0
  skip: True  # [not linux]

requirements:
  build:
    - {{ compiler('fortran') }}
    - make
    - libnetcdf
    - libxc
  host:
    - python
    - libblas
    - libcblas
    - libgomp
    - liblapack
    - liblapacke
  run:
    - python

test:
  commands:
    - test -x ${PREFIX}/bin/abinit
    - test -x ${PREFIX}/bin/anaddb
    - test -x ${PREFIX}/bin/mrgddb
    - test -x ${PREFIX}/bin/mrgdv
    - test -x ${PREFIX}/bin/cut3d

about:
  home: https://www.abinit.org
  license: GPL-3.0-only
  license_family: GPL
  license_file: COPYING
  summary: 'ABINIT is an atomic-scale simulation software suite.'

  description: |
    ABINIT is a software suite to calculate the optical, mechanical, 
    vibrational, and other observable properties of materials. Starting 
    from the quantum equations of density functional theory, you can 
    build up to advanced applications with perturbation theories based on 
    DFT, and many-body Green's functions (GW and DMFT) ...
  doc_url: https://wiki.abinit.org/doku.php
  dev_url: https://github.com/abinit/abinit/

extra:
  recipe-maintainers:
    - jan-janssen
