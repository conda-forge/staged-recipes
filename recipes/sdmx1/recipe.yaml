context:
  name: sdmx1
  version: 2.23.1
  python_min: 3.9

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  - url: https://pypi.org/packages/source/s/${{ name|lower }}/${{ name|lower }}-${{ version }}.tar.gz
    sha256: 30148b78b8e64a6740554aa105ca150bad563a546aa8a859f97e9f578301082c

build:
  script: ${{ PYTHON }} -m pip install .
  noarch: python
  number: 0

requirements:
  host:
    - python ${{ python_min }}.*
    - hatchling
    - versioningit
    - pip
  run:
    - python >=${{ python_min }}
    - lxml >=3.6
    - pandas >=1.0
    - platformdirs >=4.1
    - python-dateutil
    - requests >=2.7
    - requests-cache

tests:
  - python:
      imports:
        - sdmx1
      pip_check: true
  - script:
      - pytest \
        --color=yes --durations=20 -ra --verbose \
        --sdmx-fetch-data \
        --cov-report=xml \
        --numprocesses=auto
    requirements:
      run:
        - python ${{ python_min }}.*
        - pytest
        - filelock
        - gitpython
        - jinja2
        - pytest-cov
        - pytest-rerunfailures
        - pytest-xdist
        - pytest >=5
        - requests-cache
        - responses
    files:
      source:
        - tests/

about:
  summary: Statistical Data and Metadata eXchange (SDMX)
  description: |
    sdmx: Statistical data and metadata exchange
  documentation: https://sdmx1.readthedocs.io/en/latest
  homepage: https://github.com/khaeru/sdmx
  license: MIT
  license_file: LICENSE.txt

extra:
  recipe-maintainers:
    - julian-belina
