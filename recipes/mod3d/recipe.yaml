# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json

context:
  name: mod3d
  version: "0.1.0"

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/ssg-aero/Mod3D/archive/refs/tags/v${{ version }}.tar.gz
  sha256: f473e284b8f8f6b1dc99aebb00a69af7e3de9060a1e514bc8d60ec32b870eebf

build:
  number: 0
  files:
    exclude:
      - "**/__pycache__/**"
      - "**/*.pyc"
      - "**/*.pyo"
  script:
    - if: unix
      then:
        - cmake ${CMAKE_ARGS} -GNinja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$PREFIX -S . -B build
        - cmake --build build --parallel ${CPU_COUNT}
        - cmake --install build
    - if: win
      then:
        - cmake %CMAKE_ARGS% -GNinja -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=%LIBRARY_PREFIX% -S . -B build
        - cmake --build build --parallel %CPU_COUNT%
        - cmake --install build

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{"vs2022_win-64" if win}}
    - ${{ stdlib("c") }}
    - cmake >=3.30
    - ninja
  host:
    - python
    - pybind11
    - occt
    - eigen
    - gbs
  run:
    - python
    - occt
    - numpy
    - pythreejs

tests:
  - python:
      imports:
        - mod3d

about:
  homepage: https://github.com/ssg-aero/Mod3D
  license: MIT
  license_file: LICENSE
  summary: Python bindings for OpenCASCADE geometry and topology via pybind11
  description: |
    Mod3D provides lightweight Python bindings for Open Cascade Technology (OCCT)
    using pybind11. It exposes geometry primitives (gp), curves, surfaces, topology
    (TopoDS), and various modeling algorithms for CAD/CAM workflows.
  documentation: https://github.com/ssg-aero/Mod3D#readme

extra:
  recipe-maintainers:
    - szebos
    - ssg-aero
