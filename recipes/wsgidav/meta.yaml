{% set name = "WsgiDAV" %}
{% set version = "3.0.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  patches:
  - patches/0001-remove-setup_requires.patch
  - patches/0002-use-cx_freeze-on-windows.patch  # [win]

build:
  # noarch: python
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('c') }}
  host:
    - python
    - pip
    - setuptools
    - cx_freeze   # [win]
  run:
    - cheroot     # [win]
    - cherrypy    # [win]
    - defusedxml
    - jinja2
    - jsmin
    - lxml        # [win]
    - markupsafe  # [win]
    - pyyaml
    - six

test:
  imports:
    - wsgidav

  commands:
    - wsgidav -h


about:
  home: http://github.com/mar10/wsgidav
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: 'Generic and extendable WebDAV server based on WSGI'
  doc_url: https://wsgidav.readthedocs.io
  dev_url: http://github.com/mar10/wsgidav

extra:
  recipe-maintainers:
    - h-vetinari
