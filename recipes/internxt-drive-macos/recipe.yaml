# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
# Native Swift macOS app. Separate from the Electron-based internxt-drive
# recipe which covers Windows (Cloud Files API) and Linux (FUSE).

context:
  version: "2.6.3.82"

package:
  name: internxt-drive-macos
  version: ${{ version }}

source:
  url: https://github.com/internxt/drive-desktop-macos/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 5a0bebc772404c2b3b3132d213a80eff9a9e656c0a77cf02d59ca2b90422e701

build:
  number: 0
  skip:
    - not osx
  script: build.sh

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
  host: []
  run: []

tests:
  - package_contents:
      files:
        - Applications/InternxtDesktop.app/Contents/MacOS/InternxtDesktop
        - Applications/InternxtDesktop.app/Contents/Info.plist
  - script:
      - test -d ${PREFIX}/Applications/InternxtDesktop.app

about:
  homepage: https://internxt.com
  summary: Internxt Drive Desktop for macOS - native encrypted cloud storage client
  description: |
    Internxt Drive for macOS is a native Swift application providing
    privacy-focused encrypted cloud storage. It integrates with the macOS
    FileProvider framework for virtual drive support, includes an XPC
    backup service, and uses Sparkle for automatic updates.
    Built with SwiftUI, it leverages native Apple APIs for deep system
    integration including file synchronization and background operations.
  license: LicenseRef-Proprietary
  license_file: LICENSE
  repository: https://github.com/internxt/drive-desktop-macos

extra:
  recipe-maintainers:
    - phreed
