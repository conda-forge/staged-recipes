{% set name = "ampgen" %}
{% set version = "2.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/GooFit/AmpGen/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 8cb102972ddf1059a21f9297b9d128449bf46ebc99c70923ab9615dfa9dc55ca

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make
  host:
    - root_base
    - root-binaries
    - root-dependencies
    - gsl
    - openmp
    - _openmp_mutex  # [linux]

test:
  source_files:
    - options/*.opt
  commands:
    - pwd
    - echo ${PREFIX}
    - echo ${CONDA_PREFIX}
    - echo ${SRC_DIR}
    - ls -lha
    - ls -lha options/
    - ls -lha ${SRC_DIR}/../work/
    - AmpGen.exe options/D02Kpipipi.opt --EventType "D0 K- pi+ pi+ pi-" --nEvents 10000

about:
  home: https://github.com/GooFit/AmpGen
  license: GPL-2.0-only
  license_family: GPL
  license_file: LICENSE
  summary: 'A library and set of applications for fitting and generating multi-body particle decays.'
  description: |
    AmpGen is a library and set of applications for fitting and generating
    multi-body particle decays using the isobar model. It developed out of
    the MINT project used in the fitting of three and four-body pseudoscalar
    decays by the CLEO-c and LHCb colloborations. The library can handle the
    fitting and generation of a wide variety of final states, including those
    involving fermions and photons, as well as polarised initial states.
    
    Source code for the evaluation of amplitudes is dynamically generated by
    a custom engine, JIT compiled and dynamically linked to the user
    programme at runtime, which results in high flexibility and performance.
  doc_url: https://github.com/GooFit/AmpGen
  dev_url: https://github.com/GooFit/AmpGen

extra:
  recipe-maintainers:
    - dylanjaide
