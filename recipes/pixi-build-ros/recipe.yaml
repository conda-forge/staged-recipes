# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
schema_version: 1

context:
  name: pixi-build-ros
  version: "0.3.2"
  python_min: "3.10"

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://github.com/prefix-dev/pixi-build-backends/archive/refs/tags/${{ name }}-v${{ version }}.tar.gz
  sha256: 64666c1e122b53397605a652a1b50467d2f35f66b01a41584e50a126ab1fef86

build:
  number: 0
  script:
    - cd backends/pixi-build-ros
    - ${{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  noarch: python
  python:
    entry_points:
      - pixi-build-ros = pixi_build_ros.main:main

requirements:
  host:
    - python ${{ python_min }}.*
    - hatchling
    - pip
  run:
    - python >=${{ python_min }}
    - rosdistro >=1.0.1, <2
    - catkin_pkg >=1.1.0, <2
    - pydantic
    - pyyaml
    - py-rattler >=0.15.0, <0.16
    - typing-extensions
    - py-pixi-build-backend >=0.3.1, <0.4

tests:
  - script: ${{ name }} --help
    requirements:
      run:
        - python ${{ python_min }}.*

about:
  homepage: https://github.com/prefix-dev/pixi-build-backends
  summary: ROS build backend for Pixi
  description: |
    This package provides a ROS build backend for Pixi, allowing the integration of ROS packages into the Pixi build system.
  license: BSD-3-Clause
  license_file: LICENSE
  documentation: https://prefix-dev.github.io/pixi-build-backends
  repository: https://github.com/prefix-dev/pixi-build-backends

extra:
  recipe-maintainers:
    - baszalmstra
    - ruben-arts
