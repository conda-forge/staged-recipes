{% set name = "julia-compat" %}
{% set version = "3.46.0" %}
{% set sha256 = "0f68757f4b5c943abbbbb7584ec27d4019499b417639d75a75c2224bc4cc76f7" %}
{% set julia_pkg_name = "Compat" %}
{% set julia_pkg_uuid = "34da2185-b29b-5c13-b0c7-acf172513d20" %}
{% set julia_pkg_git = "https://github.com/JuliaLang/Compat.jl.git" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/JuliaLang/Compat.jl/archive/refs/tags/v{{ version }}.tar.gz 
  sha256: {{ sha256 }}
  # Clone the git repository rather than the tarball so Julia can use the git information
  #git_url: {{ git_url }}
  #git_rev: v{{ version }}
  #git_depth: 1
  folder: Compat.jl

build:
  skip: true  # [win]
  number: 0
  script_env:
    - JULIA_PKG_NAME={{ julia_pkg_name }}
    - JULIA_PKG_UUID={{ julia_pkg_uuid }}
    - JULIA_PKG_GIT={{ julia_pkg_git }}

test:
  requires:
    - julia
  commands:
    - julia -e 'using Compat, Pkg; Pkg.test("Compat")'

outputs:
  - name: julia-compat
    script: build_base.sh
    build:
      noarch: generic
    requirements:
      build:
        - julia
        - sed
      host:
        - julia
      run:
        - julia
    test:
      commands:
        - julia -e 'using Compat, Pkg; Pkg.test("Compat")'
  - name: compat.jl
    build:
      noarch: generic
    requirements:
      run:
        - {{ pin_subpackage('julia-compat', max_pin="x.x.x") }}
    test:
      commands:
        - julia -e 'using Compat, Pkg; Pkg.test("Compat")'

about:
  home: https://github.com/JuliaLang/Compat.jl
  summary: Compatibility across Julia versions
  description: |
    The Compat package is designed to ease interoperability between older and
    newer versions of the Julia language. In particular, in cases where it is
    impossible to write code that works with both the latest Julia master branch
    and older Julia versions, or impossible to write code that doesn't generate
    a deprecation warning in some Julia version, the Compat package provides
    a macro that lets you use the latest syntax in a backwards-compatible way.
  license: MIT
  license_family: MIT
  license_file: Compat.jl/LICENSE.md
  doc_url: https://github.com/JuliaLang/Compat.jl/blob/master/README.md
  dev_url: https://github.com/JuliaLang/Compat.jl

extra:
  recipe-maintainers:
    - mkitti
    - ngam
