{% set version = "2.0.0rc2" %}
{% set pname = "vecgeom4prompt" %}

package:
  name: {{ pname }}
  version: {{ version }}

source:
  url: https://gitlab.com/cinema-developers/VecGeom/-/archive/v2.0.0rc2_prompt/VecGeom-v2.0.0rc2_prompt.tar.bz2
  sha256: 5e94bca16e076441af4d3d34b51a9965d651711153ee696942043019d6846da6

build:
  number: 0
  skip: True  # [win]
  skip: True  # [osx]
  skip: True  # [py<=37]
  run_exports:
    - {{ pin_subpackage('vecgeom4prompt', max_pin='x.x') }}

  requirements:
    build:
      - make
      - cmake

outputs:
  - name: vecgeom4prompt
    test:
      commands:
        - conda inspect linkages -p $PREFIX vecgeom4prompt  # [not win]
    
  - name: vecgeom4prompt-static
    build:
      number: 0

    requirements:
      build:
        - {{ compiler('c') }}
        - {{ compiler('cxx') }}
        - {{ stdlib("c") }}
      host:
        - python
        - xerces-c
        - {{ pin_subpackage('vecgeom4prompt', exact=True) }}
      run:
        - {{ pin_subpackage("vecgeom4prompt", exact=True) }}
    test:
      commands:
        - test -f ${CONDA_PREFIX}/lib/libvecgeom.a

about:
  home: https://gitlab.com/cinema-developers/VecGeom/-/tree/cinema?ref_type=heads
  license: Apache-2.0
  license_file: 
    - APACHE-LICENSE-2.0.txt
    - LICENSE.txt
  summary: A modified Vecgeom library based on version 2.0.0rc2, used for cinema-prompt.
  description: |
    This pakcage is a modified version of Vecgeom 2.0.0rc2(https://gitlab.cern.ch/VecGeom/VecGeom). \
    Specifically and should only used in cinema-prompt(https://gitlab.com/cinema-developers/prompt).

extra:
  recipe-maintainers:
   - panziyi1
