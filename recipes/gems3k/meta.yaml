{% set version = "4.3.1" %}

package:
  name: gems3k
  version: {{ version }}

source:
  # url: https://github.com/gemshub/gems3k/archive/v{{ version }}.tar.gz
  # sha256: dc2fd093e52ed0dc1976bcd26cd1f85cacf3e1c96efa00ab89bc07cc6718060e
  git_url: https://github.com/allanleal/GEMS3K.git
  git_rev: some-improvements

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - catch2 =2
    - cmake
    - ninja

  host:
    - nlohmann_json
    - thermofun

  run:
    - nlohmann_json
    - thermofun

test:
  requires:
    - {{ compiler('cxx') }}

  commands:
    - test -d ${PREFIX}/include/GEMS3K  # [unix]
    - if not exist %PREFIX%\\Library\\include\\GEMS3K exit 1  # [win]

about:
  home: https://github.com/gemshub/gems3k
  summary: Numerical kernel solver of the GEM-Selektor v.3 package for geochemical modelling.
  description: |
    Numerical kernel solver of the GEM-Selektor v.3 package for geochemical modelling.
  license: LGPL-3.0-only
  license_family: LGPL
  license_file: COPYING
  doc_url: https://github.com/gemshub/gems3k
  dev_url: https://github.com/gemshub/gems3k

extra:
  recipe-maintainers:
    - dimitrikulik
    - gdmiron
    - sdmytrievs
    - allanleal
