{% set name = "rocsparse" %}
{% set version = "7.0.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ROCm/rocSPARSE/archive/refs/tags/rocm-{{ version }}.tar.gz
  sha256: 26dd7df3c470f877d0f9ab15dccdac1915a3939e2ab9e00a83342c6edf289c8a

build:
  number: 0
  skip: true  # [not linux]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - cmake
    - make
    - pkg-config
    # HIP compiler and dependencies (see https://github.com/conda-forge/hip-feedstock/issues/21)
    - hipcc
    - lld
    - clang-tools
    - compiler-rt
    - rocm-device-libs
    # Other ROCm dependencies
    - rocm-cmake
    - rocprim
  host:
    # - rocm-core {{ version }}
  run:

test:
  commands:
    - test -f $PREFIX/include/rocsparse/rocsparse.h
    - test -f $PREFIX/lib/libsparse.so

about:
  home: https://github.com/ROCm/rocSPARSE
  summary: 'rocSPARSE: AMD ROCm Sparse Linear Algebra Library'
  description: |
    rocSPARSE exposes a common interface that provides Basic Linear Algebra
    Subroutines (BLAS) for sparse computation. It's implemented on top of AMD
    ROCm runtime and toolchains. rocSPARSE is created using the HIP
    programming language and optimized for AMD's latest discrete GPUs.
  license: MIT
  license_family: MIT
  license_file: LICENSE.md

extra:
  recipe-maintainers:
    - flferretti
