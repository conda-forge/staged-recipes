{% set name = "polymake" %}
{% set version = "3.2r2" %}
{% set sha256 = "415e101482d92dd73cdae0af8b43907e4195d3052491aea49e0563a04f015a6b" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}-minimal.tar.bz2
  url: https://polymake.org/lib/exe/fetch.php/download/{{ name }}-{{ version }}-minimal.tar.bz2
  sha256: {{ sha256 }}

build:
  number: 0
  skip: true  # [win]
  # We skip osx temporarily until we can select a new compiler in the
  # feedstock as in
  # https://github.com/conda-forge/root-feedstock/blob/master/recipe/conda_build_config.yaml
  skip: true  # [osx]

requirements:
  build:
    - {{ compiler('cxx') }} 
  host:
    - libxml2 2.*
    - libxslt 1.*
    - readline 7.*
    - perl >=5.16.*
    - gmp 6.*
    - mpfr 4.*
    - boost-cpp 1.66.*
    - cddlib
    - ppl 1.2.*
    # TODO: lrslib does not seem to be packaged
    # TODO: permlib does not seem to be packaged (polymake = upstream)
    # TODO: sympol does not seem to be packaged (polymake = upstream)
  run:
    # We need the build compiler at runtime
    - {{ compiler('cxx') }} 
    - ninja
    - libxml2 2.*
    - libxslt 1.*
    - readline 7.*
    - perl >=5.16.*
    - gmp 6.*
    - mpfr 4.*
    - boost-cpp 1.66.*
    - cddlib
    - ppl 1.2.*

test:
  commands:
    - polymake --version
    - polymake -e 'print 1+1;'

about:
  home: https://polymake.org/
  license: GPL-2.0
  license_family: GPL
  license_file: COPYING
  summary: 'Open source software for research in polyhedral geometry'

  description: |
    polymake is open source software for research in polyhedral geometry. It
    deals with polytopes, polyhedra and fans as well as simplicial complexes,
    matroids, graphs, tropical hypersurfaces, and other objects. Supported
    platforms include various flavors of Linux, FreeBSD and Mac OS.
  doc_url: https://polymake.org/doku.php/documentation
  dev_url: https://github.com/polymake/polymake

extra:
  recipe-maintainers:
    - saraedum
    - apaffenholz
