context:
  version: "0.5.6"

package:
  name: go-grip
  version: ${{ version }}

source:
  url: https://github.com/chrishrb/go-grip/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 217e1a86842d64dc70bcb89e341954f338b270d05fe240b02830ae50968d168f

build:
  number: 0
  script:
    - go-licenses save . --save_path ../library_licenses
    - if: unix
      then: go build -v -o $PREFIX/bin/go-grip -ldflags="-s -w"
      else: go build -v -o %LIBRARY_BIN%\go-grip.exe -ldflags="-s"

requirements:
  build:
    - ${{ compiler("go-nocgo") }}
    - go-licenses

tests:
  - script: go-grip -help
  - package_contents:
      bin:
        - go-grip
      strict: true

about:
  homepage: https://github.com/chrishrb/go-grip
  summary: Preview Markdown files locally before committing them.
  description: |
    go-grip is a lightweight, Go-based tool designed to render Markdown files locally, replicating GitHub's style.
  license: MIT
  license_file:
    - LICENSE
    - library_licenses/
  documentation: https://pkg.go.dev/github.com/chrishrb/go-grip
  repository: https://github.com/chrishrb/go-grip

extra:
  recipe-maintainers:
    - imagejan
