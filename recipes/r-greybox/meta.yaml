{% set version = "2.0.7" %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-greybox
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/greybox_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/greybox/greybox_{{ version }}.tar.gz
  sha256: 690a01d1b6fd390751cae7161d13d5c60726b04cf0302cb4c62e4e407c116bef

build:
  number: 0
  missing_dso_whitelist:
    - $RPATH/R.dll                       # [win]
    - Library/bin/libgcc_s_seh-1.dll     # [win]
    - Library/bin/libstdc++-6.dll        # [win]
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ stdlib('c') }}
    - {{ posix }}make
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]
  host:
    - r-base
    - r-rcpp
    - r-generics >=0.1.2
    - r-pracma
    - r-nloptr
    - r-statmod
    - r-zoo
    - r-texreg
    - r-xtable
  run:
    - r-base
    - r-rcpp
    - r-generics >=0.1.2
    - r-pracma
    - r-nloptr
    - r-statmod
    - r-zoo
    - r-texreg
    - r-xtable

test:
  commands:
    - $R -e "library('greybox')"           # [not win]
    - "\"%R%\" -e \"library('greybox')\""   # [win]

about:
  home: https://github.com/config-i1/greybox
  license: LGPL-2.1-only
  license_family: LGPL
  license_file:
    - {{ environ["PREFIX"] }}/lib/R/share/licenses/LGPL-2.1
  summary: Toolbox for Model Building and Forecasting
  description: |
    Implements functions and instruments for regression model building and its
    application to forecasting. The main scope of the package is in variables
    selection and models specification for cases of time series data.
  dev_url: https://github.com/config-i1/greybox

extra:
  recipe-maintainers:
    - config-i1
