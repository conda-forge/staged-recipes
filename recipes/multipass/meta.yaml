{% set name = "multipass" %}
{% set version = "1.8.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/canonical/multipass/archive/refs/tags/v{{ version }}.tar.gz  
    sha256: 63eb5b4baac4b3d93413175ca7c9ca62d190cb5f46c7b50743cccc915fd29598
  - url: https://github.com/fmtlib/fmt/archive/b9d7490.tar.gz
    sha256: dfbb7a0ced4d8fb3b7cf77c8c311a6aafa5ea6f3c4e838e693af8f24ac33af38
    folder: 3rd-party/fmt
  - url: https://github.com/CanonicalLtd/grpc/archive/cb8af40.tar.gz
    sha256: a678bce07fffa098e04a482c5dbe360a10c8a1cbe32030041f057b631ca8edeb
    folder: 3rd-party/grpc
  - url: https://github.com/CanonicalLtd/libssh/archive/6f4ec9b.tar.gz
    sha256: 33cae02ce91adb261dfd42e23dbd728c3073ecccbd7d3402c25cd15f0fed4e5b
    folder: 3rd-party/libssh/libssh
  - url: https://github.com/Skycoder42/QHotkey/archive/eb7ddab.tar.gz
    sha256: 2dc72c4c7c23ae2e721fdde7605829f7735e004ac235632855101216cc94d926
    folder: 3rd-party/qhotkey/QHotkey
  - url: https://github.com/pocoproject/poco/archive/3fc3e5f.tar.gz
    sha256: 7e757897da5220c5c85e72689746533f969bbd976a42f0959ce7eeae692801e8
    folder: 3rd-party/poco
  - url: https://github.com/ricab/scope_guard/archive/07f62f2.tar.gz
    sha256: 2bc2346a3709b34d5860d08b4163c5e035e70243cf94a121a16ea7157d11a7e2
    folder: 3rd-party/scope_guard
  - url: https://github.com/CanonicalLtd/semver/archive/69e1b1e.tar.gz
    sha256: bc62a3c0edebccc64f0b3151af7fe931fd5fbdad1a02977a1d069d2c5d5a0947
    folder: 3rd-party/semver
  - url: https://tukaani.org/xz/xz-embedded-20210201.tar.gz
    sha256: 4f41f5c3e2023db7e428d99dd8fe72f0cf702647fa354aef36f3473989f322bf
    folder: 3rd-party/xz-decoder/xz-embedded
  - url: https://github.com/canonical/yaml-cpp/archive/a61bca0.tar.gz
    sha256: 9ebd25f3640d3c2f49fd8705acb10deb235db6dd7ba5d56d45a58d35fec44575
    folder: 3rd-party/yaml-cpp

build:
  number: 0
  script:
    - mkdir build
    - cd build
    - cmake ../
    - make

requirements:
  build:
    - cmake
    - make
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - qt

test:
  imports:
    - multipass
  commands:
    - multipass --version
    
about:
  home: https://multipass.run/
  license: GPL-2.0-or-later
  license_file: COPYING.GPL.txt
  summary: 'Multipass orchestrates virtual Ubuntu instances'

  description: |
    Multipass is a lightweight VM manager for Linux, Windows and macOS. 
    It's designed for developers who want a fresh Ubuntu environment 
    with a single command. It uses KVM on Linux, 
    Hyper-V on Windows and HyperKit on macOS 
    to run the VM with minimal overhead. 
    It can also use VirtualBox on Windows and macOS. 
    Multipass will fetch images for you and keep them up to date.

    Since it supports metadata for cloud-init, 
    you can simulate a small cloud deployment on your laptop or workstation.


  dev_url: https://github.com/canonical/multipass
  doc_url: https://discourse.ubuntu.com/c/multipass/doc/24

extra:
  recipe-maintainers:
    - ngam
