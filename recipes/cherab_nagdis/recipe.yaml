context:
  name: cherab-nagdis
  version: "0.1.1"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/munechika-koyo/cherab_nagdis/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 971aeab0e14aca7906654a5e614b62a2ab940a568c8352d8d009903dc8f5758f

build:
  skip:
    - win
    - match(python, "<3.10")
  script:
    content: ${{ PYTHON }} -m pip install --no-deps --no-build-isolation -vv
    env:
      SETUPTOOLS_SCM_PRETEND_VERSION: ${{ version }}
  number: 0

requirements:
  build:
    - ${{ compiler("c") }}
    - ${{ stdlib("c") }}
    - if: build_platform != target_platform
      then:
        - python
        - cross-python_${{ target_platform }}
        - hatch-cython >=0.6.0rc0
        - hatch-vcs
        - cherab

  host:
    - python
    - pip
    - hatch-cython >=0.6.0rc0
    - hatch-vcs
    - cherab

  run:
    - python
    - numpy
    - matplotlib-base
    - scipy
    - plotly
    - calcam
    - pooch
    - paramiko
    - tqdm
    - rich

tests:
  - script:
      - pytest tests/ -v
    files:
      source:
        - tests/
    requirements:
      run:
        - pytest
        - pytest-cov
        - if: linux
          then:
            - libgl-devel

about:
  homepage: https://github.com/munechika-koyo/cherab_nagdis
  summary: Machine-specific CHERAB for NAGDIS-II
  description: |
    This package provides a machine-specific CHERAB for NAGDIS-II, which is a
    the linearly magnetized divertor plasma experiment at the Nagoya University.
    It is designed to work with the CHERAB framework and provides additional
    functionalities specific to NAGDIS-II.
  license: MIT
  license_file: LICENSE
  repository: https://github.com/munechika-koyo/cherab_nagdis
  documentation: https://cherab-nagdis.readthedocs.io/

extra:
  recipe-maintainers:
    - munechika-koyo
