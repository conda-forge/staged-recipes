context:
  name: cherab-nagdis
  version: "0.1.0"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/munechika-koyo/cherab_nagdis/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 4808138e687e0d52fda91f273275a4a51be37b29f2d44af26743f74a77ca208f

build:
  skip:
    - win
  script:
    - if: unix
      then:
        - export SETUPTOOLS_SCM_PRETEND_VERSION=$PKG_VERSION
        - ${{ PYTHON }} -m pip install --no-deps --no-build-isolation -vv .
    - if: win
      then:
        - set SETUPTOOLS_SCM_PRETEND_VERSION=%PKG_VERSION%
        - ${{ PYTHON }} -m pip install --no-deps --no-build-isolation -vv .
  number: 0

requirements:
  build:
    - ${{ compiler("c") }}
    - ${{ stdlib("c") }}
    - if: build_platform != target_platform
      then:
        - python
        - cross-python_${{ target_platform }}
        - hatch-cython >=0.6.0rc0
        - hatch-vcs
        - cherab

  host:
    - python
    - pip
    - hatch-cython >=0.6.0rc0
    - hatch-vcs
    - cherab

  run:
    - python
    - numpy
    - matplotlib-base
    - scipy
    - plotly
    - calcam
    - pooch
    - paramiko
    - tqdm
    - rich

tests:
  - script:
      - pytest tests/ -v
    files:
      source:
        - tests/
    requirements:
      run:
        - pytest
        - pytest-cov

about:
  homepage: https://github.com/munechika-koyo/cherab_nagdis
  summary: Machine-specific CHERAB for NAGDIS-II
  description: |
    This package provides a machine-specific CHERAB for NAGDIS-II, which is a
    the linearly magnetized divertor plasma experiment at the Nagoya University.
    It is designed to work with the CHERAB framework and provides additional
    functionalities specific to NAGDIS-II.
  license: MIT
  license_file: LICENSE
  repository: https://github.com/munechika-koyo/cherab_nagdis
  documentation: https://cherab-nagdis.readthedocs.io/

extra:
  recipe-maintainers:
    - munechika-koyo
