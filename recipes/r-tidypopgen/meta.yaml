{% set version = '0.4.1' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-tidypopgen
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/tidypopgen_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/tidypopgen/tidypopgen_{{ version }}.tar.gz
  sha256: ec96e4a7449ecd96133108cfa682843d2e2499cc8e3294ce5e0497da5887e2bd

build:
  number: 0
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ compiler('c') }}              # [not win]
    - {{ compiler('m2w64_c') }}        # [win]
    - {{ compiler('cxx') }}            # [not win]
    - {{ compiler('m2w64_cxx') }}      # [win]
    - {{ stdlib("c") }}
    - {{ posix }}filesystem        # [win]
    - {{ posix }}make
    - {{ posix }}sed               # [win]
    - {{ posix }}coreutils         # [win]
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
    - libopenblas
    - libzlib
    - libgomp      # [linux]
    - r-mass
    - r-rcpp
    - r-rcpparmadillo >=0.9.600
    - r-upsetr
    - r-bigparallelr
    - r-bigsnpr
    - r-bigstatsr
    - r-dplyr
    - r-foreach
    - r-generics
    - r-ggplot2
    - r-patchwork
    - r-rlang
    - r-rmio
    - r-runner
    - r-sf
    - r-tibble
    - r-tidyr
    - r-tidyselect
    - r-vctrs
  run:
    - r-base
    - libopenblas
    - libzlib
    - libgomp      # [linux]
    - r-mass
    - r-rcpp
    - r-rcpparmadillo >=0.9.600
    - r-upsetr
    - r-bigparallelr
    - r-bigsnpr
    - r-bigstatsr
    - r-dplyr
    - r-foreach
    - r-generics
    - r-ggplot2
    - r-patchwork
    - r-rlang
    - r-rmio
    - r-runner
    - r-sf
    - r-tibble
    - r-tidyr
    - r-tidyselect
    - r-vctrs

test:
  commands:
    - $R -e "library('tidypopgen')"           # [not win]
    - "\"%R%\" -e \"library('tidypopgen')\""  # [win]

about:
  home: https://github.com/EvolEcolGroup/tidypopgen, https://evolecolgroup.github.io/tidypopgen/
  license: GPL-3.0-only
  summary: We provide a tidy grammar of population genetics, facilitating the manipulation and
    analysis of data on biallelic single nucleotide polymorphisms (SNPs). 'tidypopgen'
    scales to very large genetic datasets by storing genotypes on disk, and performing
    operations on them in chunks, without ever loading all data in memory. The full
    functionalities of the package are described in Carter et al. (2025) <doi:10.1111/2041-210x.70204>.
  license_family: GPL3
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
    - dramanica

# Package: tidypopgen
# Title: Tidy Population Genetics
# Version: 0.4.1
# Authors@R: c(person("Evie", "Carter", role = c("aut")), person("Eirlys", "Tysall", role = c("aut")), person("Andrea", "Manica", email = "am315@cam.ac.uk", role = c("aut", "cre", "cph"), comment = c(ORCID = "0000-0003-1895-450X")), person("Chang", "Christopher", role = c("ctb"), comment = "Author of Hardy-Weinberg Equilibrium algorithm in PLINK 1.90, used in loci_hwe()"), person("Shaun", "Purcell", role = c("ctb"), comment = "Author of Hardy-Weinberg Equilibrium algorithm in PLINK 1.90, used in loci_hwe()"), person("Bengtsson", "Henrik", role = c("ctb"), comment = "Author of countLines in R.utils, modified for .vcf in count_vcf_variants()"))
# Description: We provide a tidy grammar of population genetics, facilitating the manipulation and analysis of data on biallelic single nucleotide polymorphisms (SNPs). 'tidypopgen' scales to very large genetic datasets by storing genotypes on disk, and performing operations on them in chunks, without ever loading all data in memory. The full functionalities of the package are described in Carter et al. (2025) <doi:10.1111/2041-210x.70204>.
# License: GPL (>= 3)
# Encoding: UTF-8
# Language: en-GB
# URL: https://github.com/EvolEcolGroup/tidypopgen, https://evolecolgroup.github.io/tidypopgen/
# BugReports: https://github.com/EvolEcolGroup/tidypopgen/issues
# RoxygenNote: 7.3.3
# Depends: R (>= 3.5.0), dplyr, tibble
# Imports: bigparallelr, bigsnpr, bigstatsr, foreach, generics, ggplot2, methods, MASS, patchwork, runner, rlang, sf, stats, tidyselect, tidyr, utils, Rcpp, UpSetR, vctrs
# Suggests: adegenet, admixtools, broom, data.table, hierfstat, knitr, detectRUNS, LEA, RhpcBLASctl, rmarkdown, rnaturalearth, rnaturalearthdata, readr, reticulate, testthat (>= 3.0.0), vcfR, xgboost, spelling
# Additional_repositories: https://evolecolgroup.r-universe.dev/
# VignetteBuilder: knitr
# Config/testthat/edition: 3
# LinkingTo: Rcpp, RcppArmadillo (>= 0.9.600), bigstatsr, rmio
# LazyData: true
# Config/Needs/website: rmarkdown
# NeedsCompilation: yes
# Packaged: 2025-12-20 13:50:11 UTC; andrea
# Author: Evie Carter [aut], Eirlys Tysall [aut], Andrea Manica [aut, cre, cph] (ORCID: <https://orcid.org/0000-0003-1895-450X>), Chang Christopher [ctb] (Author of Hardy-Weinberg Equilibrium algorithm in PLINK 1.90, used in loci_hwe()), Shaun Purcell [ctb] (Author of Hardy-Weinberg Equilibrium algorithm in PLINK 1.90, used in loci_hwe()), Bengtsson Henrik [ctb] (Author of countLines in R.utils, modified for .vcf in count_vcf_variants())
# Maintainer: Andrea Manica <am315@cam.ac.uk>
# Repository: CRAN
# Date/Publication: 2025-12-20 14:40:02 UTC
