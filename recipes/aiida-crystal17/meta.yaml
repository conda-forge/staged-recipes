{% set name = "aiida-crystal17" %}
{% set version = "0.4.0" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 03b8bf0dd46a6ef506e2894d4b403cfd97fac8a41421262dcabf72247c3d6974

build:
  number: 0
  entry_points:
    - mock_runcry17 = aiida_crystal17.tests.mock_runcry17:main
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv "
  skip: True  # [py > 27]

requirements:
  host:
    - pip
    - python
    - reentry
    - setuptools
  run:
    - aiida-core ==0.12.2
    - ase >=3.12
    - ejplugins >=0.9.7
    - packaging
    - postgresql >=9.4
    - python
    - spglib >=1.10

test:
  imports:
    - aiida_crystal17
    - aiida_crystal17.calculations
    - aiida_crystal17.cmndline
    - aiida_crystal17.data
    - aiida_crystal17.parsers
    - aiida_crystal17.tests
    - aiida_crystal17.tests.input_files
    - aiida_crystal17.tests.output_files
    - aiida_crystal17.validation
    - aiida_crystal17.workflows
  commands:
    - mock_runcry17 --test

about:
  home: https://github.com/chrisjsewell/aiida-crystal17
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: AiiDA plugin for running the CRYSTAL17 code
  doc_url: https://aiida-crystal17.readthedocs.io
  dev_url: https://github.com/chrisjsewell/aiida-crystal17

extra:
  recipe-maintainers:
    - chrisjsewell
