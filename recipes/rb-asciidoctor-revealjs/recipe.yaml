# Recipe for asciidoctor-revealjs Ruby gem
# A reveal.js converter for Asciidoctor and Asciidoctor.js that transforms an AsciiDoc document into an HTML5 presentation
schema_version: 1

context:
  name: asciidoctor-revealjs
  version: "5.2.0"
  ruby_version: "3.4.0"

package:
  name: rb-${{ name|lower }}
  version: ${{ version }}

source:
  url: https://rubygems.org/downloads/${{ name }}-${{ version }}.gem
  sha256: 3504a5e7eaf2c91de37f96189314ffb1e6bf94dad9d646d5c9a24c6691bf6ae2

build:
  noarch: generic
  number: 0
  script:
    interpreter: nu
    content:
      - mkdir $"($env.PREFIX)/lib/ruby/gems/${{ ruby_version }}"
      - let gem_dir = ($env.PREFIX | path join "lib" "ruby" "gems" "${{ ruby_version }}")
      - ^($env.PREFIX | path join "bin" "gem") install -N -l -V --norc --ignore-dependencies --install-dir $gem_dir -n ($env.PREFIX | path join "bin") ${{ name }}-${{ version }}.gem
      - ^($env.PREFIX | path join "bin" "gem") unpack ${{ name }}-${{ version }}.gem
      - cp ${{ name }}-${{ version }}/LICENSE.adoc .

requirements:
  build:
    - nushell ==0.106.1
    - ruby ==${{ ruby_version }}
  host:
    - ruby >=2.7,<4.0
  run:
    - ruby >=2.7,<4.0
    - asciidoctor >=2.0.0,<3.0.0

tests:
  - script:
      - ruby -r 'asciidoctor-revealjs'
    requirements:
      run:
        - ruby >=2.7,<4.0

about:
  homepage: https://github.com/asciidoctor/asciidoctor-reveal.js
  summary: A reveal.js converter for Asciidoctor. Write your slides in AsciiDoc!
  description: |
    Asciidoctor reveal.js is a converter for Asciidoctor and Asciidoctor.js that
    transforms an AsciiDoc document into an HTML5 presentation designed to be
    executed by the reveal.js presentation framework.
  license: MIT
  license_file: LICENSE.adoc
  documentation: https://docs.asciidoctor.org/reveal.js-converter/latest/
  repository: https://github.com/asciidoctor/asciidoctor-reveal.js

extra:
  recipe-maintainers:
    - conda-forge/ruby
