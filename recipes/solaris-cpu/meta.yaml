{% set name = "solaris" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/s/solaris/solaris-{{ version }}.tar.gz
  sha256: a284e29cb9db97cd466b04b77e05ce740e7cc97dc21756f8c873c7f50bbc208d
  # sha256 is the preferred checksum -- you can get it for a file with:
  #  `openssl sha256 <file name>`.
  # You may need the openssl package, available on conda-forge:
  #  `conda install openssl -c conda-forge``

build:
  number: 0
  # If the installation is complex, or different between Unix and Windows, use separate bld.bat and build.sh files instead of this key.
  # By default, the package will be built for the Python versions supported by conda-forge and for all major OSs.
  # Add the line "skip: True  # [py<35]" (for example) to limit to Python 3.5 and newer, or "skip: True  # [not win]" to limit to Windows.
  skip: True  # [py<36]
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('c') }}
  host:
    - python
    - pip
    - cython
    - numpy
    - libgdal
    - proj4 <6
    - libspatialindex

  run:
    - python>=3.6
    - setuptools>=39.0.0
    - pip>=19.0
    - shapely>=1.6.4
    - fiona>=1.8.6
    - panda>s=0.24.2
    - geopandas>=0.5.0
    - opencv>=3.4.4
    - numpy>=1.16.3
    - gdal>=2.4.1
    - tqdm>=4.31.1
    - matplotlib>=3.1.0
    - rtree>=0.8.3
    - urllib3>=1.24.3
    - networkx>=2.3
    - rasterio>=1.0.22
    - scipy>=1.2.1
    - scikit-image>=0.15.0
    - tensorflow>=1.13.1
    - pytorch>=1.1.0
    - torchvision>=0.3.0
    - pyyaml>=5.1
    - pyproj>=2.1.3
    - affine>=2.2.2
    - albumentations>=0.2.3
    - rio-tiler>=1.2.7
    - rio-cogeo>=1.0.0

test:
  imports:
    - solaris
    - solaris.bin
    - solaris.tile
    - solaris.vector
    - solaris.raster
    - solaris.nets
    - solaris.eval

about:
  home: http://github.com/cosmiq/solaris
  license: Apache-2.0
  license_family: Apache
  license_file: LICENSE.txt
  summary: 'An open source ML pipeline for overhead imagery by CosmiQ Works'

  description: |
    An open source python API and CLI for performing deep learning-based
    computer vision analyses on overhead imagery, providing all functionality
    to go from full image strips and vector labels all the way through to model
    evaluation. Also includes the SpaceNet models.
  doc_url: https://solaris.readthedocs.io
  dev_url: https://github.com/cosmiq/solaris

extra:
  recipe-maintainers:
    # GitHub IDs for maintainers of the recipe.
    # Always check with the people listed below if they are OK becoming maintainers of the recipe. (There will be spam!)
    - nrweir
