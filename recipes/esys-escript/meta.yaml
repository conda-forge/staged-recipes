package:
  name: esys-escript
  version: 3.6

source:
  - url: https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.gz
    sha256: 882b48708d211a5f48e60b0124cf5863c1534cd544ecd0664bb534a4b5d506e9
    folder: escript-boost

  - svn_url: https://svn.geocomp.uq.edu.au/svn/esys13/trunk
    svn_rev: 6848
    folder: escript

build:
  skip: true [win]
  
  number: 0

  binary_has_prefix_files:
    - bin/run-escript
    - bin/runmodel.py
    - esys
    - include/cusp
    - include/dudley
    - include/escript
    - include/finley
    - include/paso
    - include/ripley
    - include/speckley
    - include/weipa
    - lib/buildvars
    - lib/libdudley.so
    - lib/libescriptreader.so
    - lib/libescript.so
    - lib/libfinley.so
    - lib/libpaso.so
    - lib/libripley.so
    - lib/libspeckley.so
    - lib/libweipa.so

  always_include_files:
    - lib/libpython2.7.so
    - lib/libpython2.7.so.1.0
    - lib/libopenblasp-r0.3.6.so
    - lib/libopenblas.so.0
    - lib/libgfortran.so.4

  rpaths:
    - bin
    - esys
    - esys/boost/include
    - esys/boost/lib
    - include
    - lib

requirements:
  host:
    - {{ compiler('cxx') }}
    - blas
    - cppunit
    - gcc_linux-64      [unix]
    - gcc_impl_linux-64 =7.3.0
    - gdal
    - gxx_linux-64      [unix]
    - libgcc            [unix]
    - libgcc-ng =9.1
    - matplotlib
    - metis
    - suitesparse
    - numpy
    - openblas
    - python =2.7.15
    - pyproj
    - scipy
    - sympy
    - suitesparse

  build:
    - {{ compiler('cxx') }}
    - python =2.7.15
    - gcc_impl_linux-64 =7.3.0
    - libgcc-ng =9.1
    - gdal
    - python =2.7.15
    - make
    - scons
    - svn
    - matplotlib
    - metis
    - openblas
    - suitesparse
    - numpy
    - pyproj
    - scipy
    - sympy

  run:
    - blas
    - boost-cpp
    - gdal
    - gcc_impl_linux-64 =7.3.0
    - libgfortran-ng
    - matplotlib
    - metis
    - numpy
    - openblas
    - python =2.7.15
    - pyproj
    - scipy
    - suitesparse
    - sympy
    - zlib

about:
  home: https://launchpad.net/escript-finley
  summary: esys-escript is a programming tool for implementing mathematical 
    models in python using the finite element method (FEM).
  license: Apache-2.0
  description: esys-escript is a programming tool for implementing 
    mathematical models in python using the finite element method (FEM). 
    As users do not access the data structures it is very easy to use and 
    scripts can run on desktop computers as well as highly parallel
    supercomputer without changes. Application areas for escript include 
    earth mantle convection, geophysical inversion, earthquakes, 
    porous media flow, reactive transport, plate subduction, erosion, 
    and tsunamis.
  dev_url: https://launchpad.net/escript-finley
  doc_url: https://launchpad.net/escript-finley
  doc_source_url: https://launchpad.net/escript-finley

extra:
  recipe-maintainers:
    - aellery
