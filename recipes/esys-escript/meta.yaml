
package:
    name: esys-escript
    version: 5.4
source:
    - fn: boost_1_70_0.tar.bz2
      sha256: 430ae8354789de4fd19ee52f3b1f739e1fba576f0aded0897c3c2bc00fb38778
      url: https://dl.bintray.com/boostorg/release/1.70.0/source/boost_1_70_0.tar.bz2
    - svn_url: https://svn.geocomp.uq.edu.au/svn/esys13/trunk
      svn_rev: 6850
      folder: escript
    - fn: trilinos-12.12.1-Source.tar.gz
      url: http://trilinos.csbsju.edu/download/files/trilinos-12.12.1-Source.tar.gz
      sha256: 7c67d83befbeabc773661bcdfee2850c404d249160b755d3f1be2e96f564f9fd
      folder: trilinos
build:
    skip: True  # [osx]
    skip: True  # [win]
    number: '0'
    rpaths:
        - esys
        - esys/trilinos
        - esys/boost
requirements:
    build:
        - binutils_impl_linux-64 2.31.1 h6176602_1  # [linux]
        - binutils_linux-64 2.31.1 h6176602_7  # [linux]
        - gcc_impl_linux-64 7.3.0 habb00fd_1  # [linux]
        - gcc_linux-64 7.3.0 h553295d_7  # [linux]
        - gxx_impl_linux-64 7.3.0 hdf63c60_1  # [linux]
        - gxx_linux-64 7.3.0 h553295d_7  # [linux]
        - libgcc-ng 8.2.0 hdf63c60_1  # [linux]
        - libstdcxx-ng 8.2.0 hdf63c60_1  # [linux]
        - vs2008_win-64 9.00.30729.1 h17c34da_5  # [win]
        - m2w64-gcc  # [win]
        - svn
        - scons 3.0.5 py27_0
        - cmake
        - make
        - openmp
        - suitesparse
        - cppunit  # [linux]
        - matplotlib
        - gdal
        - pyproj
        - scipy
        - ripgrep
    host:
        - boost-cpp 1.70.0 ha2d47e9_0  # [linux]
        - bzip2 1.0.6 h14c3975_1002  # [linux]
        - ca-certificates 2019.3.9 hecc5488_0  # [linux]
        - icu 58.2 hf484d3e_1000  # [linux]
        - libblas 3.8.0 10_openblas  # [linux]
        - libcblas 3.8.0 10_openblas  # [linux]
        - libffi 3.2.1 he1b5a44_1006  # [linux]
        - libgcc-ng 8.2.0 hdf63c60_1  # [linux]
        - libgfortran-ng 7.3.0 hdf63c60_0  # [linux]
        - liblapack 3.8.0 10_openblas  # [linux]
        - libstdcxx-ng 8.2.0 hdf63c60_1  # [linux]
        - ncurses 6.1 hf484d3e_1002  # [linux]
        - numpy 1.14.6 py27he5ce36f_1201  # [linux]
        - openblas 0.3.6   # [linux]
        - openssl 1.1.1b h14c3975_1  # [linux]
        - python 2.7.15 h721da81_1008  # [linux]
        - readline 7.0 hf8c457e_1001  # [linux]
        - sqlite 3.28.0 h8b20d00_0  # [linux]
        - tk 8.6.9 h84994c4_1001  # [linux]
        - xz 5.2.4 h14c3975_1001  # [linux]
        - zlib 1.2.11 h14c3975_1004  # [linux]
        - boost-cpp 1.70.0 h099cdad_0  # [win]
        - intel-openmp 2019.3 203  # [win]
        - libblas 3.8.0 7_mkl  # [win]
        - libcblas 3.8.0 7_mkl  # [win]
        - liblapack 3.8.0 7_mkl  # [win]
        - mkl 2019.3 203  # [win]
        - numpy 1.11.3 py27hab51878_1207  # [win]
        - python 2.7.15 h2880e7c_1008  # [win]
        - vc 9 0  # [win]
        - vs2008_runtime 9.0.30729.6161 0  # [win]
        - zlib 1.2.11 h3cc03e0_1004  # [win]
        # - suitesparse
        # - cppunit
        #- python 2.7.15 h721da81_1008
    run:
        - boost-cpp 1.70.0.*  # [linux]
        - libgcc-ng >=7.3.0  # [linux]
        - libstdcxx-ng >=7.3.0  # [linux]
        - numpy >=1.14.6,<2.0a0  # [linux]
        - python >=2.7,<2.8.0a0  # [linux]
        - boost-cpp 1.70.0.*  # [win]
        - numpy >=1.11.3,<2.0a0  # [win]
        - python >=2.7,<2.8.0a0  # [win]
        - vc 9.*  # [win]
        - suitesparse
        - cppunit  # [linux]
        - matplotlib
        - gdal
        - pyproj
        - scipy
test:
    commands:
        - test -f $PREFIX/esys/boost/include/boost/python.hpp  # [linux]
        - test -d $PREFIX/esys/boost/include/boost/python  # [linux]
        - test -f $PREFIX/esys/boost/lib/libboost_python27.a  # [linux]
        - test -f $PREFIX/esys/boost/lib/libboost_python27${SHLIB_EXT}  # [linux]
        - test -f $PREFIX/esys/boost/lib/libboost_numpy27.a  # [linux]
        - test -f $PREFIX/esys/boost/lib/libboost_numpy27${SHLIB_EXT}  # [linux]
        - conda inspect linkages -p $PREFIX/esys/boost boost  # [linux]
        - if not exist %LIBRARY_INC%\\boost\\python.hpp exit 1  # [win]
        - if not exist %LIBRARY_INC%\\boost\\python exit 1  # [win]
        - if not exist %PREFIX%\\Library\\bin\\boost_python27.dll exit 1  # [win]
        - if not exist %PREFIX%\\Library\\lib\\boost_python27.lib exit 1  # [win]
        - if not exist %PREFIX%\\Library\\lib\\libboost_python27.lib exit 1  # [win]
        - if not exist %PREFIX%\\Library\\bin\\boost_numpy27.dll exit 1  # [win]
        - if not exist %PREFIX%\\Library\\lib\\boost_numpy27.lib exit 1  # [win]
        - if not exist %PREFIX%\\Library\\lib\\libboost_numpy27.lib exit 1  # [win]
        - sh ${PREFIX}/utest.sh ${SRC_DIR}/escript_build '-t2'
about:
  home: https://launchpad.net/escript-finley
  summary: esys-escript is a programming tool for implementing mathematical 
    models in python using the finite element method (FEM).
  license: Apache-2.0
  description: esys-escript is a programming tool for implementing 
    mathematical models in python using the finite element method (FEM). 
    As users do not access the data structures it is very easy to use and 
    scripts can run on desktop computers as well as highly parallel
    supercomputer without changes. Application areas for escript include 
    earth mantle convection, geophysical inversion, earthquakes, 
    porous media flow, reactive transport, plate subduction, erosion, 
    and tsunamis.
  dev_url: https://launchpad.net/escript-finley
  doc_url: https://launchpad.net/escript-finley
  doc_source_url: https://launchpad.net/escript-finley

extra:
  recipe-maintainers:
    - aellery
