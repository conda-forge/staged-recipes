{% set version = '1.1-7.1' %}

{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-dppackage
  version: {{ version|replace("-", "_") }}

source:
  fn: DPpackage_{{ version }}.tar.gz
  url:
    - https://cran.r-project.org/src/contrib/DPpackage_{{ version }}.tar.gz
    - https://cran.r-project.org/src/contrib/Archive/DPpackage/DPpackage_{{ version }}.tar.gz

  sha256: a89bf9e25f4a617db5fedc7cc26854e6221d46e857f8baf8250ae69c1d1d445b

build:
  number: 0
  skip: true  # [win32]

  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - r-base
    - r-mass
    - r-nlme
    - r-survival
    - posix                # [win]
    - {{native}}toolchain  # [win]
    - gcc                  # [not win]

  run:
    - r-base
    - r-mass
    - r-nlme
    - r-survival{indent}libgcc  # [not win]

test:
  commands:
    - $R -e "library('DPpackage')"  # [not win]
    - "\"%R%\" -e \"library('DPpackage')\""  # [win]

about:
  home: http://www.mat.puc.cl/~ajara
  license: GPL (>= 2)
  summary: Functions to perform inference via simulation from the posterior distributions for
    Bayesian nonparametric and semiparametric models. Although the name of the package
    was motivated by the Dirichlet Process prior, the package considers and will consider
    other priors on functional spaces. So far, DPpackage includes models considering
    Dirichlet Processes, Dependent Dirichlet Processes, Dependent Poisson- Dirichlet
    Processes, Hierarchical Dirichlet Processes, Polya Trees, Linear Dependent Tailfree
    Processes, Mixtures of Triangular distributions, Random Bernstein polynomials priors
    and Dependent Bernstein Polynomials.  The package also includes models considering
    Penalized B-Splines.  Includes semiparametric models for marginal and conditional
    density estimation, ROC curve analysis, interval censored data, binary regression
    models, generalized linear mixed models, IRT type models, and generalized additive
    models. Also contains functions to compute Pseudo-Bayes factors for model comparison,
    and to elicitate the precision parameter of the Dirichlet Process. To maximize computational
    efficiency, the actual sampling for each model is done in compiled FORTRAN. The
    functions return objects which can be subsequently analyzed with functions provided
    in the 'coda' package.
  license_family: GPL3
  license_file: '{{ environ["PREFIX"] }}\/lib\/R\/share\/licenses\/GPL-3'  # [unix]
  license_file: '{{ environ["PREFIX"] }}\R\share\licenses\GPL-3'  # [win]

extra:
  recipe-maintainers:
    - MathiasHaudgaard
    - FrodePedersen
    - ArneKr
    - johanneskoester
    - bgruening
    - daler
    - jdblischak