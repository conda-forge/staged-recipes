= Microsoft Guidelines Support Library (GSL) Recipe
:version: 4.2.0
:toc: left
:toclevels: 2
:sectnums:
:icons: font

This recipe packages Microsoft's implementation of the C++ Core Guidelines Support Library (GSL).

== About GSL

The Guidelines Support Library (GSL) contains functions and types that are suggested for use by the https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines[C++ Core Guidelines] maintained by the Standard C++ Foundation. This repo contains Microsoft's implementation of GSL.

Key features:

* Header-only library
* C++14 support required
* Provides span, not_null, owner, and other utility types
* Helps write safer, more maintainable C++ code

== Package Details

[cols="1,2"]
|===
| Property | Value

| Package Name
| `microsoft-gsl`

| Version
| {version}

| Source
| https://github.com/microsoft/GSL

| License
| MIT
|===

== Build Information

This is a header-only library that uses CMake for installation. The build process:

1. Uses a single nushell script (`build.nu`) for cross-platform build automation
2. Configures with CMake (tests disabled)
3. Installs headers to `$PREFIX/include/gsl/`
4. Installs CMake configuration files for easy integration
5. Automatically detects platform and handles Windows/Unix path differences

== Usage

After installation, you can use GSL in your C++ projects:

[source,cpp]
----
#include <gsl/gsl>

void example() {
    gsl::span<int> data = ...;
    gsl::not_null<int*> ptr = ...;
    // Use GSL types safely
}
----

== CMake Integration

The package includes CMake configuration files, so you can easily integrate it:

[source,cmake]
----
find_package(Microsoft.GSL REQUIRED)
target_link_libraries(your_target Microsoft.GSL::GSL)
----

== Testing

=== Option 1: Test with build-locally.py (Docker-based)

[source,bash]
----
# Navigate to recipe directory
cd recipes/microsoft-gsl

# Run local build test
python ../../build-locally.py linux64
----

=== Option 2: Test with rattler-build directly

[source,bash]
----
# Build for specific platform
pixi run rattler-build build --recipe-dir recipes/microsoft-gsl --target-platform linux-64

# Test multiple platforms
pixi run rattler-build build --recipe-dir recipes/microsoft-gsl --target-platform linux-64,osx-64,osx-arm64,win-64
----

=== Option 3: Test from root directory with recipe name

[source,bash]
----
# From staged-recipes root
AZURE=True pixi run python build-locally.py linux64 --recipes microsoft-gsl
----

=== Option 4: Lint and validate

[source,bash]
----
# Validate recipe format and conda-forge compliance
pixi run lint
----

=== Manual Testing

After successful build, verify the package contains:

* Headers in `include/gsl/` directory
* CMake configuration files
* Proper license file placement

Test integration in a simple C++ project:

[source,cpp]
----
#include <gsl/gsl>
#include <vector>

int main() {
    std::vector<int> data = {1, 2, 3, 4, 5};
    gsl::span<int> span_data(data);

    // This should compile without errors
    return span_data.size() == 5 ? 0 : 1;
}
----

== Differences from gsl-lite

This package provides the official Microsoft GSL implementation, while `gsl-lite` is a single-file alternative implementation. Choose based on your specific needs and compatibility requirements.

[NOTE]
====
This is a header-only library, so no runtime dependencies are required. The package only needs to be available at compile time.
====

== Maintainers

* Recipe maintainer information will be added upon feedstock creation

== Related Packages

* `gsl-lite`: Alternative single-file implementation
* C++ compiler packages for building applications that use GSL
