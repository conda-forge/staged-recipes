schema_version: 1

context:
  version: "4.2.0"

package:
  name: microsoft-gsl
  version: ${{ version }}

source:
  url: https://github.com/microsoft/GSL/archive/refs/tags/v${{ version }}.tar.gz
  sha256: 2c717545a073649126cb99ebd493fa2ae23120077968795d2c69cbab821e4ac6

build:
  number: 0
  script: build.nu

requirements:
  build:
    - ${{ compiler('cxx') }}
    - ${{ stdlib("c") }}
    - cmake >=3.15
    - ninja >=1.10
    - nushell >=0.80
  host:
    - cmake >=3.15

tests:
  - script:
      - if: unix
        then: test -f $PREFIX/include/gsl/gsl
      - if: win
        then: if not exist %LIBRARY_INC%\\gsl\\gsl exit 1
      - if: unix
        then: test -f $PREFIX/share/cmake/Microsoft.GSL/Microsoft.GSLConfig.cmake
      - if: win
        then: if not exist %LIBRARY_PREFIX%\\share\\cmake\\Microsoft.GSL\\Microsoft.GSLConfig.cmake exit 1

about:
  homepage: https://github.com/microsoft/GSL
  summary: Microsoft's implementation of the Guidelines Support Library
  description: |
    The Guidelines Support Library (GSL) contains functions and types that are suggested
    for use by the C++ Core Guidelines maintained by the Standard C++ Foundation. This
    repo contains Microsoft's implementation of GSL.

    The entire implementation is provided inline in the headers. The implementation
    generally assumes a platform that implements C++14 support.
  license: MIT
  license_file: LICENSE
  documentation: https://github.com/microsoft/GSL
  repository: https://github.com/microsoft/GSL

extra:
  recipe-maintainers:
    - phreed
