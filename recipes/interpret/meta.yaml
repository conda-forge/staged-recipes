{% set version = "0.2.7" %}

package:
  name: interpret-suite
  version: {{ version }}

source:
  url: https://github.com/interpretml/interpret/archive/v{{ version }}.tar.gz  
  git_rev: "v{{ version }}"

build:
  number: 0

outputs: 
  - name: interpret-core
    script: Xcopy /E /I shared python\interpret-core\symbolic\shared  # [win]
    script: cp -r shared python/interpret-core/symbolic/shared  # [not win]
    script: cd python/interpret-core && {{ PYTHON }} setup.py build && {{ PYTHON }} setup.py install
    requirements:
      build: 
        - {{ compiler('cxx') }}
        - nodejs
      host:
        - pip
        - python 
      run:
        - python 
      run_constrained:
        # Equiv. to required.
        - scikit-learn >=0.18.1
        - numpy >=1.11.1
        - scipy >=0.18.1
        - pandas >=0.19.2
        - joblib >=0.11
        # Equiv. to extras.
        - ipython >=7.4.0
        - ipykernel >=5.1.0
        - plotly >=3.8.1
        - lime >=0.1.1.33
        - SALib >=1.3.3
        - shap >=0.25.5
        - dill >=0.2.5
        - dash >=1.0.0
        - dash-cytoscape >=0.1.1
        - gevent >=1.3.6
        - requests >=2.19.0
      test:
        imports:
          - interpret
          - interpret.api
        commands:
          - pip check
        requires:
          - pip

  - name: interpret
    script: cd python/interpret && {{ PYTHON }} -m pip install . -vv
    requirements:
      host:
        - pip
        - python
      run:
        - python
        - interpret-core >={{ version }}
        # Equiv. to required.
        - scikit-learn >=0.18.1
        - numpy >=1.11.1
        - scipy >=0.18.1
        - pandas >=0.19.2
        - joblib >=0.11
        # Equiv. to extras.
        - ipython >=7.4.0
        - ipykernel >=5.1.0
        - plotly >=3.8.1
        - lime >=0.1.1.33
        - SALib >=1.3.3
        - shap >=0.25.5
        - dill >=0.2.5
        - dash >=1.0.0
        - dash_cytoscape >=0.1.1
        - gevent >=1.3.6
        - requests >=2.19.0
      test:
        imports:
        - interpret

about:
  home: https://github.com/interpretml/interpret
  summary: Fit interpretable machine learning models. Explain blackbox machine learning.
  license: MIT
  license_file: LICENSE
  dev_url: https://github.com/interpretml/interpret
  doc_url: https://interpret.ml/docs/getting-started

extra:
  recipe-maintainers:
    - philip-khor
