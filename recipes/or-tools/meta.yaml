{% set name = "or-tools" %}
{% set version = "5.1" %}
{% set sha256 = "25aedf676ccc5ae246be44543572fba9be5f42f2fb0c1f7edcc6f138db207d32" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://github.com/google/{{ name }}/archive/v{{ version }}.tar.gz
  #git_url: https://github.com/google/or-tools.git
  #git_version: v{{ version }}
  #path : {{ name }}
  sha256: {{ sha256 }}
  patches:
    - use_conda_version_packages.patch

build:
  number: 0
  skip: True  # [win or osx]
  script:
    - make third_party || bash # largely ignored now that we are relying on what is built.
    - make cc test_cc || bash
    - exit 1
    #- python setup.py install --single-version-externally-managed --record record.txt
    #
requirements:
  build:
    - autoconf 2.69
    - automake 1.15
    - bison 3.0.*
    - cmake
    - coincbc 2.9.*
    - curl
    - flex 2.6.*
    - git
    - gflags 2.1.*
    - help2man 1.47.*
    - libtool 2.4.*
    - pcre 8.*
    - python
    - protobuf 3.0.*
    - setuptools
    - sparsehash 2.0.*
    - swig 3.0.*
    - texinfo
    - texlive-core
    - toolchain
    - unzip

  run:
    - coincbc 2.9.*
    - gflags 2.1.*
    - pcre 8.*
    - protobuf 3.0.*
    - python
    - sparsehash 2.0.*

test:
  imports:
    - ortools

about:
  home: https://developers.google.com/optimization/
  license: Apache 2.0
  license_family: Apache
  license_file: LICENSE-2.0.txt
  summary: 'Google Optimization Tools is a fast and portable software suite for solving combinatorial optimization problems'

  # The remaining entries in this section are optional, but recommended
  description: |
  doc_url: https://developers.google.com/optimization/introduction/using
  dev_url: https://github.com/google/{{ name }}

extra:
  recipe-maintainers:
    - sodre
