{% set name = "sleepr" %}

package:
  name: r-{{ name }}
  version: '{{ version }}'

source:
  url: https://cran.r-project.org/src/contrib/sleepr_{{ version }}.tar.gz
  sha256: c35a8776b8e3d342ce2820015ad94dff57ee0bcb916d5dd4c3a125a00cbd44cd

build:
  number: 0
  merge_build_host: true
  script: R CMD INSTALL --build .
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  host:
    - r-base
    - r-data.table
  run:
    - r-base
    - r-data.table

test:
  commands:
    - $R -e "library('sleepr')"  # [not win]
    - "\"%R%\" -e \"library('sleepr')\""  # [win]

about:
  home: https://github.com/rethomics/sleepr
  summary: Use behavioural variables to score activity and infer sleep from bouts of immobility. It is primarily designed to score sleep in fruit flies from Drosophila Activity Monitor (TriKinetics) and Ethoscope data. It implements sleep scoring using the "five-minute rule" (Hendricks et al. (2000) <DOI:10.1016/S0896-6273(00)80877-6>), activity classification for Ethoscopes (Geissmann et al. (2017) <DOI:10.1371/journal.pbio.2003026>) and a new algorithm to detect when animals are dead.
  license: LGPL-3.0

extra:
  recipe-maintainers:
    - roaldarbol
