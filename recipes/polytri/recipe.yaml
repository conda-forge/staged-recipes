context:
  name: polytri
  version: "0.1.1"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/looooo/poly-tri/archive/refs/tags/${{ version }}.tar.gz
  sha256: f01e3af16c847da88ad688d38fb31455747af6a80718cddd7b6f5979f1f982f3

build:
  number: 0

requirements:
  build:
    - ${{ stdlib("c") }}
    - ${{ compiler('rust') }}
    - cargo-bundle-licenses
    - maturin >=1.0,<2.0
    - pip
    - python
    - setuptools
    - wheel
  host:
    - python
    - pip
    - numpy
    - setuptools
    - wheel
  run:
    - python
    - numpy

tests:
  - python:
      imports:
        - polytri
        - polytri._rust
      pip_check: true
  - script:
      - python -c "import polytri; assert polytri._rust_available and polytri._python_available"
      - python -c "from polytri import PolyTri; print('PolyTri imported successfully')"
      - python -c "from polytri import PolyTriPy; print('PolyTriPy imported successfully')"
    requirements:
      run:
        - pytest
        - numpy
        - matplotlib

about:
  homepage: https://github.com/looooo/poly-tri
  summary: Delaunay triangulation with constrained boundaries and hole removal
  description: |
    PolyTri is a high-performance Delaunay triangulation library with support for
    constrained boundaries and hole removal. It provides both a Rust implementation
    (faster) and a Python implementation (fallback).
    
    Features:
    - Fast Delaunay triangulation (Rust implementation)
    - Constrained boundary support
    - Hole removal
    - Python fallback implementation
  license: GPL-3.0-or-later
  license_file: 
    - LICENSE
    - THIRDPARTY.yml
  documentation: https://github.com/looooo/poly-tri
  repository: https://github.com/looooo/poly-tri

extra:
  recipe-maintainers:
    - looooo
