context:
  version: "0.0.3"

package:
  name: lilipod
  version: ${{ version }}

source:
  url: https://github.com/89luca89/lilipod/archive/refs/tags/v${{ version }}.tar.gz
  sha256: e1f8f94659d64fe06ae22e43c09fdedbdbddb88eb62897c4df44cd2f996d4e00

build:
  number: 0
  skip:
    - osx
    - win
  script: |
    set -exo pipefail

    make
    mkdir -p ${PREFIX}/bin/
    install -m 755 lilipod ${PREFIX}/bin/
    go-licenses save . --save_path=./license-files --ignore github.com/89luca89/lilipod

requirements:
  build:
    - ${{ compiler('go-nocgo') }}
    - ${{ stdlib('c') }}
    - go-licenses
    - make
    - wget

tests:
  - script:
      - lilipod --version
      - lilipod --help
      - lilipod pull alpine

about:
  homepage: https://github.com/89luca89/lilipod
  summary: 'Lilipod is a simple container manager, able to download, unpack and use OCI images from various container registries.'
  description: |
    Lilipod is a very simple container manager with minimal features to:

      - Download and manager images
      - Create and run containers

    It tries to keep a somewhat compatible CLI interface with Podman/Docker/Nerdctl.
  license: GPL-3.0-only
  license_file:
    - COPYING.md
    - license-files/
  documentation: https://github.com/89luca89/lilipod/blob/v${{ version }}/README.md
  repository: https://github.com/89luca89/lilipod

extra:
  recipe-maintainers:
    - eunos-1128
