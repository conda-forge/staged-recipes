{% set name = "diffpy.srreal" %}
{% set version = "1.3.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://github.com/diffpy/{{ name }}/archive/refs/tags/v{{ version }}.tar.gz
  sha256: d0e4e847e39689a6d552ed64579b3e1f6f8cfee31130f43f54e4395935f0947e

build:
  missing_dso_whitelist:
    - "*/libboost*"
    - "*/libdiffpy.so"
  skip: true  # [win]
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - scons
    - python
    - setuptools
    - pip
    - numpy
    - libdiffpy
    - boost >1.74.0
    - pycifrw
    - diffpy.structure
    - pyobjcryst
    - periodictable
  host:
    - python
    - setuptools
    - pip
  run:
    - python
    - numpy
    - libdiffpy
    - boost >1.74.0
    - pycifrw
    - diffpy.structure
    - pyobjcryst
    - periodictable

test:
  # Python imports
  imports:
    - diffpy
    - diffpy.srreal
    - diffpy.srreal.tests
  commands:
    # Test if any module can be imported as the first one.
    - python -s -c "import diffpy.srreal.atomradiitable"
    - python -s -c "import diffpy.srreal.attributes"
    - python -s -c "import diffpy.srreal.bondcalculator"
    - python -s -c "import diffpy.srreal.bvparameterstable"
    - python -s -c "import diffpy.srreal.bvscalculator"
    - python -s -c "import diffpy.srreal.eventticker"
    - python -s -c "import diffpy.srreal.overlapcalculator"
    - python -s -c "import diffpy.srreal.pairquantity"
    - python -s -c "import diffpy.srreal.pdfbaseline"
    - python -s -c "import diffpy.srreal.pdfcalculator"
    - python -s -c "import diffpy.srreal.pdfenvelope"
    - python -s -c "import diffpy.srreal.peakprofile"
    - python -s -c "import diffpy.srreal.peakwidthmodel"
    - python -s -c "import diffpy.srreal.scatteringfactortable"
    - python -s -c "import diffpy.srreal.srreal_ext"
    - python -s -c "import diffpy.srreal.structureadapter"
    - python -s -c "import diffpy.srreal.structureconverters"
    - python -s -c "import diffpy.srreal.version"

about:
  home: https://github.com/diffpy/diffpy.srreal
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE.txt
  summary: Calculators for PDF, bond valence sum and other pair-interaction quantities.
  doc_url: https://www.diffpy.org/diffpy.srreal
  dev_url: https://github.com/diffpy/diffpy.srreal

extra:
  recipe-maintainers:
    - pavoljuhas
    - sbillinge
    - st3107
