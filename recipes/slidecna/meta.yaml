{% set version = '0.1.0' %}
{% set posix = 'm2-' if win else '' %}

package:
  name: r-slidecna
  version: {{ version|replace("-", "_") }}

source:
  url:
    - {{ cran_mirror }}/src/contrib/SlideCNA_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/SlideCNA/SlideCNA_{{ version }}.tar.gz
  sha256: 4d46ac297f2fd5fadb258221ee592653ba175f66f7244d1e809c922794e35cc0

build:
  number: 0
  noarch: generic
  rpaths:
    - lib/R/lib/
    - lib/
  missing_dso_whitelist:
    - '*/R.dll'        # [win]
    - '*/Rblas.dll'    # [win]
    - '*/Rlapack.dll'  # [win]

requirements:
  build:
    - {{ posix }}zip               # [win]
    - cross-r-base {{ r_base }}    # [build_platform != target_platform]
  host:
    - r-base
    - r-seurat
    - r-cluster
    - r-data.table
    - r-dendextend
    - r-dplyr
    - r-factoextra
    - r-futile.logger
    - r-ggplot2
    - r-magrittr
    - r-mltools
    - r-pheatmap
    - r-reshape2
    - r-scales
    - r-stringr
    - r-tibble
    - r-tidyselect
  run:
    - r-base
    - r-seurat
    - r-cluster
    - r-data.table
    - r-dendextend
    - r-dplyr
    - r-factoextra
    - r-futile.logger
    - r-ggplot2
    - r-magrittr
    - r-mltools
    - r-pheatmap
    - r-reshape2
    - r-scales
    - r-stringr
    - r-tibble
    - r-tidyselect

test:
  commands:
    - $R -e "library('SlideCNA')"           # [not win]
    - "\"%R%\" -e \"library('SlideCNA')\""  # [win]

about:
  home: https://github.com/dkzhang777/SlideCNA
  license: GPL-3.0-or-later
  summary: This takes spatial single-cell-type RNA-seq data (specifically designed for Slide-seq
    v2) that calls copy number alterations (CNAs) using pseudo-spatial binning, clusters
    cellular units (e.g. beads) based on CNA profile, and visualizes spatial CNA patterns.
    Documentation about 'SlideCNA' is included in the the pre-print by Zhang et al.
    (2022, <doi:10.1101/2022.11.25.517982>). The package 'enrichR' (>= 3.0), conditionally
    used to annotate SlideCNA-determined clusters with gene ontology terms, can be installed
    at <https://github.com/wjawaid/enrichR> or with install_github("wjawaid/enrichR").
  license_family: GPL
  license_file:
    - '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-3'

extra:
  recipe-maintainers:
    - conda-forge/r
    - JWatter
    - dkzhang777  

# Package: SlideCNA
# Title: Calls Copy Number Alterations from Slide-Seq Data
# Version: 0.1.0
# Authors@R: c(person(given = "Diane", family = "Zhang", role = c("aut", "cre"), email = "dkzhang711@gmail.com", comment = c(ORCID = "0000-0002-0268-4413")), person(given = "Johanna", family = "Klughammer", role = c("aut"), email = "klughammer@genzentrum.lmu.de", comment = c(ORCID = "0000-0002-3628-9278")), person(given = "Jan", family = "Watter", role = c("aut"), email = "jan.watter@gmail.com", comment = c(ORCID = "0000-0001-7519-731X")), person("Broad Institute of MIT and Harvard", role = c("cph", "fnd")))
# Description: This takes spatial single-cell-type RNA-seq data (specifically designed for Slide-seq v2) that calls copy number alterations (CNAs) using pseudo-spatial binning, clusters cellular units (e.g. beads) based on CNA profile, and visualizes spatial CNA patterns. Documentation about 'SlideCNA' is included in the the pre-print by Zhang et al. (2022, <doi:10.1101/2022.11.25.517982>). The package 'enrichR' (>= 3.0), conditionally used to annotate SlideCNA-determined clusters with gene ontology terms, can be installed at <https://github.com/wjawaid/enrichR> or with install_github("wjawaid/enrichR").
# Imports: data.table, reshape2, dplyr, ggplot2, scales, pheatmap, cluster, factoextra, dendextend, Seurat, tidyselect, stringr, magrittr, tibble, futile.logger, mltools, utils
# License: GPL (>= 3)
# Encoding: UTF-8
# RoxygenNote: 7.3.2
# Suggests: testthat (>= 3.0.0), enrichR (>= 3.0)
# Config/testthat/edition: 3
# NeedsCompilation: no
# Packaged: 2025-01-22 04:05:22 UTC; dzhang
# Author: Diane Zhang [aut, cre] (<https://orcid.org/0000-0002-0268-4413>), Johanna Klughammer [aut] (<https://orcid.org/0000-0002-3628-9278>), Jan Watter [aut] (<https://orcid.org/0000-0001-7519-731X>), Broad Institute of MIT and Harvard [cph, fnd]
# Maintainer: Diane Zhang <dkzhang711@gmail.com>
# Repository: CRAN
# Date/Publication: 2025-01-23 17:40:05 UTC
