# Note: there are many handy hints in comments in this example -- remove them when you've finalized your recipe

# Jinja variables help maintain the recipe as you'll update the version only here.
# Using the name variable with the URL in line 14 is convenient
# when copying and pasting from another recipe, but not really needed.
{% set name = "INGRID" %}
{% set version = "2.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 1d92d669aabb72f2a83763c28a8ad682cc530ae47f11e7131afeda025efd286c
  patches:
    - setup.py.patch

build:
  noarch: python
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - python >=3.6,<4
    - pip
    - setuptools
    - sympy
    - m2r2
    - scipy >=1.3.1
    - numpy
    - matplotlib
    - pyyaml
  run:
    - python >=3.6,<4
    - numpy
    - sympy
    - m2r2
    - scipy >=1.3.1
    - matplotlib
    - pyyaml

test:
  # Some packages might need a `test/commands` key to check CLI.
  # List all the packages/modules that `run_test.py` imports.
  imports:
    - INGRID
  requires:
    - matplotlib
    - numpy
#  commands:
#    - pip check

about:
  home: https://github.com/LLNL/INGRID
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: 'Tokamak edge plasma grid generator for magnetic-topologies with up to two x-points anywhere in the domain.'
  description: |
    INGRID (Interactive Grid) is a Python based tokamak edge plasma grid generator capable of automatic generation of grids for magnetic-topologies with up to two x-points anywhere in the domain. The code generates block-structured grids in three steps: 1)Analysis of MHD reconscruction code such as EFIT to identify the embedded topology. 2) Generation of the appropriate Patch map which appropriately models the domain (blocks).  3) Generation of the grid ready for export.    INGRID can be utilized in a GUI mode and noninteractively via Python scripts. Both modes of operation support the use of the YAML formatted parameter file.
  doc_url: https://ingrid.readthedocs.io/en/latest/
  dev_url: https://github.com/LLNL/INGRID

extra:
  recipe-maintainers:
    - smithsp
