{% set name = "ngsidekick" %}
{% set version = "0.0.5" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/janelia-flyem/ngsidekick/archive/refs/tags/v{{ version }}.tar.gz
  sha256: c734947e9769734219c690e3c162cd2cf3add0eb084907188886b9b66e49325e

build:
  number: 0

  # Note: tensorstore isn't packaged for windows in conda-forge yet,
  # so this package will only work on mac/linux for now.
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  script_env:
    - SETUPTOOLS_SCM_PRETEND_VERSION={{ version }}

requirements:
  host:
    - python {{ python_min }}
    - pip
    - hatchling >=1.27
    - hatch-vcs
  run:
    - python >={{ python_min }}
    - tqdm
    - requests
    - numpy
    - pandas
    - numba
    - neuroglancer
    - tensorstore

test:
  imports:
    - ngsidekick
  requires:
    - python {{ python_min }}
    - pip
    - pytest
    - bokeh
  source_files:
    - tests
  commands:
    - pip check
    - pytest tests

about:
  summary: Tools for preparing and working with neuroglancer scenes
  description: Tools for preparing and working with neuroglancer scenes.

  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE

  home: https://github.com/janelia-flyem/ngsidekick
  dev_url: https://github.com/janelia-flyem/ngsidekick
  doc_url: https://janelia-flyem.github.io/ngsidekick/docs/index.html

extra:
  recipe-maintainers:
    - stuarteberg
