package:
  name: _modules
  version: 0.0.1

build:
  number: 0

outputs:
  - name: _produces_cxx_modules
    build:
      string: {{ compiler_cxx }}_{{ PKG_BUILDNUM }}
      run_exports:
        - _produces_cxx_modules * {{ compiler_cxx }}*
    requirements:
      run_constrained:
        - clangxx_{{ target_platform }} <0.0a0      # [compiler_cxx not in ("clangxx", "clang-cl")]
        - gxx_{{ target_platform }} <0.0a0          # [compiler_cxx != "gxx"]
        - vc_{{ target_platform }} <0.0a0           # [compiler_cxx != "vc"]
    test:
      commands:
        - echo "is a metapackage"

  - name: _produces_fortran_modules
    build:
      string: {{ compiler_fortran }}_{{ PKG_BUILDNUM }}
      run_exports:
        - _produces_fortran_modules * {{ compiler_fortran }}*
    requirements:
      run_constrained:
        - gfortran_{{ target_platform }} <0.0a0     # [compiler_fortran != "gfortran"]
        - flang_{{ target_platform }} <0.0a0        # [compiler_fortran != "flang"]
        - ifx_{{ target_platform }} <0.0a0          # [compiler_fortran != "ifx"]
    test:
      commands:
        - echo "is a metapackage"

about:
  summary: Meta-package for dealing with C++/Fortran modules
  license: BSD-3-Clause
  license_file: LICENSE.txt
  home: https://github.com/conda-forge/_modules-feedstock

extra:
  recipe-maintainers:
    - h-vetinari
  feedstock-name: _modules
