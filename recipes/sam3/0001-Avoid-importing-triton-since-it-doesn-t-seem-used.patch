From 16e2e16ff4b3bed38f71a8010b42e113d0e42e60 Mon Sep 17 00:00:00 2001
From: Mark Harfouche <mark.harfouche@gmail.com>
Date: Sat, 22 Nov 2025 16:00:21 -0500
Subject: [PATCH] Avoid importing triton since it doesn't seem used

---
 sam3/model/sam3_tracker_utils.py | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/sam3/model/sam3_tracker_utils.py b/sam3/model/sam3_tracker_utils.py
index 7afc70a..94d7899 100644
--- a/sam3/model/sam3_tracker_utils.py
+++ b/sam3/model/sam3_tracker_utils.py
@@ -5,8 +5,6 @@ import torch
 import torch.nn.functional as F
 from numpy.typing import NDArray
 
-from sam3.model.edt import edt_triton
-
 
 def sample_box_points(
     masks: torch.Tensor,
@@ -148,6 +146,9 @@ def sample_one_point_from_error_center(gt_masks, pred_masks, padding=True):
     - points: [B, 1, 2], dtype=torch.float, contains (x, y) coordinates of each sampled point
     - labels: [B, 1], dtype=torch.int32, where 1 means positive clicks and 0 means negative clicks
     """
+    # Lazy import triton to allow it to run on platforms without it
+    from sam3.model.edt import edt_triton
+
     if pred_masks is None:
         pred_masks = torch.zeros_like(gt_masks)
     assert gt_masks.dtype == torch.bool and gt_masks.size(1) == 1
-- 
2.43.0

