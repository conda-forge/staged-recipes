{% set version = '1.3-5' %}
{% set posix = 'm2-' if win else '' %}
{% set native = 'm2w64-' if win else '' %}

package:
  name: r-flexclust
  version: {{ version|replace("-", "_") }}

source:
  fn: flexclust_{{ version }}.tar.gz
  url:
    - {{ cran_mirror }}/src/contrib/flexclust_{{ version }}.tar.gz
    - {{ cran_mirror }}/src/contrib/Archive/flexclust/flexclust_{{ version }}.tar.gz
  sha256: dbf49969c93a7b314d9dc3299a0764ed9a804ba7dcbdc08a1235f244f4b85059

build:
  merge_build_host: True  # [win]
  number: 0
  skip: true  # [win32]
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - {{ compiler('c') }}        # [not win]
    - {{native}}toolchain        # [win]
    - {{posix}}filesystem        # [win]
    - {{posix}}make
    - {{posix}}sed               # [win]
    - {{posix}}coreutils         # [win]
    - {{posix}}zip               # [win]
  host:
    - r-base
    - r-lattice
    - r-modeltools
  run:
    - r-base
    - {{native}}gcc-libs         # [win]
    - r-lattice
    - r-modeltools

test:
  commands:
    - $R -e "library('flexclust')"           # [not win]
    - "\"%R%\" -e \"library('flexclust')\""  # [win]

about:
  home: https://CRAN.R-project.org/package=flexclust
  license: GPL-2
  summary: The main function kcca implements a general framework for k-centroids cluster analysis
    supporting arbitrary distance measures and centroid computation. Further cluster
    methods include hard competitive learning, neural gas, and QT clustering. There
    are numerous visualization methods for cluster results (neighborhood graphs, convex
    cluster hulls, barcharts of centroids, ...), and bootstrap methods for the analysis
    of cluster stability.
  license_family: GPL2
  license_file: '{{ environ["PREFIX"] }}/lib/R/share/licenses/GPL-2'  # [unix]
  license_file: '{{ environ["PREFIX"] }}\R\share\licenses\GPL-2'  # [win]

extra:
  recipe-maintainers:
    - johanneskoester
    - bgruening
    - daler
    - jdblischak
    - cbrueffer
