{% set name = "srwpy" %}
{% set version = "0.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/Synchrotron-Radiation-Workshop/SRW/archive/v{{ version }}.tar.gz
  sha256: 53bdcb0c02c59659bd0cb3849eac15c166db65b69d6fb62d4b8bf97cc4c96be8

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make  # [not win]
    - ninja  # [win]
    - llvm-openmp  # [osx]
    - libgomp      # [linux]
    - fftw  # [win]
  host:
    - python
    - pip
  run:
    - python
    - fftw  # [win]
    - matplotlib-base
    - numpy
    - pillow
    - scipy

test:
  imports:
    - srwpy
    - srwpy.srwl_bl
    - srwpy.srwlib
    - srwpy.srwlpy
    - srwpy.uti_math

about:
  home: https://github.com/Synchrotron-Radiation-Workshop/SRW
  license: EPICS
  license_file: COPYRIGHT.txt
  summary: Synchrotron Radiation Workshop - Python
  description: |
    SRW is a physical optics computer code for calculation of detailed characteristics of
    Synchrotron Radiation (SR) generated by relativistic electrons in magnetic fields of
    arbitrary configuration and for simulation of the radiation wavefront propagation 
    through optical systems of beamlines.
  dev_url: https://github.com/Synchrotron-Radiation-Workshop/srw
  doc_url: https://synchrotron-radiation-workshop.github.io/srw

extra:
  recipe-maintainers:
    - hhslepicka 
    - mrakitin
