{% set name = "mattergen" %}
{% set version = "1.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/microsoft/mattergen/archive/v{{ version }}.tar.gz
  sha256: 032129f6b32c7c55d1f2b4be6f8f5de12d7b23beccd271915a347cf0748697f4

build:
  skip: true  # [py<310]
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
  host:
    - cython
    - python
    - pip
    - setuptools
  run:
    - python
    - matminer >=0.9.4
    - ase >=3.22.1
    - atomate2 >=0.0.13
    - autopep8
    - bunnet >=1.2.0
    - cachetools
    - contextlib2
    - custodian
    - cvxpy
    - cython
    - dill
    - e3nn >=0.5.1
    - emmet-core >=0.84.2
    - fire
    - gitpython
    - hydra-core >=1.3.1
    - hydra-joblib-launcher ==1.1.5
    - ipywidgets
    - jobflow
    - jupyterlab >=4.2.5
    - lmdb
    - maggma
    - matplotlib-base ==3.8.4
    - matscipy >=0.7.0
    - mattersim >=1.0.0
    - mongomock >=4.1.2
    - monty >=2024.7.30
    - mp-api
    - multiprocess
    - nglview
    - notebook >=7.2.2
    - numpy <2.0
    - omegaconf >=2.3.0
    - p-tqdm >=1.4.0
    - petname >=2.6
    - protobuf >=3.20,<4.dev0
    - pyarrow
    - pydantic >=2.5.1
    - pyg-lib
    - pymatgen >=2024.6.4
    # pymatgen-analysis-alloys
    - pymatviz >=0.8.2
    - pymongo
    - pylint
    - pytest
    - pytorch-lightning >=2.0.6
    - rich-click <1.8.0
    - seaborn
    - setuptools
    - smact
    - streamlit
    - sympy >=1.11.1
    - tensorboard
    - pytorch >=2.2.1
    - torchvision >=0.17.1
    - torchaudio >=2.2.1
    - pytorch_cluster
    - pytorch_geometric >=2.5
    - torch-scatter
    - pytorch_sparse
    - pytorch_spline_conv
    - tqdm
    - urllib3 <2.0.0
    - wandb >=0.10.33

test:
  imports:
    - mattergen
  requires:
    - python {{ python_min }}

about:
  home: https://github.com/microsoft/mattergen
  summary: |
     MatterGen is a generative model for inorganic materials design across
     the periodic table that can be fine-tuned to steer the generation towards
     a wide range of property constraints.
  license: MIT AND Apache-2.0 AND BSD-4-Clause
  license_file:
    - LICENSE
    - NOTICE
    - data-release/nanoindentation_measurements/LICENSE.md
    - data-release/xps_measurements/LICENSE.md
    - data-release/cifs/LICENSE.md
    - data-release/xrd_measurements/LICENSE.md

extra:
  recipe-maintainers:
    - awvwgk
