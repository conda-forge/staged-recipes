
context:
  name: enkits
  version: "1.11"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  url: https://github.com/dougbinks/enkiTS/archive/refs/tags/v${{ version }}.tar.gz
  sha256: b57a782a6a68146169d29d180d3553bfecb9f1a0e87a5159082331920e7d297e
  patches:
    - patches/include_initializer_list.patch

build:
  number: 0

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cmake
    - ninja
  run_exports:
    - ${{ pin_subpackage(name, upper_bound="x.x") }}

tests:
  - package_contents:
      lib:
      - if: win
        then: enkiTS/enkiTS.lib
        else: enkiTS/libenkiTS
      include:
        - enkiTS/TaskScheduler.h
        - enkiTS/LockLessMultiReadPipe.h
        - enkiTS/TaskScheduler_c.h

about:
  homepage: https://github.com/dougbinks/enkiTS
  summary: "A permissively licensed C and C++ Task Scheduler for creating parallel programs"
  description: |
    A permissively licensed C and C++ Task Scheduler for creating parallel programs. Requires C++11 support.
    The primary goal of enkiTS is to help developers create programs 
    which handle both data and task level parallelism to utilize the full performance of multicore CPUs,
    whilst being lightweight (only a small amount of code) and easy to use.
  license: Zlib
  license_file: License.txt
  repository: https://github.com/dougbinks/enkiTS
extra:
  recipe-maintainers:
    - DerThorsten
