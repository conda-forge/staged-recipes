{% set name = "classy" %}
{% set version = "2.9.4" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/lesgourg/class_public/archive/v{{ version }}.tar.gz
  sha256: 60dc445a733e94f9a862c81447cccdc60af02b9517461e20ee30b2a0901cec8e

build:
  number: 0
  script: |
    make all
    cd python; "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
    - python
    - pip
  run:
    - python

test:
  imports:
    - classy
    - classy.Class

about:
  home: http://class-code.net
  license: 'The use of CLASS is free provided that if you use it in a publication, you will cite at least the paper CLASS II: Approximation schemes'
  summary: 'the Cosmic Linear Anisotropy Solving System'
  description: |
    The purpose of CLASS is to simulate the evolution of linear perturbations in the universe and to compute CMB and large scale structure observables. Its name also comes from the fact that it is written in object-oriented style mimicking the notion of class. Classes are a wonderfull programming feature available e.g. in C++ and python, but these languages are known to be less vectorizable/parallelizable than plain C (or Fortran), and hence potentially slower. For CLASS we choose to use plain C for high performances, while organizing the code in a few modules that reproduce the architecture and philosophy of C++ classes, for optimal readability and modularity.
  doc_url: https://github.com/lesgourg/class_public/wiki/Python-wrapper
  dev_url: https://github.com/lesgourg/class_public

extra:
  recipe-maintainers:
    - ickc
